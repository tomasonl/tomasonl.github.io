<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>åˆ†å¸ƒå¼å¾®æœåŠ¡æ²»ç† | æå“çš„æŠ€æœ¯åšå®¢</title><meta name="keywords" content="å·¥ä½œè®°å½•"><meta name="author" content="Tomasonlee"><meta name="copyright" content="Tomasonlee"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="å¾®æœåŠ¡â€”â€”ä¸€ç§è½¯å¼€æŠ€æœ¯ï¼Œé¢å‘æœåŠ¡SOAæ¶æ„çš„ä¸€ç§å˜ä½“ï¼ŒæŠŠç¨‹åºæ„é€ ä¸ºå¾ˆå¤šæ¾è€¦åˆçš„æœåŠ¡ã€‚åˆ†å¸ƒå¼â€”â€”ä¸€ç§éƒ¨ç½²æ–¹å¼ï¼Œæé«˜ç³»ç»Ÿç¨³å®šæ€§ï¼Œä¼˜åŒ–æ€§èƒ½ã€‚åˆ†æ•£éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ã€‚æ˜¯ä¸€ç§é¢å‘SOAæ¶æ„çš„ï¼ŒæœåŠ¡ä¹‹é—´ä¹Ÿæ˜¯é€šè¿‡RPCç­‰æ–¹å¼äº¤äº’çš„ã€‚é€»è¾‘æ¶æ„è®¾è®¡å®Œåå°±è¯¥åšç‰©ç†æ¶æ„è®¾è®¡ï¼Œç³»ç»Ÿåº”ç”¨éƒ¨ç½²åœ¨è¶…è¿‡ä¸€å°æœåŠ¡å™¨æˆ–è™šæ‹Ÿæœºä¸Šï¼Œä¸”å„åˆ†å¼€éƒ¨ç½²çš„éƒ¨åˆ†å½¼æ­¤é€šè¿‡å„ç§é€šè®¯åè®®äº¤äº’ä¿¡æ¯ï¼Œå°±å¯ç®—ä½œåˆ†å¸ƒå¼éƒ¨ç½²ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹çš„å¾®æœåŠ¡è‚¯å®šæ˜¯åˆ†å¸ƒå¼éƒ¨ç½²çš„ï¼Œåˆ†">
<meta property="og:type" content="article">
<meta property="og:title" content="åˆ†å¸ƒå¼å¾®æœåŠ¡æ²»ç†">
<meta property="og:url" content="http://tomasonl.github.io/2020/12/02/%E5%88%86%E5%B8%83%E5%BC%8F%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/index.html">
<meta property="og:site_name" content="æå“çš„æŠ€æœ¯åšå®¢">
<meta property="og:description" content="å¾®æœåŠ¡â€”â€”ä¸€ç§è½¯å¼€æŠ€æœ¯ï¼Œé¢å‘æœåŠ¡SOAæ¶æ„çš„ä¸€ç§å˜ä½“ï¼ŒæŠŠç¨‹åºæ„é€ ä¸ºå¾ˆå¤šæ¾è€¦åˆçš„æœåŠ¡ã€‚åˆ†å¸ƒå¼â€”â€”ä¸€ç§éƒ¨ç½²æ–¹å¼ï¼Œæé«˜ç³»ç»Ÿç¨³å®šæ€§ï¼Œä¼˜åŒ–æ€§èƒ½ã€‚åˆ†æ•£éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ã€‚æ˜¯ä¸€ç§é¢å‘SOAæ¶æ„çš„ï¼ŒæœåŠ¡ä¹‹é—´ä¹Ÿæ˜¯é€šè¿‡RPCç­‰æ–¹å¼äº¤äº’çš„ã€‚é€»è¾‘æ¶æ„è®¾è®¡å®Œåå°±è¯¥åšç‰©ç†æ¶æ„è®¾è®¡ï¼Œç³»ç»Ÿåº”ç”¨éƒ¨ç½²åœ¨è¶…è¿‡ä¸€å°æœåŠ¡å™¨æˆ–è™šæ‹Ÿæœºä¸Šï¼Œä¸”å„åˆ†å¼€éƒ¨ç½²çš„éƒ¨åˆ†å½¼æ­¤é€šè¿‡å„ç§é€šè®¯åè®®äº¤äº’ä¿¡æ¯ï¼Œå°±å¯ç®—ä½œåˆ†å¸ƒå¼éƒ¨ç½²ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹çš„å¾®æœåŠ¡è‚¯å®šæ˜¯åˆ†å¸ƒå¼éƒ¨ç½²çš„ï¼Œåˆ†">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.1/Pic/Blogcover/%E5%88%86%E5%B8%83%E5%BC%8F%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.jpg">
<meta property="article:published_time" content="2020-12-02T08:29:32.000Z">
<meta property="article:modified_time" content="2021-02-10T01:10:19.473Z">
<meta property="article:author" content="Tomasonlee">
<meta property="article:tag" content="å·¥ä½œè®°å½•">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.1/Pic/Blogcover/%E5%88%86%E5%B8%83%E5%BC%8F%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.jpg"><link rel="shortcut icon" href="/img/1.jpg"><link rel="canonical" href="http://tomasonl.github.io/2020/12/02/%E5%88%86%E5%B8%83%E5%BC%8F%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-02-10 09:10:19'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="æå“çš„æŠ€æœ¯åšå®¢" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/2.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">34</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶å…‰å°è®°</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾æµè§ˆ</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> æ¸¸ä¹ä¸­å¿ƒ</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/photo/"><i class="fa-fw fas fa-images"></i><span> æ—¶å…‰ç…§ç›¸é¦†</span></a></li><li><a class="site-page" href="/movie/"><i class="fa-fw fas fa-video"></i><span> å½±éŸ³å¨±ä¹å®¤</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> æŒ‡å—ä¸­å¿ƒ</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºä½œè€…</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.1/Pic/Blogcover/%E5%88%86%E5%B8%83%E5%BC%8F%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">æå“çš„æŠ€æœ¯åšå®¢</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶å…‰å°è®°</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾æµè§ˆ</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> æ¸¸ä¹ä¸­å¿ƒ</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/photo/"><i class="fa-fw fas fa-images"></i><span> æ—¶å…‰ç…§ç›¸é¦†</span></a></li><li><a class="site-page" href="/movie/"><i class="fa-fw fas fa-video"></i><span> å½±éŸ³å¨±ä¹å®¤</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> æŒ‡å—ä¸­å¿ƒ</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äºä½œè€…</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><h1 class="post-title">åˆ†å¸ƒå¼å¾®æœåŠ¡æ²»ç†</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2020-12-02T08:29:32.000Z" title="å‘è¡¨äº 2020-12-02 16:29:32">2020-12-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2021-02-10T01:10:19.473Z" title="æ›´æ–°äº 2021-02-10 09:10:19">2021-02-10</time></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><strong>å¾®æœåŠ¡</strong>â€”â€”ä¸€ç§è½¯å¼€æŠ€æœ¯ï¼Œé¢å‘æœåŠ¡SOAæ¶æ„çš„ä¸€ç§å˜ä½“ï¼ŒæŠŠç¨‹åºæ„é€ ä¸ºå¾ˆå¤šæ¾è€¦åˆçš„æœåŠ¡ã€‚<br><strong>åˆ†å¸ƒå¼</strong>â€”â€”ä¸€ç§éƒ¨ç½²æ–¹å¼ï¼Œæé«˜ç³»ç»Ÿç¨³å®šæ€§ï¼Œä¼˜åŒ–æ€§èƒ½ã€‚<br>åˆ†æ•£éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ã€‚æ˜¯ä¸€ç§é¢å‘SOAæ¶æ„çš„ï¼ŒæœåŠ¡ä¹‹é—´ä¹Ÿæ˜¯é€šè¿‡RPCç­‰æ–¹å¼äº¤äº’çš„ã€‚é€»è¾‘æ¶æ„è®¾è®¡å®Œåå°±è¯¥åšç‰©ç†æ¶æ„è®¾è®¡ï¼Œç³»ç»Ÿåº”ç”¨éƒ¨ç½²åœ¨è¶…è¿‡ä¸€å°æœåŠ¡å™¨æˆ–è™šæ‹Ÿæœºä¸Šï¼Œä¸”å„åˆ†å¼€éƒ¨ç½²çš„éƒ¨åˆ†å½¼æ­¤é€šè¿‡å„ç§é€šè®¯åè®®äº¤äº’ä¿¡æ¯ï¼Œå°±å¯ç®—ä½œåˆ†å¸ƒå¼éƒ¨ç½²ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹çš„å¾®æœåŠ¡è‚¯å®šæ˜¯åˆ†å¸ƒå¼éƒ¨ç½²çš„ï¼Œåˆ†å¸ƒå¼éƒ¨ç½²çš„åº”ç”¨ä¸ä¸€å®šæ˜¯å¾®æœåŠ¡æ¶æ„çš„ï¼Œæ¯”å¦‚é›†ç¾¤éƒ¨ç½²ï¼Œå®ƒæ˜¯æŠŠç›¸åŒåº”ç”¨å¤åˆ¶åˆ°ä¸åŒæœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯é€»è¾‘åŠŸèƒ½ä¸Šè¿˜æ˜¯å•ä½“åº”ç”¨ã€‚</p>
<h1 id="å¾®æœåŠ¡"><a href="#å¾®æœåŠ¡" class="headerlink" title="å¾®æœåŠ¡"></a>å¾®æœåŠ¡</h1><h2 id="1ã€å¾®æœåŠ¡è®¾è®¡åŸåˆ™"><a href="#1ã€å¾®æœåŠ¡è®¾è®¡åŸåˆ™" class="headerlink" title="1ã€å¾®æœåŠ¡è®¾è®¡åŸåˆ™"></a>1ã€å¾®æœåŠ¡è®¾è®¡åŸåˆ™</h2><ul>
<li>å•ä¸€èŒè´£â€”-æ¯ä¸ªå¾®æœåŠ¡åªéœ€å®ç°è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼›</li>
<li>æœåŠ¡è‡ªæ²»â€”-æ¯ä¸ªå¾®æœåŠ¡ä»å¼€å‘ã€æµ‹è¯•ã€è¿ç»´ã€å­˜å‚¨ç­‰å‡ç‹¬ç«‹,ä¸ä¾èµ–äºå…¶å®ƒæ¨¡å—;</li>
<li>è½»é‡çº§é€šä¿¡â€”-é€šä¿¡çš„è¯­è¨€è½»é‡,é€šä¿¡æ–¹å¼éœ€è·¨è¯­è¨€ã€è·¨å¹³å°çš„ï¼›</li>
<li>æ¥å£æ˜ç¡®â€”-æ¥å£å°½é‡åšçš„æ›´é€šç”¨,æ›´çµæ´»,ä»è€Œå°½é‡é¿å…å…¶å®ƒæ¨¡å—è¿å¸¦è°ƒæ•´ã€‚</li>
</ul>
<h2 id="2ã€å¾®æœåŠ¡å››ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š"><a href="#2ã€å¾®æœåŠ¡å››ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š" class="headerlink" title="2ã€å¾®æœåŠ¡å››ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š"></a>2ã€å¾®æœåŠ¡å››ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š</h2><ul>
<li>è¿™ä¹ˆå¤šæœåŠ¡ï¼Œå®¢æˆ·ç«¯å¦‚ä½•è®¿é—®ï¼Ÿ</li>
<li>è¿™ä¹ˆå¤šæœåŠ¡ï¼ŒæœåŠ¡é—´å¦‚ä½•é€šä¿¡ï¼Ÿ</li>
<li>è¿™ä¹ˆå¤šæœåŠ¡ï¼Œå¦‚ä½•å®ç°å’Œæ²»ç†ï¼Ÿ</li>
<li>è¿™ä¹ˆå¤šæœåŠ¡ï¼ŒæœåŠ¡æŒ‚äº†æ€ä¹ˆåŠï¼Ÿ</li>
</ul>
<h2 id="3ã€å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹ï¼Ÿ"><a href="#3ã€å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="3ã€å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹ï¼Ÿ"></a>3ã€å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</h2><ul>
<li>å•ä¸€èŒè´£ï¼Œèšç„¦æŒ‡å®šä¸šåŠ¡åŠŸèƒ½ï¼Œå¼€å‘æ•ˆç‡é«˜ï¼›</li>
<li>æ¾è€¦åˆï¼Œå„é˜¶æ®µç‹¬ç«‹ã€å­˜å‚¨å¯ä»¥ç‹¬ç«‹ä¹Ÿå¯ä»¥ç»Ÿä¸€ï¼›</li>
<li>æ˜“äºä¸ç¬¬ä¸‰æ–¹å¹³å°é›†æˆï¼Œè‡ªåŠ¨éƒ¨ç½²ï¼ˆjenkinsã€Hudsonã€bambooâ€¦ï¼‰ï¼›</li>
<li>å¼€å‘äººå‘˜è¦å¤„ç†åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¤æ‚æ€§ã€è¿ç»´æµ‹è¯•æˆæœ¬å¢å¤§ï¼›</li>
<li>æœåŠ¡å™¨é€šä¿¡æˆæœ¬ï¼Œéƒ¨ç½²ä¾èµ–é—®é¢˜ï¼Œå†…å­˜å¼€é”€å¤§ï¼›</li>
</ul>
<h2 id="4ã€å¾®æœåŠ¡é€šä¿¡æ–¹å¼"><a href="#4ã€å¾®æœåŠ¡é€šä¿¡æ–¹å¼" class="headerlink" title="4ã€å¾®æœåŠ¡é€šä¿¡æ–¹å¼"></a>4ã€å¾®æœåŠ¡é€šä¿¡æ–¹å¼</h2><h3 id="1ã€RPCé€šä¿¡ä»‹ç»"><a href="#1ã€RPCé€šä¿¡ä»‹ç»" class="headerlink" title="1ã€RPCé€šä¿¡ä»‹ç»"></a>1ã€RPCé€šä¿¡ä»‹ç»</h3><p>Â  Â RPCï¼ˆRemote Procedure Call Protocolï¼‰è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œè¦ä»ä¸€å°è®¡ç®—æœºä¸Šæ‰§è¡Œå¦å¤–ä¸€å°è®¡ç®—æœºä¸Šçš„ç¨‹åºã€‚è·¨è¶Šäº†ç‰©ç†æœåŠ¡å™¨çš„é™åˆ¶ï¼Œåœ¨ç½‘ç»œä¸­å®Œæˆã€‚åŸºäºSocketï¼Œå·¥ä½œåœ¨ä¼šè¯å±‚ã€‚è‡ªå®šä¹‰æ•°æ®æ ¼å¼ï¼Œé€Ÿåº¦å¿«ï¼Œæ•ˆç‡é«˜ã€‚</p>
<p>1ã€ä¸¤ä¸ªé‡ç‚¹ï¼šèƒ½å¦å¿«é€Ÿå»ºç«‹è¿æ¥ã€åºåˆ—åŒ–å’Œååºåˆ—åŒ–æœºåˆ¶å¿«ä¸å¿«ï¼›<br>2ã€æ¡†æ¶å¾ˆå¤šï¼šDubboã€HSFã€æ—©æœŸçš„webserviceã€è°·æ­Œå¼€æºçš„gRPCã€Apacheçš„Thriftã€æ–°æµªå¾®åšçš„Montanç­‰ï¼›</p>
<p>RPCè°ƒç”¨è¿‡ç¨‹<br><strong>åºåˆ—åŒ–ï¼š</strong>æŠŠå¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ç§°ä¸ºå¯¹è±¡çš„åºåˆ—åŒ–ï¼Œç¼–ç è¿‡ç¨‹ã€‚<br><strong>ååºåˆ—åŒ–ï¼š</strong>æŠŠå­—èŠ‚åºåˆ—æ¢å¤ä¸ºå¯¹è±¡çš„è¿‡ç¨‹ç§°ä¸ºå¯¹è±¡çš„ååºåˆ—åŒ–ï¼Œä¹Ÿè§£ç è¿‡ç¨‹ã€‚</p>
<h3 id="2ã€HTTPé€šä¿¡ä»‹ç»"><a href="#2ã€HTTPé€šä¿¡ä»‹ç»" class="headerlink" title="2ã€HTTPé€šä¿¡ä»‹ç»"></a>2ã€HTTPé€šä¿¡ä»‹ç»</h3><p>httpå…¶å®æ˜¯ä¸€ç§ç½‘ç»œä¼ è¾“åè®®ï¼ŒåŸºäºTCPï¼Œå·¥ä½œåœ¨åº”ç”¨å±‚ï¼Œè§„å®šäº†æ•°æ®ä¼ è¾“çš„æ ¼å¼ã€‚ç°åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸æœåŠ¡ç«¯é€šä¿¡åŸºæœ¬éƒ½æ˜¯é‡‡ç”¨Httpåè®®ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è¿›è¡Œè¿œç¨‹æœåŠ¡è°ƒç”¨ã€‚ç¼ºç‚¹æ˜¯æ¶ˆæ¯å°è£…è‡ƒè‚¿ï¼Œä¼˜åŠ¿æ˜¯å¯¹æœåŠ¡çš„æä¾›å’Œè°ƒç”¨æ–¹æ²¡æœ‰ä»»ä½•æŠ€æœ¯é™å®šï¼Œè‡ªç”±çµæ´»ï¼Œæ›´ç¬¦åˆå¾®æœåŠ¡ç†å¿µã€‚å¼€æºhttpå®¢æˆ·ç«¯å·¥å…·ï¼Œä¾‹å¦‚ï¼šHttpClientï¼ˆApacheï¼‰-OKHttpï¼ˆandroidè½»é‡ç½‘ç»œé€šä¿¡æ¡†æ¶,ç§»åŠ¨æ”¯ä»˜Squareå…¬å¸è´¡çŒ®(è¿˜æä¾›Picassoå›¾ç‰‡ç¼“å­˜æ¡†æ¶)ï¼Œokhttpç”¨äºæ›¿ä»£HttpUrlConnectionå’ŒApache HttpClient)-URLConnectionï¼ˆURLConnectionä»»ä½•ç½‘ç»œè¿æ¥éƒ½éœ€è¦ç»è¿‡socketæ‰èƒ½è¿æ¥ï¼ŒHttpURLConnectionä¸éœ€è¦è®¾ç½®socketï¼Œæ‰€ä»¥ï¼ŒHttpURLConnectionå¹¶ä¸æ˜¯åº•å±‚çš„è¿æ¥ï¼Œè€Œæ˜¯åœ¨åº•å±‚è¿æ¥ä¸Šçš„ä¸€ä¸ªè¯·æ±‚ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆHttpURLConnecitonåªæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè‡ªèº«ä¸èƒ½è¢«å®ä¾‹åŒ–çš„åŸå› ã€‚ï¼‰</p>
<p>Springæä¾›äº†ä¸€ç§ç®€å•ä¾¿æ·çš„æ¨¡æ¿â€”RestTemplateã€‚åº•å±‚æ˜¯HttpURLConnectionå®ç°ï¼ä½¿ç”¨restTemplateè®¿é—®restfulæ¥å£éå¸¸çš„ç®€å•ç²—æš´æ— è„‘ã€‚(urlã€requestMapã€ResponseBean.class)è¿™ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨ è¯·æ±‚åœ°å€ã€è¯·æ±‚å‚æ•°ã€HTTPå“åº”è½¬æ¢è¢«è½¬æ¢æˆçš„å¯¹è±¡ç±»å‹ã€‚RestTemplateæ–¹æ³•çš„åç§°éµå¾ªå‘½åçº¦å®šï¼Œç¬¬ä¸€éƒ¨åˆ†æŒ‡å‡ºæ­£åœ¨è°ƒç”¨ä»€ä¹ˆHTTPæ–¹æ³•ï¼Œç¬¬äºŒéƒ¨åˆ†æŒ‡ç¤ºè¿”å›çš„å†…å®¹ã€‚æœ¬ä¾‹ä¸­è°ƒç”¨äº†restTemplate.postForObjectæ–¹æ³•ï¼ŒpostæŒ‡è°ƒç”¨äº†HTTPçš„postæ–¹æ³•ï¼ŒObjectæŒ‡å°†HTTPå“åº”è½¬æ¢ä¸ºæ‚¨é€‰æ‹©çš„å¯¹è±¡ç±»å‹ã€‚</p>
<p>å°ç»“ï¼š</p>
<p>1.è°ƒç”¨çš„å„ç§å®ç°æ‰€è°“çš„httpè¿æ¥çš„api(åŒ…æ‹¬javaè‡ªå¸¦çš„httpurlconnection)å…¶åº•å±‚åŸºæœ¬ä¸Šéƒ½æ˜¯è°ƒç”¨çš„jdkçš„socketæ¥å£ã€‚<br>2.socketæ˜¯åŸºäºtcp/ipåè®®å°è£…çš„ä¸€å¥—å®ç°tcpè¿æ¥çš„æ¥å£ï¼Œæˆ–è€…è¯´æ˜¯å·¥å…·ã€‚<br>3.æ‰€ä»¥ä¼šè¯´å…¶å®httpä¹Ÿæ˜¯é€šè¿‡socketæ¥å®ç°çš„è¿™ç§çœ‹ä¼¼æ²¡æœ‰é—®é¢˜ä½†åˆå«ç³Šä¸æ¸…çš„è¯´æ³•ã€‚<br>4.httpåªæ˜¯ä¸€ç§åè®®ï¼Œä»€ä¹ˆè¯·æ±‚å¤´ï¼Œè¯·æ±‚é¢˜ï¼Œå“åº”å¤´éƒ½æ˜¯æ ¹æ®å›ºå®šçš„æ ¼å¼åˆ¶å®šçš„æŠ¥æ–‡ï¼Œç„¶åæœ€ç»ˆ(å¯èƒ½ä¸ç›´æ¥è°ƒç”¨volley,okhttpç­‰)éƒ½ä¼šé€šè¿‡socketæ¥å£å°†è¿™äº›æŠ¥æ–‡å‘ç»™æœåŠ¡å™¨æˆ–è€…å®¢æˆ·ç«¯ã€‚</p>
<h1 id="SpringCloud"><a href="#SpringCloud" class="headerlink" title="SpringCloud"></a>SpringCloud</h1><p>SpringCloudæ˜¯ä¸ªç”Ÿæ€ï¼Œå¹¶ä¸æ˜¯ä¸€é—¨æŠ€æœ¯ã€‚å…­å¤§æ¨¡å—ï¼šè´Ÿè½½å‡è¡¡ã€æœåŠ¡æ³¨å†Œä¸å‘ç°ã€ç›‘æ§ã€é…ç½®ç®¡ç†ã€ç½‘å…³ã€åˆ†å¸ƒå¼è¿½è¸ªï¼›</p>
<h2 id="1ã€Eurekaæ³¨å†Œä¸­å¿ƒ"><a href="#1ã€Eurekaæ³¨å†Œä¸­å¿ƒ" class="headerlink" title="1ã€Eurekaæ³¨å†Œä¸­å¿ƒ"></a>1ã€Eurekaæ³¨å†Œä¸­å¿ƒ</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥è§£å†³ç¬¬ä¸€é—®é¢˜ï¼ŒæœåŠ¡çš„ç®¡ç†ã€‚çŠ¹ç‘å¡ï¼Œæ³¨å†Œä¸­å¿ƒæ¥è‡ªNetFlixã€‚<br>Eurekaè´Ÿè´£ç®¡ç†ã€è®°å½•æœåŠ¡æä¾›è€…çš„ä¿¡æ¯ã€‚æœåŠ¡è°ƒåƒä¸‹å•ä¸€æ ·å§éœ€æ±‚å‘Šè¯‰Eurekaï¼ŒEurekaå°±ä¼šå‘Šè¯‰æ‰€éœ€æœåŠ¡ã€‚åŒæ—¶ï¼ŒæœåŠ¡æä¾›æ–¹ä¸Eurekaä¹‹é—´é€šè¿‡ â€œå¿ƒè·³â€ æœºåˆ¶è¿›è¡Œç›‘æ§ï¼Œå½“æŸä¸ªæœåŠ¡æä¾›æ–¹å‡ºç°é—®é¢˜ï¼ŒEurekaè‡ªç„¶ä¼šæŠŠå®ƒä»æœåŠ¡åˆ—è¡¨ä¸­å‰”é™¤ã€‚è¿™å°±å®ç°äº†æœåŠ¡çš„è‡ªåŠ¨æ³¨å†Œã€å‘ç°ã€çŠ¶æ€ç›‘æ§ã€‚</p>
<p>Eurekaï¼šå°±æ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼ˆå¯ä»¥æ˜¯ä¸€ä¸ªé›†ç¾¤ï¼‰ï¼Œå¯¹å¤–æš´éœ²è‡ªå·±çš„åœ°å€<br>æä¾›è€…ï¼šå¯åŠ¨åå‘Eurekaæ³¨å†Œè‡ªå·±ä¿¡æ¯ï¼ˆåœ°å€ï¼Œæä¾›ä»€ä¹ˆæœåŠ¡ï¼‰<br>æ¶ˆè´¹è€…ï¼šå‘Eurekaè®¢é˜…æœåŠ¡ï¼ŒEurekaä¼šå°†å¯¹åº”æœåŠ¡çš„æ‰€æœ‰æä¾›è€…åœ°å€åˆ—è¡¨å‘é€ç»™æ¶ˆè´¹è€…ï¼Œå¹¶ä¸”å®šæœŸæ›´æ–°<br>å¿ƒè·³(ç»­çº¦)ï¼šæä¾›è€…å®šæœŸé€šè¿‡httpæ–¹å¼å‘Eurekaåˆ·æ–°è‡ªå·±çš„çŠ¶æ€<br>1ï¼Œå¯åŠ¨å™¨ä¾èµ–<br>        <dependency><br>            <groupId>org.springframework.cloud</groupId><br>            <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId><br>        </dependency><br>2ï¼Œé…ç½®æ–‡ä»¶<br>server:<br>  port: 10086<br>spring:<br>  application:<br>    name: eureka-server<br>eureka:<br>  client:<br>    service-url:<br>      # eureka æœåŠ¡åœ°å€ï¼Œå¦‚æœæ˜¯é›†ç¾¤çš„è¯ï¼›éœ€è¦æŒ‡å®šå…¶å®ƒé›†ç¾¤eurekaåœ°å€<br>      defaultZone: <a target="_blank" rel="noopener" href="http://127.0.0.1:10086/eureka">http://127.0.0.1:10086/eureka</a><br>    # ä¸æ³¨å†Œè‡ªå·±ï¼Œé›†ç¾¤çš„è¯å°±æ³¨å†Œ<br>    register-with-eureka: false<br>    # ä¸æ‹‰å–æœåŠ¡<br>    fetch-registry: false<br>3ï¼ŒæœåŠ¡æ³¨å†Œä¸å‘ç°<br>æœåŠ¡æ³¨å†Œï¼šåœ¨æœåŠ¡æä¾›å·¥ç¨‹user-serviceä¸Šæ·»åŠ Eurekaå®¢æˆ·ç«¯ä¾èµ–ï¼›è‡ªåŠ¨å°†æœåŠ¡æ³¨å†Œåˆ°EurekaServeræœåŠ¡åœ°å€åˆ—è¡¨ã€‚<br>Providerå¯åŠ¨æ—¶ï¼Œä¼šæ£€æµ‹é…ç½®å±æ€§ä¸­çš„ï¼š eureka.client.register-with-erueka=true å‚æ•°æ˜¯å¦æ­£ç¡®ï¼Œé»˜è®¤trueã€‚ä¼šå‘EurekaServerå‘èµ·ä¸€ä¸ªRestè¯·æ±‚ï¼Œå¹¶æºå¸¦è‡ªå·±çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ŒEurekaServerä¼šæŠŠè¿™äº›ä¿¡æ¯ä¿å­˜åˆ°ä¸€ä¸ªåŒå±‚Mapç»“æ„ä¸­ã€‚<br>ç¬¬ä¸€å±‚Mapçš„Keyâ€”æœåŠ¡idï¼Œä¸€èˆ¬æ˜¯é…ç½®ä¸­çš„ spring.application.name å±æ€§<br>ç¬¬äºŒå±‚Mapçš„keyâ€”æœåŠ¡å®ä¾‹idã€‚ä¸€èˆ¬host+ serviceId + portï¼Œä¾‹å¦‚ï¼š localhost:user-service:8081<br>å€¼åˆ™æ˜¯æœåŠ¡çš„å®ä¾‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæœåŠ¡ï¼Œå¯ä»¥åŒæ—¶å¯åŠ¨å¤šä¸ªä¸åŒå®ä¾‹ï¼Œå½¢æˆé›†ç¾¤ã€‚<br>æœåŠ¡å‘ç°ï¼šåœ¨æœåŠ¡æ¶ˆè´¹å·¥ç¨‹consumer-demoä¸Šæ·»åŠ Eurekaå®¢æˆ·ç«¯ä¾èµ–ï¼›å¯ä»¥ä½¿ç”¨å·¥å…·ç±»æ ¹æ®æœåŠ¡åç§°è·å–å¯¹åº”çš„æœåŠ¡åœ°å€åˆ—è¡¨ã€‚<br>æ·»åŠ Eurekaå®¢æˆ·ç«¯ä¾èµ–<br>Â Â Â Â Â Â Â Â <dependency><br>Â Â Â Â Â Â Â Â Â Â Â Â <groupId>org.springframework.cloud</groupId><br>Â Â Â Â Â Â Â Â Â Â Â Â <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId><br>Â Â Â Â Â Â Â Â </dependency><br>æ·»åŠ å¯åŠ¨å¼•å¯¼ç±»æ³¨è§£<br>å¯åŠ¨ç±»åŠ å…¥@EnableDiscoveryClient æ³¨è§£<br>ä¿®æ”¹é…ç½®<br>spring:<br>Â Â application:<br>Â Â Â Â name:Â consumer-demoï¼ˆä¸¤ä¸ªæœåŠ¡çš„åå­—ï¼‰<br>eureka:<br>Â Â client:<br>Â Â Â Â service-url:<br>Â Â Â Â Â Â defaultZone:Â <a target="_blank" rel="noopener" href="http://127.0.0.1:10086/eureka%EF%BC%88Eureka%E4%B8%AD%E5%BF%83%E5%9C%B0%E5%9D%80%EF%BC%89">http://127.0.0.1:10086/eurekaï¼ˆEurekaä¸­å¿ƒåœ°å€ï¼‰</a><br>4ï¼ŒEurekaé«˜å¯ç”¨<br>eureka-server</p>
<p>eureka:<br>Â Â server:<br>Â Â Â Â #Â æœåŠ¡å¤±æ•ˆå‰”é™¤æ—¶é—´é—´éš”ï¼Œé»˜è®¤60ç§’<br>Â Â Â Â eviction-interval-timer-in-ms:Â 60000<br>Â Â Â Â #Â å…³é—­è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼ˆé»˜è®¤æ˜¯æ‰“å¼€çš„ï¼‰<br>Â Â Â Â enable-self-preservation:Â false<br>user-serviceÂ </p>
<p>eureka:<br>Â Â client:<br>Â Â Â Â service-url:<br>Â Â Â Â Â Â defaultZone:Â <a target="_blank" rel="noopener" href="http://127.0.0.1:10086/eureka">http://127.0.0.1:10086/eureka</a><br>Â Â instance:<br>Â Â Â Â #Â æ›´å€¾å‘ä½¿ç”¨ipåœ°å€ï¼Œè€Œä¸æ˜¯hostå<br>Â Â Â Â prefer-ip-address:Â true<br>Â Â Â Â #Â ipåœ°å€<br>Â Â Â Â ip-address:Â 127.0.0.1<br>Â Â Â Â #Â ç»­çº¦é—´éš”ï¼Œé»˜è®¤30ç§’<br>Â Â Â Â lease-renewal-interval-in-seconds:Â 5<br>Â Â Â Â #Â æœåŠ¡å¤±æ•ˆæ—¶é—´ï¼Œé»˜è®¤90ç§’<br>Â Â Â Â lease-expiration-duration-in-seconds:Â 5<br>consumer-demoÂ </p>
<p>eureka:<br>Â Â client:<br>Â Â Â Â service-url:<br>Â Â Â Â Â Â defaultZone:Â <a target="_blank" rel="noopener" href="http://127.0.0.1:10086/eureka">http://127.0.0.1:10086/eureka</a><br>Â Â Â Â #Â è·å–æœåŠ¡åœ°å€åˆ—è¡¨é—´éš”æ—¶é—´ï¼Œé»˜è®¤30ç§’<br>Â Â Â Â registry-fetch-interval-seconds:Â 10<br>5ï¼ŒEurekaå¤±æ•ˆå‰”é™¤ä»¥åŠè‡ªæˆ‘ä¿æŠ¤<br>é»˜è®¤æ³¨å†Œæ—¶ä½¿ç”¨çš„æ˜¯ä¸»æœºåæˆ–è€…localhostï¼Œå¦‚æœæƒ³ç”¨ipè¿›è¡Œæ³¨å†Œï¼Œå¯ä»¥åœ¨ user-service ä¸­æ·»åŠ é…ç½®å¦‚ä¸‹ï¼š<br>prefer-ip-address: true # æ›´å€¾å‘äºä½¿ç”¨ipï¼Œè€Œä¸æ˜¯hoståã€‚</p>
<p>æœåŠ¡ç»­çº¦<br>æ³¨å†ŒæœåŠ¡å®Œæˆä»¥åï¼Œæä¾›è€…ä¼šç»´æŒä¸€ä¸ªå¿ƒè·³ï¼ˆå®šæ—¶å‘EurekaServerå‘èµ·Restè¯·æ±‚ï¼‰ï¼Œå‘Šè¯‰EurekaServerï¼šâ€œæˆ‘è¿˜æ´»ç€â€ã€‚è¿™ä¸ªæˆ‘ä»¬ç§°ä¸ºæœåŠ¡çš„ç»­çº¦ï¼ˆrenewï¼‰ï¼›<br>lease-expiration-duration-in-seconds: 90 90ç§’æ²¡æŠ¥å‘Šï¼Œä¸­å¿ƒå¯èƒ½ä¼šåˆ¤å®šæœåŠ¡æ­»äº†ã€‚ğŸ˜provider<br>lease-renewal-interval-in-seconds: 30 é—´éš”30ç§’æŠ¥å‘Šè‡ªå·±è¿˜æ´»ç€ã€‚ğŸ™‚provider<br>eureka.server.eviction-interval-timer-in-msï¼š ä¸­å¿ƒå®šæ—¶ç§»é™¤å·²ç»æŒ‚äº†çš„æä¾›è€…ã€‚ğŸ˜­serverâ€”-å¤±æ•ˆå‰”é™¤<br>registry-fetch-interval-seconds: 30 æœåŠ¡æ¶ˆè´¹è€…æ¯éš”30ç§’æ‹‰å–ä¸­å¿ƒå½“å‰æœåŠ¡åˆ—è¡¨ã€‚ğŸ¤” consumer</p>
<p>è‡ªæˆ‘ä¿æŠ¤<br>æˆ‘ä»¬å…³åœä¸€ä¸ªæœåŠ¡ï¼Œå¾ˆå¯èƒ½ä¼šåœ¨Eurekaé¢æ¿è­¦å‘Šï¼Œè§¦å‘äº†Eurekaçš„è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ã€‚<br>å½“æœåŠ¡æœªæŒ‰æ—¶è¿›è¡Œå¿ƒè·³ç»­çº¦æ—¶ï¼ŒEurekaä¼šç»Ÿè®¡æœåŠ¡å®ä¾‹æœ€è¿‘15åˆ†é’Ÿå¿ƒè·³ç»­çº¦çš„æ¯”ä¾‹æ˜¯å¦ä½äºäº†85%ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œå› ä¸ºç½‘ç»œå»¶è¿Ÿç­‰åŸå› ï¼Œå¿ƒè·³å¤±è´¥å®ä¾‹çš„æ¯”ä¾‹å¾ˆæœ‰å¯èƒ½è¶…æ ‡ï¼Œä½†æ˜¯æ­¤æ—¶å°±æŠŠæœåŠ¡å‰”é™¤åˆ—è¡¨å¹¶ä¸å¦¥å½“ï¼Œå› ä¸ºæœåŠ¡å¯èƒ½æ²¡æœ‰å®•æœºã€‚Eurekaåœ¨è¿™æ®µæ—¶é—´å†…ä¸ä¼šå‰”é™¤ä»»ä½•æœåŠ¡å®ä¾‹ï¼Œç›´åˆ°ç½‘ç»œæ¢å¤æ­£å¸¸ã€‚ç”Ÿäº§ç¯å¢ƒä¸‹è¿™å¾ˆæœ‰æ•ˆï¼Œä¿è¯äº†å¤§å¤šæ•°æœåŠ¡ä¾ç„¶å¯ç”¨ï¼Œä¸è¿‡ä¹Ÿæœ‰å¯èƒ½è·å–åˆ°å¤±è´¥çš„æœåŠ¡å®ä¾‹ï¼Œå› æ­¤æœåŠ¡è°ƒç”¨è€…å¿…é¡»åšå¥½æœåŠ¡çš„å¤±è´¥å®¹é”™ã€‚<br>å¯ä»¥é€šè¿‡ä¸‹é¢çš„é…ç½®æ¥å…³åœè‡ªæˆ‘ä¿æŠ¤ï¼š</p>
<p>enable-self-preservation: false # å…³é—­è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ï¼ˆé»˜è®¤æ‰“å¼€ï¼‰</p>
<h2 id="2ã€Ribbonè´Ÿè½½å‡è¡¡"><a href="#2ã€Ribbonè´Ÿè½½å‡è¡¡" class="headerlink" title="2ã€Ribbonè´Ÿè½½å‡è¡¡"></a>2ã€Ribbonè´Ÿè½½å‡è¡¡</h2><p>åŒå±Netflixï¼Œä½¿ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œä¾‹å¦‚è½®è¯¢ã€éšæœºæˆ–è€…è‡ªå®šä¹‰ç­‰ç®—æ³•,è‡ªåŠ¨å¸®æ¶ˆè´¹è€…åœ¨æœåŠ¡åˆ—è¡¨é€‰æ‹©æœåŠ¡ã€‚é»˜è®¤è½®è¯¢ç­–ç•¥ã€‚åœ¨å®ä¾‹åŒ–RestTemplateçš„æ—¶å€™ä½¿ç”¨@LoadBalancedï¼ŒæœåŠ¡åœ°å€ç›´æ¥å¯ä»¥ä½¿ç”¨æœåŠ¡åã€‚</p>
<p>è´Ÿè½½å‡è¡¡å™¨æœ‰ä¸‰å¤§ç»„ä»¶ï¼š<br>1.è´Ÿè½½è§„åˆ™ ,ä»æœåŠ¡å™¨åˆ—è¡¨ä¸­å†³å®šç”¨å“ªä¸ªæœåŠ¡å™¨<br>2.pingä»»åŠ¡,åå°è¿è¡Œçš„ä»»åŠ¡ï¼Œç”¨æ¥éªŒè¯æœåŠ¡å™¨æ˜¯å¦å¯ç”¨<br>3.æœåŠ¡å™¨åˆ—è¡¨,å¯ä»¥æ˜¯é™æ€ä¹Ÿå¯ä»¥æ˜¯åŠ¨æ€ï¼Œå¦‚æœæ˜¯åŠ¨æ€ï¼Œé‚£ä¹ˆå°±è¦æœ‰ä¸€ä¸ªåå°çº¿ç¨‹å®šæ—¶å»åˆ·æ–°å’Œè¿‡æ»¤åˆ—è¡¨ã€‚</p>
<p>å‡è¡¡ç­–ç•¥ï¼š</p>
<pre><code>@Bean
public IRule ribbonRule() &#123;
    return new RetryRule(new BestAvailableRule());//è¿™é‡Œé…ç½®ç­–ç•¥ï¼Œå’Œé…ç½®æ–‡ä»¶å¯¹åº”
&#125;</code></pre>
<p>RoundRobinRuleï¼šè½®è¯¢ã€‚é»˜è®¤è¶…è¿‡10æ¬¡è·å–åˆ°çš„serveréƒ½ä¸å¯ç”¨ï¼Œä¼šè¿”å›ä¸€ä¸ªç©ºçš„server<br>RandomRuleï¼šéšæœºï¼Œå¦‚æœéšæœºåˆ°çš„serverä¸ºnullæˆ–è€…ä¸å¯ç”¨çš„è¯ï¼Œä¼šwhileä¸åœçš„å¾ªç¯é€‰å–<br>RetryRuleï¼šä¸€å®šæ—¶é™å†…å¾ªç¯é‡è¯•ã€‚é»˜è®¤ç»§æ‰¿RoundRobinRuleï¼Œä¹Ÿæ”¯æŒè‡ªå®šä¹‰æ³¨å…¥ï¼ŒRetryRuleä¼šåœ¨æ¯æ¬¡é€‰å–ä¹‹åï¼Œå¯¹é€‰ä¸¾çš„serverè¿›è¡Œåˆ¤æ–­ï¼Œæ˜¯å¦ä¸ºnullï¼Œæ˜¯å¦aliveï¼Œå¹¶ä¸”åœ¨500mså†…ä¼šä¸åœçš„é€‰å–åˆ¤æ–­ã€‚è€ŒRoundRobinRuleå¤±æ•ˆçš„ç­–ç•¥æ˜¯è¶…è¿‡10æ¬¡ï¼ŒRandomRuleæ˜¯æ²¡æœ‰å¤±æ•ˆæ—¶é—´çš„æ¦‚å¿µï¼Œåªè¦serverListæ²¡éƒ½æŒ‚ã€‚<br>BestAvailableRuleï¼šæœ€å°è¿æ¥æ•°ã€‚éå†serverListï¼Œé€‰å–å‡ºå¯ç”¨çš„ä¸”è¿æ¥æ•°æœ€å°çš„ä¸€ä¸ªserverã€‚è¯¥ç®—æ³•é‡Œé¢æœ‰ä¸€ä¸ªLoadBalancerStatsçš„æˆå‘˜å˜é‡ï¼Œä¼šå­˜å‚¨æ‰€æœ‰serverçš„è¿è¡ŒçŠ¶å†µå’Œè¿æ¥æ•°ã€‚å¦‚æœé€‰å–åˆ°çš„serverä¸ºnullï¼Œé‚£ä¹ˆä¼šè°ƒç”¨RoundRobinRuleé‡æ–°é€‰å–ã€‚<br>WeightedResponseTimeRuleï¼šæœ€å°å“åº”æ—¶é—´ã€‚è¿™ä¸ªç­–ç•¥æ•´åˆäº†éšæœºç®—æ³•å’Œå“åº”æ—¶é—´åŠ æƒç®—æ³•ã€‚ä¼šå¼€å¯å®šæ—¶ä»»åŠ¡ï¼Œæ¯30ç§’è®¡ç®—ä¸€æ¬¡æ‰€æœ‰Providerçš„å“åº”æ—¶é—´ï¼Œä»¥å“åº”æ—¶é—´ä½œä¸ºæƒé‡ï¼Œå“åº”æ—¶é—´è¶ŠçŸ­çš„æœåŠ¡å™¨è¢«é€‰ä¸­çš„æ¦‚ç‡è¶Šå¤§ã€‚<br>æ¯”å¦‚Node1:node2:node3çš„å¹³å‡å“åº”æ—¶é—´ä¸º100msï¼š200ms:300msï¼Œé‚£ä¹ˆnodesçš„çš„æƒé‡å€¼æ˜¯300:500:600ï¼Œæ¯æ¬¡ä»¥600ä¸ºåŸºç¡€*éšæœºå€¼ï¼Œé‚£ä¹ˆè½åœ¨ 0â€“300çš„æ¦‚ç‡ä¸º50%ï¼Œ300â€“500çš„æ¦‚ç‡33%ï¼Œ100â€“600çš„æ¦‚ç‡ä¸º17%ï¼Œä¹Ÿå°±æ˜¯å¹³å‡å“åº”æ—¶é—´è¶ŠçŸ­çš„èŠ‚ç‚¹ï¼Œè¢«é€‰ä¸­çš„æ¦‚ç‡è¶Šå¤§<br>    double totalResponseTime = 0;<br>    //éå†è·å–æ‰€æœ‰èŠ‚ç‚¹çš„æ€»çš„å¹³å‡å“åº”æ—¶é—´<br>    for (Server server : nlb.getAllServers()) {<br>        ServerStats ss = stats.getSingleServerStat(server);<br>        totalResponseTime += ss.getResponseTimeAvg();<br>    }<br>    Double weightSoFar = 0.0;<br>    //ç„¶åä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹è®¾ç½®è‡ªå¢çš„weightSoFarï¼Œæ¯ä¸ªç»“ç‚¹çš„æƒé‡å€¼weightä¸ºæ€»å“åº”æ—¶é—´-è‡ªå·±çš„ç›¸åº”æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œnodeçš„å“åº”æ—¶é—´è¶ŠçŸ­ï¼Œweightçš„å€¼å°±è¶Šå¤§ï¼Œå°±è¶Šæœ‰å¯èƒ½è¢«éšæœºæ•°å‘½ä¸­<br>    List<Double> finalWeights = new ArrayList<Double>();<br>    for (Server server : nlb.getAllServers()) {<br>        ServerStats ss = stats.getSingleServerStat(server);<br>        double weight = totalResponseTime - ss.getResponseTimeAvg();<br>        weightSoFar += weight;<br>        finalWeights.add(weightSoFar);<br>    }<br>    setWeights(finalWeights);</p>
<h2 id="3ã€hystrixæœåŠ¡ç†”æ–­"><a href="#3ã€hystrixæœåŠ¡ç†”æ–­" class="headerlink" title="3ã€hystrixæœåŠ¡ç†”æ–­"></a>3ã€hystrixæœåŠ¡ç†”æ–­</h2><p>æµ·æ€é”¤ç§‘æ–¯â€”å“ˆå“ˆï¼ŒåŒå±Netglixã€‚Hystrixæ˜¯ä¸€ä¸ªå»¶è¿Ÿå’Œå®¹é”™åº“ï¼Œç”¨äºéš”ç¦»è®¿é—®è¿œç¨‹æœåŠ¡ï¼Œé˜²æ­¢å‡ºç°çº§è”å¤±è´¥ã€‚</p>
<p>Hystrixè§£å†³é›ªå´©é—®é¢˜çš„æ‰‹æ®µä¸»è¦æ˜¯</p>
<p>1.æœåŠ¡é™çº§:å°±æ˜¯åœ¨é›ªå´©æƒ…å†µä¸‹,é˜²æ­¢ç”¨æˆ·ä¸€ç›´ç­‰å¾…,ä½¿ç”¨æœåŠ¡é™çº§æ–¹å¼(è¿”å›ä¸€ä¸ªå‹å¥½çš„æç¤ºç»™å®¢æˆ·ç«¯,ä¸ä¼šå»å¤„ç†è¯·æ±‚,è°ƒç”¨fallBackæœ¬åœ°æ–¹æ³•),ç›®çš„æ˜¯ä¸ºäº†å®¢æˆ·çš„ä½“éªŒ.<br>2.æœåŠ¡ç†”æ–­:æœåŠ¡ç†”æ–­æ˜¯ä¸ºäº†ä¿æŠ¤æœåŠ¡,å‡è®¾æœåŠ¡æœ€é«˜å¹¶å‘10000,è®¾ç½®9000å¹¶å‘ï¼Œè¶…è¿‡å°±å¼€å¯ä¿æŠ¤æœºåˆ¶,ä½¿ç”¨æœåŠ¡é™çº§æ”¹å–„ä½“éªŒ,æœåŠ¡é™çº§å’ŒæœåŠ¡ç†”æ–­æ˜¯ä¸€èµ·ä½¿ç”¨çš„.<br>3.æœåŠ¡éš”ç¦»:éš”ç¦»åˆ†ä¸ºçº¿ç¨‹æ± éš”ç¦»å’Œä¿¡å·é‡éš”ç¦»çº¿ç¨‹æ± éš”ç¦»å°±æ˜¯åœ¨é‡è¦çš„å‡ ä¸ªæ¥å£ä¸Šéƒ½é…ç½®ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹æ± ,å®ƒä»¬ä¹‹é—´äº’ä¸å½±å“,ä»è€Œç¼“è§£é›ªå´©æ•ˆåº”.</p>
<p>æœåŠ¡éš”ç¦»ï¼šç”¨æˆ·è¯·æ±‚ä¸ç›´æ¥è®¿é—®æœåŠ¡ï¼Œè€Œæ˜¯ä½¿ç”¨çº¿ç¨‹æ± ä¸­ç©ºé—²çš„çº¿ç¨‹è®¿é—®æœåŠ¡ï¼ŒåŠ é€Ÿå¤±è´¥åˆ¤æ–­æ—¶é—´ã€‚<br>æœåŠ¡é™çº§å’Œç†”æ–­ï¼šåŠæ—¶è¿”å›æœåŠ¡è°ƒç”¨å¤±è´¥çš„ç»“æœï¼Œè®©çº¿ç¨‹ä¸å› ä¸ºç­‰å¾…æœåŠ¡è€Œé˜»å¡ã€‚çº¿ç¨‹æ± æ»¡æˆ–è€…è¯·æ±‚è¶…æ—¶â€”è§¦å‘ã€‚</p>
<p>1ï¼Œæ·»åŠ ä¾èµ–</p>
<p>Â Â Â Â Â Â Â Â <dependency></p>
<p>Â Â Â Â Â Â Â Â Â Â Â Â <groupId>org.springframework.cloud</groupId></p>
<p>Â Â Â Â Â Â Â Â Â Â Â Â <artifactId>spring-cloud-starter-netflix-hystrix</artifactId></p>
<p>Â Â Â Â Â Â Â Â </dependency></p>
<p>2ï¼Œå¼€å¯ç†”æ–­</p>
<p>åœ¨å¯åŠ¨ç±» ConsumerApplication ä¸Šæ·»åŠ æ³¨è§£ï¼š@EnableCircuitBreaker<br>è‡³æ­¤ï¼Œ@SpringBootApplication+@EnableDiscoveryClient+@EnableCirciuitBreaker<br>ç»å¸¸å¼•å…¥è¿™ä¸‰ä¸ªæ³¨è§£ï¼ŒSpringæä¾›äº†@SpringCloudApplicationçš„ç»„åˆæ³¨è§£ä»£æ›¿ã€‚</p>
<p>-3ï¼Œé™çº§é€»è¾‘</p>
<p>@RestController<br>@RequestMapping(â€œ/consumerâ€)<br>@Slf4j<br>@DefaultProperties(defaultFallbackÂ =Â â€œdefaultFallbackâ€)</p>
<p>publicÂ classÂ ConsumerControllerÂ {<br>Â Â Â Â @Autowired<br>Â   Â privateÂ RestTemplateÂ restTemplate;<br>Â Â Â Â @Autowired<br>Â Â Â Â privateÂ DiscoveryClientÂ discoveryClient;</p>
<p>Â Â Â Â @GetMapping(â€œ/{id}â€)</p>
<p>Â Â Â Â //@HystrixCommand(fallbackMethodÂ =Â â€œqueryByIdFallbackâ€)<br>Â Â Â Â @HystrixCommand</p>
<p>Â Â Â Â publicÂ StringÂ queryById(@PathVariableÂ LongÂ id){<br>Â Â Â Â Â Â Â Â /<em>StringÂ urlÂ =Â â€œ<a target="_blank" rel="noopener" href="http://localhost:9091/user/&quot;+id">http://localhost:9091/user/&quot;+id</a>;<br>Â Â Â Â Â Â <br>Â Â Â Â Â Â Â Â //è·å–eurekaä¸­æ³¨å†Œçš„user-serviceçš„å®ä¾‹<br>Â Â Â Â Â Â Â Â List<ServiceInstance>Â serviceInstancesÂ =Â discoveryClient.getInstances(â€œuser-serviceâ€);<br>Â Â Â Â Â Â Â Â ServiceInstanceÂ serviceInstanceÂ =Â serviceInstances.get(0);<br>Â Â Â Â Â Â Â Â urlÂ =Â â€œhttp://â€œÂ +Â serviceInstance.getHost()Â +Â â€œ:â€Â +Â serviceInstance.getPort()Â +Â â€œ/user/â€œÂ +Â id;</em>/</p>
<p>Â Â Â Â Â Â Â Â StringÂ urlÂ =Â â€œ<a target="_blank" rel="noopener" href="http://user-service/user/&quot;">http://user-service/user/&quot;</a>Â +Â id;<br>Â Â Â Â Â Â Â Â returnÂ restTemplate.getForObject(url,Â String.class);<br>Â Â Â Â }</p>
<p>Â Â Â Â publicÂ StringÂ queryByIdFallback(LongÂ id){<br>Â Â Â Â Â Â Â Â log.error(â€œæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯å¤±è´¥ã€‚idï¼š{}â€,Â id);<br>Â Â Â Â Â Â Â Â returnÂ â€œå¯¹ä¸èµ·ï¼Œç½‘ç»œå¤ªæ‹¥æŒ¤äº†ï¼â€;<br>Â Â Â Â }</p>
<p>Â Â Â Â publicÂ StringÂ defaultFallback(){<br>Â Â Â Â Â Â Â Â returnÂ â€œé»˜è®¤æç¤ºï¼šå¯¹ä¸èµ·ï¼Œç½‘ç»œå¤ªæ‹¥æŒ¤äº†ï¼â€;<br>Â Â Â Â }</p>
<p>}<br>4ï¼Œä¿®æ”¹è¶…æ—¶é…ç½®</p>
<p>hystrix:<br>Â Â command:<br>Â Â Â Â default:<br>Â Â Â Â Â Â execution:<br>Â Â Â Â Â Â Â Â isolation:<br>Â Â Â Â Â Â Â Â Â Â thread:<br>Â Â Â Â Â Â Â Â Â Â Â Â timeoutInMilliseconds:Â 2000<br>Hystrixçš„æœåŠ¡ç†”æ–­æœºåˆ¶ï¼Œå¯ä»¥å®ç°å¼¹æ€§å®¹é”™ï¼›å½“æœåŠ¡è¯·æ±‚æƒ…å†µå¥½è½¬ä¹‹åï¼Œå¯ä»¥è‡ªåŠ¨é‡è¿ã€‚é€šè¿‡æ–­è·¯çš„æ–¹å¼ï¼Œå°†åç»­è¯·æ±‚ç›´æ¥æ‹’ç»ï¼Œä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤5ç§’ï¼‰ä¹‹åå…è®¸éƒ¨åˆ†è¯·æ±‚é€šè¿‡ï¼Œå¦‚æœè°ƒç”¨æˆåŠŸåˆ™å›åˆ°æ–­è·¯å™¨å…³é—­çŠ¶æ€ï¼Œå¦åˆ™ç»§ç»­æ‰“å¼€ï¼Œæ‹’ç»è¯·æ±‚çš„æœåŠ¡ã€‚</p>
<h1 id="é…ç½®ä¿®æ”¹ç†”æ–­ç­–ç•¥ï¼š"><a href="#é…ç½®ä¿®æ”¹ç†”æ–­ç­–ç•¥ï¼š" class="headerlink" title="é…ç½®ä¿®æ”¹ç†”æ–­ç­–ç•¥ï¼š"></a>é…ç½®ä¿®æ”¹ç†”æ–­ç­–ç•¥ï¼š</h1><p>hystrix:<br>command:<br>Â default:<br>Â Â circuitBreaker:<br>Â Â Â errorThresholdPercentage: 50 # è§¦å‘ç†”æ–­é”™è¯¯æ¯”ä¾‹é˜ˆå€¼ï¼Œé»˜è®¤å€¼50%<br>Â Â Â sleepWindowInMilliseconds: 10000 # ç†”æ–­åä¼‘çœ æ—¶é•¿ï¼Œé»˜è®¤å€¼5ç§’<br>Â Â Â requestVolumeThreshold: 10 # ç†”æ–­è§¦å‘æœ€å°è¯·æ±‚æ¬¡æ•°ï¼Œé»˜è®¤å€¼æ˜¯20<br>Â Â execution:<br>Â Â Â isolation:<br>Â Â Â Â thread:<br>Â Â Â Â Â timeoutInMilliseconds: 2000 # ç†”æ–­è¶…æ—¶è®¾ç½®ï¼Œé»˜è®¤ä¸º1ç§’</p>
<h2 id="4ï¼ŒFeignä¼ªè£…è¯·æ±‚"><a href="#4ï¼ŒFeignä¼ªè£…è¯·æ±‚" class="headerlink" title="4ï¼ŒFeignä¼ªè£…è¯·æ±‚"></a>4ï¼ŒFeignä¼ªè£…è¯·æ±‚</h2><p>feignæ˜¯å£°æ˜å¼çš„web serviceå®¢æˆ·ç«¯ï¼Œå®ƒè®©å¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨å˜å¾—æ›´ç®€å•äº†ï¼Œç±»ä¼¼controllerè°ƒç”¨serviceã€‚Spring Cloudé›†æˆäº†Ribbonå’ŒEurekaï¼Œå¯åœ¨ä½¿ç”¨Feignæ—¶æä¾›è´Ÿè½½å‡è¡¡çš„httpå®¢æˆ·ç«¯ã€‚</p>
<p>FeignåŸç†ç®€è¿°</p>
<p>å¯åŠ¨æ—¶ï¼Œç¨‹åºä¼šè¿›è¡ŒåŒ…æ‰«æï¼Œæ‰«ææ‰€æœ‰åŒ…ä¸‹æ‰€æœ‰@FeignClientæ³¨è§£çš„ç±»ï¼Œå¹¶å°†è¿™äº›ç±»æ³¨å…¥åˆ°springçš„IOCå®¹å™¨ä¸­ã€‚å½“å®šä¹‰çš„Feignä¸­çš„æ¥å£è¢«è°ƒç”¨æ—¶ï¼Œé€šè¿‡JDKçš„åŠ¨æ€ä»£ç†æ¥ç”ŸæˆRequestTemplateã€‚<br>RequestTemplateä¸­åŒ…å«è¯·æ±‚çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå¦‚è¯·æ±‚å‚æ•°ï¼Œè¯·æ±‚URLç­‰ã€‚<br>RequestTemplateå£°åœºRequestï¼Œç„¶åå°†Requestäº¤ç»™clientå¤„ç†ï¼Œè¿™ä¸ªclienté»˜è®¤æ˜¯JDKçš„HTTPUrlConnectionï¼Œä¹Ÿå¯ä»¥æ˜¯OKhttpã€Apacheçš„HTTPClientç­‰ã€‚<br>æœ€åclientå°è£…æˆLoadBaLanceClientï¼Œç»“åˆribbonè´Ÿè½½å‡è¡¡åœ°å‘èµ·è°ƒç”¨ã€‚<br>1ï¼Œå¼•å…¥Feign</p>
<p>å¼•å…¥ä¾èµ–åè¿›è¡Œyamlé…ç½®ï¼š</p>
<p>server:<br>  port: 8082</p>
<p>#é…ç½®eureka<br>eureka:<br>  client:<br>    service-url:<br>      defaultZone: <a target="_blank" rel="noopener" href="http://localhost:8761/eureka">http://localhost:8761/eureka</a><br>  instance:<br>    status-page-url-path: /info<br>    health-check-url-path: /health</p>
<p>#æœåŠ¡åç§°<br>spring:<br>  application:<br>    name: product<br>  profiles:<br>    active: ${boot.profile:dev}<br>#feignçš„é…ç½®ï¼Œè¿æ¥è¶…æ—¶åŠè¯»å–è¶…æ—¶é…ç½®<br>feign:<br>  client:<br>    config:<br>      default:<br>        connectTimeout: 5000<br>        readTimeout: 5000<br>        loggerLevel: basic<br>2ï¼ŒFeignçš„ä½¿ç”¨</p>
<p>@FeignClient(value = â€œCARTâ€)<br>public interface CartFeignClient {</p>
<pre><code>@PostMapping(&quot;/cart/&#123;productId&#125;&quot;)
Long addCart(@PathVariable(&quot;productId&quot;)Long productId);</code></pre>
<p>}<br>ä¸Šé¢æ˜¯æœ€ç®€å•çš„feign clientçš„ä½¿ç”¨ï¼Œå£°æ˜å®Œä¸ºfeign clientåï¼Œå…¶ä»–springç®¡ç†çš„ç±»ï¼Œå¦‚serviceå°±å¯ä»¥ç›´æ¥æ³¨å…¥ä½¿ç”¨äº†ï¼Œä¾‹å¦‚ï¼š</p>
<p>//è¿™é‡Œç›´æ¥æ³¨å…¥feign client<br>@Autowired<br>private CartFeignClient cartFeignClient;</p>
<p>@PostMapping(â€œ/toCart/{productId}â€)<br>public ResponseEntity addCart(@PathVariable(â€œproductIdâ€) Long productId){<br>    Long result = cartFeignClient.addCart(productId);<br>    return ResponseEntity.ok(result);<br>}<br>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨feignä¹‹åï¼Œæˆ‘ä»¬è°ƒç”¨eureka æ³¨å†Œçš„å…¶ä»–æœåŠ¡ï¼Œåœ¨ä»£ç ä¸­å°±åƒå„ä¸ªserviceä¹‹é—´ç›¸äº’è°ƒç”¨é‚£ä¹ˆç®€å•ã€‚</p>
<p>FeignClientæ³¨è§£çš„ä¸€äº›å±æ€§</p>
<p>å±æ€§å    é»˜è®¤å€¼    ä½œç”¨    å¤‡æ³¨<br>value    ç©ºå­—ç¬¦ä¸²    è°ƒç”¨æœåŠ¡åç§°ï¼Œå’Œnameå±æ€§ç›¸åŒ<br>serviceId    ç©ºå­—ç¬¦ä¸²    æœåŠ¡idï¼Œä½œç”¨å’Œnameå±æ€§ç›¸åŒ    å·²è¿‡æœŸ<br>name    ç©ºå­—ç¬¦ä¸²    è°ƒç”¨æœåŠ¡åç§°ï¼Œå’Œvalueå±æ€§ç›¸åŒ<br>url    ç©ºå­—ç¬¦ä¸²    å…¨è·¯å¾„åœ°å€æˆ–hostnameï¼Œhttpæˆ–httpså¯é€‰<br>decode404    false    é…ç½®å“åº”çŠ¶æ€ç ä¸º404æ—¶æ˜¯å¦åº”è¯¥æŠ›å‡ºFeignExceptions<br>configuration    {}    è‡ªå®šä¹‰å½“å‰feign clientçš„ä¸€äº›é…ç½®    å‚è€ƒFeignClientsConfiguration<br>fallback    void.class    ç†”æ–­æœºåˆ¶ï¼Œè°ƒç”¨å¤±è´¥æ—¶ï¼Œèµ°çš„ä¸€äº›å›é€€æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥æŠ›å‡ºå¼‚å¸¸æˆ–ç»™å‡ºé»˜è®¤è¿”å›æ•°æ®ã€‚    åº•å±‚ä¾èµ–hystrixï¼Œå¯åŠ¨ç±»è¦åŠ ä¸Š@EnableHystrix<br>path    ç©ºå­—ç¬¦ä¸²    è‡ªåŠ¨ç»™æ‰€æœ‰æ–¹æ³•çš„requestMappingå‰åŠ ä¸Šå‰ç¼€ï¼Œç±»ä¼¼ä¸controllerç±»ä¸Šçš„requestMapping<br>primary    true    </p>
<p>æ­¤å¤–ï¼Œè¿˜æœ‰qualifieråŠfallbackFactoryï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚</p>
<p>Feignè‡ªå®šä¹‰å¤„ç†è¿”å›çš„å¼‚å¸¸</p>
<p>è¿™é‡Œè´´ä¸ŠGitHubä¸ŠopenFeignçš„wikiç»™å‡ºçš„è‡ªå®šä¹‰errorDecoderä¾‹å­ã€‚</p>
<p>public class StashErrorDecoder implements ErrorDecoder {</p>
<pre><code>@Override
public Exception decode(String methodKey, Response response) &#123;
    if (response.status() &gt;= 400 &amp;&amp; response.status() &lt;= 499) &#123;
        //è¿™é‡Œæ˜¯ç»™å‡ºçš„è‡ªå®šä¹‰å¼‚å¸¸
        return new StashClientException(
                response.status(),
                response.reason()
        );
    &#125;
    if (response.status() &gt;= 500 &amp;&amp; response.status() &lt;= 599) &#123;
        //è¿™é‡Œæ˜¯ç»™å‡ºçš„è‡ªå®šä¹‰å¼‚å¸¸
        return new StashServerException(
                response.status(),
                response.reason()
        );
    &#125;
    //è¿™é‡Œæ˜¯å…¶ä»–çŠ¶æ€ç å¤„ç†æ–¹æ³•
    return errorStatus(methodKey, response);
&#125;</code></pre>
<p>}<br>è‡ªå®šä¹‰å¥½å¼‚å¸¸å¤„ç†ç±»åï¼Œè¦åœ¨@Configurationä¿®é¥°çš„é…ç½®ç±»ä¸­å£°æ˜æ­¤ç±»ã€‚</p>
<p>Feignä½¿ç”¨OKhttpå‘é€request</p>
<p>Feignåº•å±‚é»˜è®¤æ˜¯ä½¿ç”¨jdkä¸­çš„HttpURLConnectionå‘é€HTTPè¯·æ±‚ï¼Œfeignä¹Ÿæä¾›äº†OKhttpæ¥å‘é€è¯·æ±‚ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š</p>
<p>feign:<br>  client:<br>    config:<br>      default:<br>        connectTimeout: 5000<br>        readTimeout: 5000<br>        loggerLevel: basic<br>  okhttp:<br>    enabled: true<br>  hystrix:<br>    enabled: true<br>Dubboå­¦ä¹ <br>Dubboæ¦‚è¿°<br>Dubboæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ï¼Œè‡´åŠ›äºæä¾›é«˜æ€§èƒ½å’Œé€æ˜åŒ–çš„RPCè¿œç¨‹æœåŠ¡è°ƒç”¨æ–¹æ¡ˆï¼Œä»¥åŠSOAæœåŠ¡æ²»ç†æ–¹æ¡ˆã€‚<br>é˜¿é‡Œ11å¹´giuhubâ€“14å¹´dubbo2.4â€“å½“å½“dubboxã€ç½‘æ˜“dubbokâ€”17å¹´SpringCloudå‡ºç°â€”é˜¿é‡Œ18å¹´æŠŠdubboxå’Œdubboåˆå¹¶dubbo2.6<br>2018.02.15 é˜¿é‡ŒæŠŠDubboå¼€æºç»™äº†Apacheï¼›<br>2011å¹´ï¼Œé˜¿é‡Œå®£å¸ƒå¼€æºSOAæœåŠ¡åŒ–æ²»ç†æ–¹æ¡ˆæ ¸å¿ƒæ¡†æ¶â€”Dubbo2.0.7ï¼›<br>2014å¹´ï¼Œå½“å½“ç½‘Forkä¸€ä¸ªåˆ†æ”¯ï¼Œæ”¯æŒHttpReståè®®ï¼Œå‘½å-Dubbox2.8.0ï¼›<br>2014å¹´10æœˆï¼Œé˜¿é‡Œå‘å¸ƒ2.3.11ã€‚åæ¥å°±æœ‰äº†SpringCloudï¼›<br>2017å¹´9æœˆï¼Œé˜¿é‡Œé‡å¯Dubboï¼Œå‘å¸ƒ2.5.4ã€2.5.5ï¼›<br>2018å¹´2æœˆï¼Œæèµ ApacheåŸºé‡‘ä¼šï¼Œç¤¾åŒºç”Ÿæ€å®Œå–„ï¼›7æœˆå®˜ç½‘Dubbo.apache.orgï¼Œæ–°logo</p>
<p>Â registeræ³¨å†ŒÂ  Â  Â  Â subscribeè®¢é˜…Â  Â  Â  Â Â  Â  notifyé€šçŸ¥Â  Â  Â  Â  Â  Â  Â invokeè°ƒç”¨Â  Â  Â  Â Â  Â  Â  Â  countç»Ÿè®¡</p>
<p>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â </p>
<p>æ³¨å†Œä¸­å¿ƒRegisterÂ     æ¨èZookeeperï¼ˆä¿®æ”¹zoo.cfgï¼‰ï¼Œæ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…<br>æœåŠ¡æä¾›è€…Provider<br>æš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹ï¼ŒæœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚</p>
<p>æœåŠ¡æ¶ˆè´¹è€…Consumer    è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹ï¼ŒæœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ï¼ŒæœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚<br>å®¹å™¨Container    æœåŠ¡è¿è¡Œå®¹å™¨<br>ç›‘æ§ä¸­å¿ƒMonitor<br>ç›‘æ§ä¸­å¿ƒdubbo-monitor-simple è´Ÿè´£ç»Ÿè®¡å„æœåŠ¡è°ƒç”¨æ¬¡æ•°ï¼Œè°ƒç”¨æ—¶é—´ç­‰ï¼Œç»Ÿè®¡å…ˆåœ¨å†…å­˜æ±‡æ€»åï¼Œæ¯åˆ†é’Ÿä¸€æ¬¡å‘é€åˆ°ç›‘æ§ä¸­å¿ƒæœåŠ¡å™¨ï¼Œå¹¶ä»¥æŠ¥è¡¨å±•ç¤ºæ€»ç»“ï¼Œä¸ºæœåŠ¡çš„è¿ç»´é‡‡é›†æ•°æ®ã€‚<br>å¯è§†åŒ–åå° dubbo-adminï¼ŒjaråŒ…å½¢å¼è¿è¡Œï¼ˆ2.5ä¹‹å‰waråŒ…ï¼‰ã€‚</p>
<p>äºŒè€…éƒ½æ˜¯é’ˆå¯¹ç‰¹å®šçš„æ³¨å†Œä¸­å¿ƒè¿›è¡Œç›‘æ§ï¼Œå› æ­¤éœ€è¦é…ç½®å¯¹åº”çš„æ³¨å†Œä¸­å¿ƒçš„åœ°å€ï¼Œdubbo.propertiesæˆ–applications.propertiesã€‚</p>
<p>Dubboé…ç½®æ­¥éª¤<br>æœåŠ¡æä¾›è€…æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼ˆæš´éœ²æœåŠ¡ï¼‰<br>1ã€å¼•å…¥dubbo<br>        <dependency><br>            <groupId>com.alibaba</groupId><br>            <artifactId>dubbo</artifactId><br>            <version>2.6.2</version><br>        </dependency><br>//ç”±äºæˆ‘ä»¬ä½¿ç”¨zookeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼Œæ‰€ä»¥éœ€è¦æ“ä½œzookeeperdubbo<br>2.6å‰å¼•å…¥zkclient,dubbo 2.6åcuratoræ“ä½œzookeeper;2é€‰1å³å¯â€“&gt;<br>        <dependency><br>            <groupId>com.101tec</groupId><br>            <artifactId>zkclient</artifactId><br>            <version>0.10</version><br>        </dependency></p>
<pre><code>    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;
        &lt;artifactId&gt;curator-framework&lt;/artifactId&gt;
        &lt;version&gt;2.12.0&lt;/version&gt;
    &lt;/dependency&gt;</code></pre>
<p>2ã€é…ç½®æä¾›è€…</p>
<!--å½“å‰åº”ç”¨çš„åå­—  -->
<pre><code>&lt;dubbo:application name=&quot;gmall-user&quot;&gt;&lt;/dubbo:application&gt;</code></pre>
<!--æŒ‡å®šæ³¨å†Œä¸­å¿ƒçš„åœ°å€  -->
<pre><code>&lt;dubbo:registry address=&quot;zookeeper://118.24.44.169:2181&quot; /&gt;</code></pre>
<!--ä½¿ç”¨dubboåè®®ï¼Œå°†æœåŠ¡æš´éœ²åœ¨20880ç«¯å£  -->
<pre><code>&lt;dubbo:protocol name=&quot;dubbo&quot; port=&quot;20880&quot; /&gt;</code></pre>
<!-- æŒ‡å®šéœ€è¦æš´éœ²çš„æœåŠ¡ -->
<pre><code>&lt;dubbo:service interface=&quot;com.atguigu.gmall.service.UserService&quot; ref=&quot;userServiceImpl&quot; /&gt;</code></pre>
<p>3ã€å¯åŠ¨æœåŠ¡<br>    public static void main(String[] args) throws IOException {<br>        ClassPathXmlApplicationContext context =<br>                new ClassPathXmlApplicationContext(â€œclasspath:spring-beans.xmlâ€);<br>        System.in.read();<br>    }<br>æœåŠ¡æ¶ˆè´¹è€…å»æœåŠ¡ä¸­å¿ƒè®¢é˜…æœåŠ¡<br>1ã€å¼•å…¥dubbo<br>        <dependency><br>            <groupId>com.alibaba</groupId><br>            <artifactId>dubbo</artifactId><br>            <version>2.6.2</version><br>        </dependency></p>
<!-- ç”±äºæˆ‘ä»¬ä½¿ç”¨zookeeperä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥zkclientå’Œcuratoræ“ä½œzookeeper -->
<pre><code>    &lt;dependency&gt;
        &lt;groupId&gt;com.101tec&lt;/groupId&gt;
        &lt;artifactId&gt;zkclient&lt;/artifactId&gt;
        &lt;version&gt;0.10&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.curator&lt;/groupId&gt;
        &lt;artifactId&gt;curator-framework&lt;/artifactId&gt;
        &lt;version&gt;2.12.0&lt;/version&gt;
    &lt;/dependency&gt;</code></pre>
<p>2ã€é…ç½®æ¶ˆè´¹è€…ä¿¡æ¯</p>
<!-- åº”ç”¨å -->
<pre><code>&lt;dubbo:application name=&quot;gmall-order-web&quot;&gt;&lt;/dubbo:application&gt;</code></pre>
<!-- æŒ‡å®šæ³¨å†Œä¸­å¿ƒåœ°å€ -->
<pre><code>&lt;dubbo:registry address=&quot;zookeeper://118.24.44.169:2181&quot; /&gt;</code></pre>
<!-- ç”Ÿæˆè¿œç¨‹æœåŠ¡ä»£ç†ï¼Œå¯ä»¥å’Œæœ¬åœ°beanä¸€æ ·ä½¿ç”¨demoService -->
<pre><code>&lt;dubbo:reference id=&quot;userService&quot; interface=&quot;com.atguigu.gmall.service.UserService&quot;&gt;</code></pre>
<p></dubbo:reference><br>æ³¨è§£æ ‡è®°</p>
<p>1ã€æœåŠ¡æä¾›æ–¹<br>&lt;dubbo:application name=â€gmall-userâ€&gt;</dubbo:application><br>&lt;dubbo:registry address=â€zookeeper://118.24.44.169:2181â€ /&gt;<br>&lt;dubbo:protocol name=â€dubboâ€ port=â€20880â€ /&gt;<br>&lt;dubbo:annotation package=â€com.atguigu.gmall.user.implâ€/&gt;<br>import com.alibaba.dubbo.config.annotation.Service;<br>import com.atguigu.gmall.bean.UserAddress;<br>import com.atguigu.gmall.service.UserService;<br>import com.atguigu.gmall.user.mapper.UserAddressMapper;</p>
<p>@Service //ä½¿ç”¨dubboæä¾›çš„serviceæ³¨è§£ï¼Œæ³¨å†Œæš´éœ²æœåŠ¡<br>public class UserServiceImpl implements UserService {<br>    @Autowired<br>    UserAddressMapper userAddressMapperï¼›</p>
<p>2ã€æœåŠ¡æ¶ˆè´¹æ–¹<br>&lt;dubbo:application name=â€gmall-order-webâ€&gt;</dubbo:application><br>&lt;dubbo:registry address=â€zookeeper://118.24.44.169:2181â€ /&gt;<br>&lt;dubbo:annotation package=â€com.atguigu.gmall.order.controllerâ€/&gt;</p>
<p>@Controller<br>public class OrderController {<br>    @Reference  //ä½¿ç”¨dubboæä¾›çš„referenceæ³¨è§£å¼•ç”¨è¿œç¨‹æœåŠ¡<br>    UserService userService;<br>ZookeeperæœåŠ¡æ³¨å†Œ<br>Xshell rzä¸Šä¼ åˆ°linuxæœåŠ¡å™¨ã€‚tar -zxvf è§£å‹åæ–°å»ºdataæ–‡ä»¶å¤¹ ç„¶åæŠŠzoo-simple.cfg æ–‡ä»¶cpä¸€ä»½ä¿®æ”¹ dataDirä¸ºè‡ªå·±åˆ›å»ºçš„ç›®å½•</p>
<p>è¿›å…¥Zookeeperçš„binç›®å½•ï¼Œå¯åŠ¨æœåŠ¡å‘½ä»¤<br>./zkServer.sh start</p>
<p>åœæ­¢æœåŠ¡å‘½ä»¤<br>./zkServer.sh stop</p>
<p>æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼š<br>./zkServer.sh status</p>
<p>æœåŠ¡æä¾›æ–¹ï¼šæ³¨æ„ä½¿ç”¨Dubboæä¾›çš„Serviceæ³¨è§£ï¼Œå¯¹å¤–å‘å¸ƒæœåŠ¡ã€‚applicationContext-service.xmlé…ç½®å¦‚ä¸‹</p>
<?xml version="1.0" encoding="UTF-8"?>
<p><beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:dubbo="http://code.alibabatech.com/schema/dubbo"
        xmlns:mvc="http://www.springframework.org/schema/mvc"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
         http://www.springframework.org/schema/mvc
         http://www.springframework.org/schema/mvc/spring-mvc.xsd
         http://code.alibabatech.com/schema/dubbo
         http://code.alibabatech.com/schema/dubbo/dubbo.xsd
         http://www.springframework.org/schema/context
         http://www.springframework.org/schema/context/spring-context.xsd"><br>    <!-- å½“å‰åº”ç”¨åç§°ï¼Œç”¨äºæ³¨å†Œä¸­å¿ƒè®¡ç®—åº”ç”¨é—´ä¾èµ–å…³ç³»ï¼Œæ³¨æ„ï¼šæ¶ˆè´¹è€…å’Œæä¾›è€…åº”ç”¨åä¸è¦ä¸€æ · --><br>    &lt;dubbo:application name=â€dubbodemo_providerâ€ /&gt;<br>    <!-- è¿æ¥æœåŠ¡æ³¨å†Œä¸­å¿ƒzookeeper ipä¸ºzookeeperæ‰€åœ¨æœåŠ¡å™¨çš„ipåœ°å€--><br>    &lt;dubbo:registry address=â€zookeeper://ip:2181â€/&gt;<br>    <!-- æ³¨å†Œ  åè®®å’Œport   ç«¯å£é»˜è®¤æ˜¯20880 --><br>    &lt;dubbo:protocol name=â€dubboâ€ port=â€20881â€&gt;</dubbo:protocol><br>    <!-- æ‰«ææŒ‡å®šåŒ…ï¼ŒåŠ å…¥@Serviceæ³¨è§£çš„ç±»ä¼šè¢«å‘å¸ƒä¸ºæœåŠ¡  --><br>    &lt;dubbo:annotation package=â€com.leo.service.implâ€ /&gt;<br></beans><br>æœåŠ¡æ¶ˆè´¹æ–¹ï¼šControllerä¸­æ³¨å…¥HelloServiceä½¿ç”¨çš„æ˜¯Dubboæä¾›çš„@Referenceæ³¨è§£Â </p>
<?xml version="1.0" encoding="UTF-8"?>
<p><beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:dubbo="http://code.alibabatech.com/schema/dubbo"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
            http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/mvc
            http://www.springframework.org/schema/mvc/spring-mvc.xsd
            http://code.alibabatech.com/schema/dubbo
            http://code.alibabatech.com/schema/dubbo/dubbo.xsd
            http://www.springframework.org/schema/context
            http://www.springframework.org/schema/context/spring-context.xsd"></p>
<pre><code>&lt;!-- å½“å‰åº”ç”¨åç§°ï¼Œç”¨äºæ³¨å†Œä¸­å¿ƒè®¡ç®—åº”ç”¨é—´ä¾èµ–å…³ç³»ï¼Œæ³¨æ„ï¼šæ¶ˆè´¹è€…å’Œæä¾›è€…åº”ç”¨åä¸è¦ä¸€æ · --&gt;
&lt;dubbo:application name=&quot;dubbodemo-consumer&quot; /&gt;
&lt;!-- è¿æ¥æœåŠ¡æ³¨å†Œä¸­å¿ƒzookeeper ipä¸ºzookeeperæ‰€åœ¨æœåŠ¡å™¨çš„ipåœ°å€--&gt;
&lt;dubbo:registry address=&quot;zookeeper://ip:2181&quot;/&gt;
&lt;!-- æ‰«æçš„æ–¹å¼æš´éœ²æ¥å£  --&gt;
&lt;dubbo:annotation package=&quot;com.leo.controller&quot; /&gt;</code></pre>
</beans>
Dubboé…ç½®è¯´æ˜
åŒ…æ‰«æ
<dubbo:annotation package="com.leo.service" /> æä¾›è€…å’Œæ¶ˆè´¹è€…éƒ½éœ€è¦é…ç½®ã€‚
ä¹Ÿå¯é€šè¿‡é…ç½®çš„æ–¹å¼ï¼Œä½†æ˜¯ä¸€ä¸ªé…ç½®é¡¹(dubbo:serviceã€dubbo:reference)åªèƒ½å‘å¸ƒæˆ–è€…å¼•ç”¨ä¸€ä¸ªæœåŠ¡ï¼Œä¸å¤ªæ–¹ä¾¿ã€‚

<p>å‘å¸ƒæœåŠ¡ï¼š<br><bean id="helloService" class="com.itheima.service.impl.HelloServiceImpl" /><br>&lt;dubbo:service interface=â€com.itheima.api.HelloServiceâ€ ref=â€helloServiceâ€ /&gt;</p>
<p>å¼•ç”¨æœåŠ¡ï¼š</p>
<!-- ç”Ÿæˆè¿œç¨‹æœåŠ¡ä»£ç†ï¼Œå¯ä»¥å’Œæœ¬åœ°beanä¸€æ ·ä½¿ç”¨helloService -->
<p>&lt;dubbo:reference id=â€helloServiceâ€ interface=â€com.itheima.api.HelloServiceâ€ /&gt;<br>åè®®<br>&lt;dubbo:protocol name=â€dubboâ€ port=â€20880â€/&gt; æœåŠ¡æä¾›è€…å¤„é…ç½®ï¼Œå¯ä»¥æŒ‡å®šåè®®åç§°å’Œç«¯å£å·ã€‚<br>Dubboæ”¯æŒåè®®ï¼šdubboã€rmiã€hessianã€httpã€webserviceã€restã€redisç­‰ã€‚æ¨èä½¿ç”¨dubboåè®®ã€‚<br>dubbo åè®®:Â é‡‡ç”¨å•ä¸€é•¿è¿æ¥å’Œ NIO å¼‚æ­¥é€šè®¯ï¼Œé€‚åˆäºå°æ•°æ®é‡å¤§å¹¶å‘çš„æœåŠ¡è°ƒç”¨ï¼Œä»¥åŠæ¶ˆè´¹è€…æœºå™¨æ•°è¿œå¤§äºæä¾›è€…æœºå™¨æ•°æ—¶ã€‚ä¸é€‚åˆä¼ ä¼ æ–‡ä»¶ï¼Œä¼ è§†é¢‘ç­‰å¤§æ•°æ®é‡æœåŠ¡ã€‚<br>ä¹Ÿå¯åŒä¸€ä¸ªå·¥ç¨‹ä¸­é…ç½®å¤šä¸ªåè®®ï¼Œä¸åŒæœåŠ¡ä½¿ç”¨ä¸åŒåè®®ï¼š</p>
<!-- å¤šåè®®é…ç½® -->
<p>&lt;dubbo:protocol name=â€dubboâ€ port=â€20880â€ /&gt;<br>&lt;dubbo:protocol name=â€httpâ€ port=â€1099â€ /&gt;</p>
<!-- ä½¿ç”¨dubboåè®®æš´éœ²æœåŠ¡ -->
<p>&lt;dubbo:service interface=â€com.itheima.api.HelloServiceâ€ ref=â€Service1â€ protocol=â€dubboâ€ /&gt;</p>
<!-- ä½¿ç”¨httpåè®®æš´éœ²æœåŠ¡ -->
<p>&lt;dubbo:service interface=â€com.itheima.api.DemoServiceâ€ ref=â€Service2â€ protocol=â€httpâ€ /&gt;<br>å¯åŠ¨æ—¶æ£€æŸ¥<br>&lt;dubbo:consumer check=â€falseâ€/&gt; é…ç½®åœ¨æ¶ˆè´¹è€…å¤„ï¼Œé»˜è®¤å€¼ä¸ºtrueã€‚å¯åŠ¨æ—¶æ£€æŸ¥ä¾èµ–çš„æœåŠ¡æ˜¯å¦å¯ç”¨ï¼Œä¸å¯ç”¨æŠ›å‡ºå¼‚å¸¸ï¼Œé˜»æ­¢ Spring åˆå§‹åŒ–ï¼Œæ’é™¤é—®é¢˜ã€‚å¯ä»¥é€šè¿‡å°†checkå€¼æ”¹ä¸ºfalseæ¥å…³é—­æ£€æŸ¥ã€‚ä¸€èˆ¬å¼€å‘é˜¶æ®µfalseï¼Œç”Ÿäº§ç¯å¢ƒä¸ºtrueã€‚</p>
<p>è´Ÿè½½å‡è¡¡</p>
<p>æ—¢å¯åœ¨æœåŠ¡æä¾›è€…ä¸€æ–¹é…ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨æœåŠ¡æ¶ˆè´¹è€…ä¸€æ–¹é…ç½®ã€‚<br>è´Ÿè½½å‡è¡¡â€”â€“å°†è¯·æ±‚åˆ†æ‘Šåˆ°å¤šä¸ªæ“ä½œå•å…ƒä¸Šè¿›è¡Œæ‰§è¡Œï¼Œä»è€Œå…±åŒå®Œæˆå·¥ä½œä»»åŠ¡ã€‚å‡è¡¡ç­–ç•¥ï¼ˆåŒ…æ‹¬éšæœºã€è½®è¯¢ã€æœ€å°‘æ´»è·ƒè°ƒç”¨æ•°ã€ä¸€è‡´æ€§Hashï¼‰ï¼Œç¼ºçœä¸ºrandoméšæœºè°ƒç”¨ã€‚</p>
<p>//åœ¨æœåŠ¡æ¶ˆè´¹è€…ä¸€æ–¹é…ç½®è´Ÿè½½å‡è¡¡ç­–ç•¥<br>    @Reference(check = false,loadbalance = â€œrandomâ€)<br>//åœ¨æœåŠ¡æä¾›è€…ä¸€æ–¹é…ç½®è´Ÿè½½å‡è¡¡<br>    @Service(loadbalance = â€œrandomâ€)<br>Ps1ï¼šå¼€å‘æ—¶å€™ä¸€å°æœºå™¨ä¸Šå¯åŠ¨å¤šä¸ªæä¾›è€…ï¼Œè¦ä¿®æ”¹tomcatã€DubboæœåŠ¡çš„ç«¯å£å·é˜²æ­¢ç«¯å£å†²çªã€‚å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒæœåŠ¡æä¾›è€…æ˜¯éƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Šï¼Œä¸å­˜åœ¨ç«¯å£å†²çªé—®é¢˜ã€‚</p>
<p>Ps2ï¼šåŠ å…¥äº‹åŠ¡æ³¨è§£å@Transactionalï¼ŒSpringä¼šä¸ºæ­¤ç±»åŸºäºJDKåŠ¨æ€ä»£ç†æŠ€æœ¯åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œåˆ›å»ºçš„ä»£ç†å¯¹è±¡å®Œæ•´ç±»åä¸ºcom.sun.proxy.$ProxyXX(35/42ç­‰ç­‰)ï¼Œå¯¼è‡´Dubboåœ¨è¿›è¡ŒåŒ…åŒ¹é…æ—¶æ²¡æœ‰æˆåŠŸï¼Œå‘å¸ƒæœåŠ¡çš„ä»£ç æ²¡æœ‰æ‰§è¡Œã€‚</p>
<p>å¯ä»¥é€šè¿‡ä¿®æ”¹applicationContext-service.xmlé…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨cglibä»£ç†æ–¹å¼ä¸ºServiceç±»åˆ›å»ºä»£ç†å¯¹è±¡<br>&lt;tx:annotation-driven transaction-manager=â€transactionManagerâ€ proxy-target-class=â€trueâ€/&gt;</p>
<hr>
<p>1ã€è´Ÿè½½å‡è¡¡-å°†è¯·æ±‚å‡è¡¡åœ°åˆ†é…åˆ°å¤šä¸ªç³»ç»Ÿä¸Šã€‚å¸¸è§çš„æŠ€æœ¯ï¼š</p>
<p>DNS:ä¸€èˆ¬ç”¨æ¥å®ç°åœ°ç†çº§åˆ«çš„å‡è¡¡ï¼Œè€—è´¹IPä¸é€‚ç”¨äºåšæœºå™¨çº§åˆ«ã€‚</p>
<p>Nginx-&gt;LVS-&gt;F5:åŒåœ°ç‚¹æœºå™¨çº§è´Ÿè½½å‡è¡¡ã€‚Nginxè½¯ä»¶7å±‚ï¼ŒLVSå†…æ ¸4å±‚ï¼ŒF5æ˜¯ç¡¬ä»¶4å±‚</p>
<p>2ã€è´Ÿè½½å‡è¡¡ç­–ç•¥LoadBalance</p>
<p>Random éšæœºï¼ŒæŒ‰æƒé‡è®¾ç½®éšæœºæ¦‚ç‡ã€‚</p>
<p>RoundRobin è½®å¾ªï¼ŒæŒ‰å…¬çº¦åçš„æƒé‡è®¾ç½®è½®å¾ªæ¯”ç‡ã€‚ä¼šäº§ç”Ÿè¯·æ±‚ç§¯ç´¯é—®é¢˜ã€‚</p>
<p>LeastActive æœ€å°‘æ´»è·ƒè°ƒç”¨æ•°ï¼Œæ­£åœ¨å¤„ç†è¯·æ±‚æ•°ï¼ˆè¿æ¥æ•°ï¼‰æœ€å°‘ï¼Œå¤„ç†æ•ˆç‡é«˜ï¼Œä¼˜å…ˆã€‚ï¼Œ</p>
<p>ConsistentHashä¸€è‡´æ€§Hashï¼Œç›¸åŒå‚æ•°çš„è¯·æ±‚æ€»æ˜¯å‘åˆ°åŒä¸€æä¾›è€…ã€‚</p>
<p>3ã€sessionå…±äº«â€“Sessionåœ¨æœåŠ¡å™¨ä¹‹é—´ä¸äº’é€šï¼›è§£å†³</p>
<p>sessionç²˜æ»-å°†è¯·æ±‚éƒ½è½åˆ°åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šï¼Œå¦‚Nginxçš„url hash ï¼›</p>
<p>sessionå¤åˆ¶-æ¯å°æœåŠ¡å™¨éƒ½ä¿å­˜ä¸€ä»½ç›¸åŒçš„sessionï¼›</p>
<p>sessioné›†ä¸­å­˜å‚¨-æ•°æ®åº“æˆ–è€…ç¼“å­˜ï¼›</p>
<p>cookie (ä¸»æµ)-å°†ä¿¡æ¯å­˜åœ¨åŠ å¯†åçš„cookieä¸­ï¼›</p>
<p>4ï¼Œæ•°æ®åº“è¯»å†™åˆ†ç¦»ï¼š</p>
<p>æ­å»ºä¸»ä»é›†ç¾¤ï¼Œä¸€ä¸»ä¸€ä»æˆ–ä¸€ä¸»å¤šä»ã€‚æ•°æ®ä¸»ä»å¤åˆ¶ï¼Œä¸»ä»å‡åŒ…æ¶µå…¨éƒ¨ä¸šåŠ¡æ•°æ®ã€‚<br>ä¸šåŠ¡æœåŠ¡å™¨å°†å†™æ“ä½œåˆ†ç»™æ•°æ®åº“ä¸»æœºï¼Œå°†è¯»æ“ä½œåˆ†ç»™æ•°æ®åº“ä»æœºï¼Œ<br>Â  Â  Â å®ç°æ–¹å¼</p>
<p>Â  Â  Â 1ã€ç¨‹åºä»£ç â€“ä»£ç ä¸­æŠ½è±¡ä¸€ä¸ªæ•°æ®è®¿é—®å±‚æ¥å®ç°</p>
<p>Â  Â  Â 2ã€ä¸­é—´ä»¶â€”ç‹¬ç«‹ä¸€å¥—ç³»ç»Ÿã€‚ MySQL Routerã€Mycatç­‰</p>
<p>5ã€ä¸šåŠ¡åˆ†åº“-æŒ‰ç…§ä¸šåŠ¡æ¨¡å—å°†æ•°æ®åˆ†æ•£åˆ°ä¸åŒçš„æ•°æ®åº“æœåŠ¡å™¨ã€‚</p>
<p>joinæ“ä½œé—®é¢˜ï¼šä¸šåŠ¡åˆ†åº“åæ— æ³•ä½¿ç”¨ä¸€äº›SQLçš„å…³è”æŸ¥è¯¢ã€‚<br>äº‹åŠ¡é—®é¢˜ï¼šæ— æ³•é€šè¿‡äº‹åŠ¡ç»Ÿä¸€ä¿®æ”¹<br>æˆæœ¬é—®é¢˜ï¼šå¢åŠ æ›´å¤šæœåŠ¡å™¨éœ€æ±‚ã€‚<br>6ã€æ•°æ®åˆ†è¡¨</p>
<p>å‚ç›´åˆ†è¡¨ï¼šå‚ç›´åˆ†è¡¨é€‚åˆå°†è¡¨ä¸­æŸäº›ä¸å¸¸ç”¨ä¸”å äº†å¤§é‡ç©ºé—´çš„åˆ—æ‹†åˆ†å‡ºå»ã€‚</p>
<p>æ°´å¹³åˆ†è¡¨ï¼šæ°´å¹³åˆ†è¡¨é€‚åˆè¡¨è¡Œæ•°ç‰¹åˆ«å¤§çš„è¡¨ï¼Œå¦‚å•è¡¨è¡Œ&gt;5000ä¸‡å°±å¯ä»¥è€ƒè™‘åˆ†è¡¨ã€‚</p>
<p>æ°´å¹³åˆ†è¡¨åï¼Œä½¿ç”¨åŠ è·¯ç”±ç®—æ³•ç¡®å®šæ•°æ®ä¸è¡¨å¯¹åº”å…³ç³»ã€‚</p>
<p>7ã€å¸¸è§çš„è·¯ç”±ç®—æ³•</p>
<p>èŒƒå›´è·¯ç”±ï¼šç”¨æœ‰åºæ•°æ®åˆ—ä¸ºåŸºå‡†ã€‚</p>
<p>Hashè·¯ç”±ï¼šç”¨åˆ—çš„å€¼è¿›è¡ŒHashè¿ç®—å¾—Hashç»“æœã€‚</p>
<p>é…ç½®è·¯ç”±ï¼šç”¨ç‹¬ç«‹è·¯ç”±è¡¨è®°å½•è·¯ç”±ä¿¡æ¯ã€‚</p>
<p>8ã€å¾®æœåŠ¡é€šä¿¡RPCæŠ€æœ¯</p>
<p>Dubboã€Webserviceã€Hessianã€HTTPã€RMIç­‰ã€‚</p>
<p>9ã€å¾®æœåŠ¡æ²»ç†ï¼š</p>
<p>æœåŠ¡æ³¨å†Œä¸å‘ç° ã€è´Ÿè½½å‡è¡¡ã€é™æµã€æ–­èé™çº§</p>
<p>10ã€Dockerå®¹å™¨</p>
<p>ï¼ˆ1ï¼‰å¯åŠ¨å¿«-æ˜¯åº•å±‚è¿›ç¨‹-ç§’çº§ï¼Œè™šæ‹Ÿæœºè¿›ç¨‹-åˆ†é’Ÿã€‚</p>
<p>ï¼ˆ2ï¼‰èµ„æºå ç”¨å°‘-ä¸å æ— ç”¨èµ„æºï¼›è™šæ‹Ÿæœºå ç”¨æ›´å¤šèµ„æºã€‚å®¹å™¨è¿˜å¯ä»¥å…±äº«èµ„æºã€‚</p>
<p>ï¼ˆ3ï¼‰ä½“ç§¯å°-å®¹å™¨ç±»ä¼¼è½»é‡çº§è™šæ‹Ÿæœºï¼Œé€šè¿‡å°ä½“ç§¯æä¾›è™šæ‹ŸåŒ–çš„ç¯å¢ƒã€‚</p>
<p>æ¥å‡ ä¸ªé¢è¯•é¢˜ï¼š</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/tomasonl?tab=repositories">ç§‹å®å…ˆç”Ÿ</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://tomasonl.github.io">https://tomasonl.github.io</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æ­¤æ–‡ç« ç‰ˆæƒå½’å±Tomasonlç§‹å®å…ˆç”Ÿæ‰€æœ‰ï¼Œå¦‚æœ‰è½¬è½½è¯·æ³¨æ˜å‡ºå¤„</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/">å·¥ä½œè®°å½•</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.1/Pic/Blogcover/%E5%88%86%E5%B8%83%E5%BC%8F%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> æ‰“èµ<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/WechatPay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/WechatPay.jpg"/></a><div class="post-qr-code-desc"></div></li><li class="reward-item"><a href="/img/Alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/Alipay.jpg"/></a><div class="post-qr-code-desc"></div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/12/05/SM2%E5%9B%BD%E5%AF%86%E7%AE%97%E6%B3%95-%E5%AD%A6%E4%B9%A0%E6%9C%AD%E8%AE%B0/"><img class="prev-cover" src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1607147252248&amp;di=104ea22af9037f168010e3828afa5d98&amp;imgtype=0&amp;src=http%3A%2F%2Fsem.g3img.com%2Fg3img%2Fszhuawei1%2Fc2_20180514111250_73457.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">SM2å›½å¯†ç®—æ³•-å­¦ä¹ æœ­è®°</div></div></a></div><div class="next-post pull-right"><a href="/2020/04/30/MarkDown%E8%AF%AD%E6%B3%95%E6%80%BB%E7%BB%93/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.1/Pic/Blogcover/markdonw.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">MarkDownè¯­æ³•æ€»ç»“</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/2020/04/06/Javaå¤šçº¿ç¨‹/" title="JAVAå¤šçº¿ç¨‹"><img class="cover" src="http://pic1.win4000.com/wallpaper/2020-11-18/5fb4d3232459a.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-04-06</div><div class="title">JAVAå¤šçº¿ç¨‹</div></div></a></div><div><a href="/2021/03/04/Javaå¼€å‘-è§„èŒƒèµ·æ¥1/" title="Javaæ—¥å¸¸å¼€å‘-è§„èŒƒèµ·æ¥1"><img class="cover" src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1832317564,3433131942&fm=26&gp=0.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-04</div><div class="title">Javaæ—¥å¸¸å¼€å‘-è§„èŒƒèµ·æ¥1</div></div></a></div><div><a href="/2021/03/09/Javaå¼€å‘-è§„èŒƒèµ·æ¥2/" title="Javaå¼€å‘-è§„èŒƒèµ·æ¥2"><img class="cover" src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1832317564,3433131942&fm=26&gp=0.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-09</div><div class="title">Javaå¼€å‘-è§„èŒƒèµ·æ¥2</div></div></a></div><div><a href="/2021/03/14/Javaå¼€å‘-è§„èŒƒèµ·æ¥3/" title="Javaå¼€å‘-è§„èŒƒèµ·æ¥3"><img class="cover" src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1832317564,3433131942&fm=26&gp=0.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-14</div><div class="title">Javaå¼€å‘-è§„èŒƒèµ·æ¥3</div></div></a></div><div><a href="/2020/02/01/Mavenå’ŒGradleé¡¹ç›®æ„å»º/" title="Mavenå’ŒGradeæ„å»ºé¡¹ç›®"><img class="cover" src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.1/Pic/Blogcover/%E6%97%A5%E5%B8%B8%E9%9A%8F%E7%AC%94.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-02-01</div><div class="title">Mavenå’ŒGradeæ„å»ºé¡¹ç›®</div></div></a></div><div><a href="/2020/12/23/MyBatisæºç å‰–æ/" title="MyBatisæºç å‰–æ"><img class="cover" src="https://ss0.bdstatic.com/70cFvHSh_Q1YnxGkpoWK1HF6hhy/it/u=1090660196,3930716840&fm=26&gp=0.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-23</div><div class="title">MyBatisæºç å‰–æ</div></div></a></div></div></div></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/2.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Tomasonlee</div><div class="author-info__description">åšç§¯è–„å‘ï¼Œè¡Œèƒœäºè¨€</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">34</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">4</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/tomasonl"><i class="fab fa-github"></i><span>å…³æ³¨ä¸€æ³¢ O(âˆ©_âˆ©)O</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/tomasonl" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://tomasonl.cloudstudio.net/dashboard/workspace" target="_blank" title="CloudStudio"><i class="fas fa-cloud"></i></a><a class="social-icon" href="https://gitee.com/tomasonl" target="_blank" title="Gitee"><i class="fab fa-git-square"></i></a></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1"><span class="toc-number">1.</span> <span class="toc-text">å¾®æœåŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99"><span class="toc-number">1.1.</span> <span class="toc-text">1ã€å¾®æœåŠ¡è®¾è®¡åŸåˆ™</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%9B%9B%E4%B8%AA%E6%A0%B8%E5%BF%83%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="toc-number">1.2.</span> <span class="toc-text">2ã€å¾®æœåŠ¡å››ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%EF%BC%9F"><span class="toc-number">1.3.</span> <span class="toc-text">3ã€å¾®æœåŠ¡çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">4ã€å¾®æœåŠ¡é€šä¿¡æ–¹å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E3%80%81RPC%E9%80%9A%E4%BF%A1%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.4.1.</span> <span class="toc-text">1ã€RPCé€šä¿¡ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E3%80%81HTTP%E9%80%9A%E4%BF%A1%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.4.2.</span> <span class="toc-text">2ã€HTTPé€šä¿¡ä»‹ç»</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringCloud"><span class="toc-number">2.</span> <span class="toc-text">SpringCloud</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81Eureka%E6%B3%A8%E5%86%8C%E4%B8%AD%E5%BF%83"><span class="toc-number">2.1.</span> <span class="toc-text">1ã€Eurekaæ³¨å†Œä¸­å¿ƒ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81Ribbon%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1"><span class="toc-number">2.2.</span> <span class="toc-text">2ã€Ribbonè´Ÿè½½å‡è¡¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81hystrix%E6%9C%8D%E5%8A%A1%E7%86%94%E6%96%AD"><span class="toc-number">2.3.</span> <span class="toc-text">3ã€hystrixæœåŠ¡ç†”æ–­</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B9%E7%86%94%E6%96%AD%E7%AD%96%E7%95%A5%EF%BC%9A"><span class="toc-number">3.</span> <span class="toc-text">é…ç½®ä¿®æ”¹ç†”æ–­ç­–ç•¥ï¼š</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4%EF%BC%8CFeign%E4%BC%AA%E8%A3%85%E8%AF%B7%E6%B1%82"><span class="toc-number">3.1.</span> <span class="toc-text">4ï¼ŒFeignä¼ªè£…è¯·æ±‚</span></a></li></ol></li></ol></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Tomasonlee</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">åšç§¯è–„å‘ï¼Œè¡Œèƒœäºè¨€ï¼</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></div></body></html>