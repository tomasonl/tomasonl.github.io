<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>李响的博客中心</title>
  
  
  <link href="http://tomasonl.github.io/atom.xml" rel="self"/>
  
  <link href="http://tomasonl.github.io/"/>
  <updated>2021-07-06T01:22:13.122Z</updated>
  <id>http://tomasonl.github.io/</id>
  
  <author>
    <name>Tomasonlee</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>生产力</title>
    <link href="http://tomasonl.github.io/2021/07/06/%E7%94%9F%E4%BA%A7%E5%8A%9B/"/>
    <id>http://tomasonl.github.io/2021/07/06/%E7%94%9F%E4%BA%A7%E5%8A%9B/</id>
    <published>2021-07-06T01:15:14.000Z</published>
    <updated>2021-07-06T01:22:13.122Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="IDEA-快捷键"><a href="#IDEA-快捷键" class="headerlink" title="IDEA 快捷键"></a>IDEA 快捷键</h1><ul><li>try/catch快捷键<br>Ctrl + Alt + t</li><li>格式化代码<br>去掉空白： Ctrl + Shift + J<br>格式化代码： Ctrl + Alt + L</li><li>大小写切换<br>Ctrl+Shift+u</li><li>优化依赖引入Imports<br>Ctrl+Alt+O     </li><li>查找/替换<br>双击Shift          全局查找<br>Ctrl+Shift+F     目录内查找<br>Ctrl+R             替换<br>Ctrl+Shift+R     目录内替换</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工具模块" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E5%85%B7%E6%A8%A1%E5%9D%97/"/>
    
  </entry>
  
  <entry>
    <title>EasyExcel</title>
    <link href="http://tomasonl.github.io/2021/06/30/EasyExcel/"/>
    <id>http://tomasonl.github.io/2021/06/30/EasyExcel/</id>
    <published>2021-06-30T08:41:42.000Z</published>
    <updated>2021-06-30T08:46:59.676Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="EasyExcel"><a href="#EasyExcel" class="headerlink" title="EasyExcel"></a><code>EasyExcel</code></h1><p><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fbpic.588ku.com%2Felement_origin_min_pic%2F00%2F91%2F84%2F2256f1844a88731.jpg&refer=http%3A%2F%2Fbpic.588ku.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1622184874&t=6867c50ebbed5a3a3abdcc8936c3b336" width="30" height="30" align=left> <a href="/download/easyexcel.7z">点击此处下载配套源码</a></p><h2 id="一、初识EasyExcel"><a href="#一、初识EasyExcel" class="headerlink" title="一、初识EasyExcel"></a>一、初识<code>EasyExcel</code></h2><h3 id="1-Apache-POI"><a href="#1-Apache-POI" class="headerlink" title="1. Apache POI"></a>1. Apache POI</h3><p>先说<code>POI</code>，有过报表导入导出经验的同学，应该听过或者使用。</p><p><code>Apache POI</code>是Apache软件基金会的开源函式库，提供跨平台的<code>Java API</code>实现<code>Microsoft Office</code>格式档案读写。但是存在如下一些问题：</p><h4 id="1-1-学习使用成本较高"><a href="#1-1-学习使用成本较高" class="headerlink" title="1.1 学习使用成本较高"></a>1.1 学习使用成本较高</h4><p>对POI有过深入了解的才知道原来POI还有SAX模式（Dom解析模式）。但SAX模式相对比较复杂，excel有03和07两种版本，两个版本数据存储方式截然不同，sax解析方式也各不一样。</p><p>想要了解清楚这两种解析方式，才去写代码测试，估计两天时间是需要的。再加上即使解析完，要转换到自己业务模型还要很多繁琐的代码。总体下来感觉至少需要三天，由于代码复杂，后续维护成本巨大。</p><p>POI的SAX模式的API可以一定程度的解决一些内存溢出的问题，但是POI还是有一些缺陷，比如07版Excel解压缩以及解压后存储都是在内存中完成的，内存消耗依然很大，一个3M的Excel用POI的SAX解析，依然需要100M左右内存。</p><h4 id="1-2-POI的内存消耗较大"><a href="#1-2-POI的内存消耗较大" class="headerlink" title="1.2 POI的内存消耗较大"></a>1.2 POI的内存消耗较大</h4><p>大部分使用POI都是使用他的userModel模式。userModel的好处是上手容易使用简单，随便拷贝个代码跑一下，剩下就是写业务转换了，虽然转换也要写上百行代码，相对比较好理解。然而userModel模式最大的问题是在于非常大的内存消耗，一个几兆的文件解析要用掉上百兆的内存。现在很多应用采用这种模式，之所以还正常在跑一定是并发不大，并发上来后一定会OOM或者频繁的full gc。</p><p>总体上来说，简单写法重度依赖内存，复杂写法学习成本高。</p><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ol><li><p>功能强大</p></li><li><p>代码书写冗余繁杂</p></li><li><p>读写大文件耗费内存较大，容易OOM</p></li></ol><h3 id="2-EasyExcel"><a href="#2-EasyExcel" class="headerlink" title="2. EasyExcel"></a>2. <code>EasyExcel</code></h3><h4 id="2-1-重写了POI对07版Excel的解析"><a href="#2-1-重写了POI对07版Excel的解析" class="headerlink" title="2.1 重写了POI对07版Excel的解析"></a>2.1 重写了POI对07版Excel的解析</h4><ul><li><p>EasyExcel重写了POI对07版Excel的解析，可以把内存消耗从100M左右降低到10M以内，并且再大的Excel不会出现内存溢出，03版仍依赖POI的SAX模式。</p></li><li><p>下图为64M内存1分钟内读取75M(46W行25列)的Excel（当然还有急速模式能更快，但是内存占用会在100M多一点）</p></li></ul><ul><li>在上层做了模型转换的封装，让使用者更加简单方便</li></ul><h4 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h4><ol><li>在数据模型层面进行了封装，<strong>使用简单</strong></li><li>重写了07版本的Excel的解析代码，降低内存消耗，能有效避免OOM</li><li>只能操作Excel</li><li>不能读取图片</li></ol><ol start="0"><li>使用程序读写excel，数据在excel文件、程序&lt;实体类、Map&gt;这两个载体中间相互流转。</li></ol><p>优雅编程    lombok</p><h2 id="二、快速入门–QuickStart"><a href="#二、快速入门–QuickStart" class="headerlink" title="二、快速入门–QuickStart"></a>二、快速入门–QuickStart</h2><h3 id="0、导入依赖坐标"><a href="#0、导入依赖坐标" class="headerlink" title="0、导入依赖坐标"></a>0、导入依赖坐标</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- EasyExcel --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easyexcel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- lombok 优雅编程 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- junit --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>导入<code>easyexcel-2.1.6</code>坐标的时候，以依赖传递导入<code>poi-3.17</code>的POI。如果    ·</p></blockquote><h3 id="1、最简单的读"><a href="#1、最简单的读" class="headerlink" title="1、最简单的读"></a>1、最简单的读</h3><h4 id="1-1、需求、准备工作"><a href="#1-1、需求、准备工作" class="headerlink" title="1.1、需求、准备工作"></a>1.1、需求、准备工作</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 需求：单实体导入</span></span><br><span class="line"><span class="comment"> * 导入Excel学员信息到系统。</span></span><br><span class="line"><span class="comment"> * 包含如下列：姓名、性别、出生日期</span></span><br><span class="line"><span class="comment"> * 模板详见：杭州黑马在线202003班学员信息.xls</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 杭州黑马在线202003班学员信息.xls文件</span></span><br></pre></td></tr></table></figure><h4 id="1-2、编写导出数据的实体"><a href="#1-2、编写导出数据的实体" class="headerlink" title="1.2、编写导出数据的实体"></a>1.2、编写导出数据的实体</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 基于lombok</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生姓名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生性别</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生出生日期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-3、-读取Excel文件"><a href="#1-3、-读取Excel文件" class="headerlink" title="1.3、 读取Excel文件"></a>1.3、 读取<code>Excel</code>文件</h4><p>调用<code>EasyExcel</code>的<code>API</code>读取的<code>Excel</code>文件的测试类<code>StudentReadDemo</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.EasyExcel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.read.builder.ExcelReaderSheetBuilder;</span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Student;</span><br><span class="line"><span class="keyword">import</span> com.itheima.listener.StudentReadListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Vsunks.v</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/3/11 23:28</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentReadDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> FileNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">// 读取文件，读取完之后会自动关闭</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        pathName  文件路径；&quot;d:\\杭州黑马在线202003班学员信息.xls&quot;</span></span><br><span class="line"><span class="comment">        head每行数据对应的实体；Student.class</span></span><br><span class="line"><span class="comment">        readListener读监听器，每读一样就会调用一次该监听器的invoke方法</span></span><br><span class="line"><span class="comment">        </span></span><br><span class="line"><span class="comment">        sheet方法参数： 工作表的顺序号（从0开始）或者工作表的名字，不传默认为0</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">// 封装工作簿对象</span></span><br><span class="line">        ExcelReaderBuilder workBook = EasyExcel.read</span><br><span class="line">                (<span class="string">&quot;d:\\杭州黑马在线202003班学员信息.xls&quot;</span>, Student.class, <span class="keyword">new</span> StudentReadListener());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 封装工作表</span></span><br><span class="line">        ExcelReaderSheetBuilder sheet1 = workBook.sheet();</span><br><span class="line">        <span class="comment">// 读取</span></span><br><span class="line">        sheet1.doRead();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>读取Excel的监听器，用于处理读取产生的数据</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.context.AnalysisContext;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.event.AnalysisEventListener;</span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Student;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Vsunks.v</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/3/11 23:12</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentReadListener</span> <span class="keyword">extends</span> <span class="title">AnalysisEventListener</span>&lt;<span class="title">Student</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// 每读一样，会调用该invoke方法一次</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">invoke</span><span class="params">(Student data, AnalysisContext context)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;data = &quot;</span> + data);</span><br><span class="line">        log.info(data + <span class="string">&quot;保存成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 全部读完之后，会调用该方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterAllAnalysed</span><span class="params">(AnalysisContext context)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO......</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2、最简单的写"><a href="#2、最简单的写" class="headerlink" title="2、最简单的写"></a>2、最简单的写</h3><h4 id="2-1-需求、准备工作"><a href="#2-1-需求、准备工作" class="headerlink" title="2.1 需求、准备工作"></a>2.1 需求、准备工作</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 需求：单实体导出</span></span><br><span class="line"><span class="comment"> * 导出多个学生对象到Excel表格</span></span><br><span class="line"><span class="comment"> * 包含如下列：姓名、性别、出生日期</span></span><br><span class="line"><span class="comment"> * 模板详见：杭州黑马在线202003班学员信息.xlsx</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h4 id="2-2、编写导出数据的实体"><a href="#2-2、编写导出数据的实体" class="headerlink" title="2.2、编写导出数据的实体"></a>2.2、编写导出数据的实体</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 使用lombok</span></span><br><span class="line"><span class="keyword">package</span> com.itheima.domain;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@ColumnWidth(20)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//@ExcelProperty(value = &quot;编号&quot;,index = 3)</span></span><br><span class="line">    <span class="meta">@ExcelIgnore</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生姓名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExcelProperty(value = &quot;学生姓名&quot;, index = 0)</span></span><br><span class="line">    <span class="comment">//@ColumnWidth(30)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生性别</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExcelProperty(value = &quot;学生性别&quot;, index = 2)</span></span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生出生日期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExcelProperty(value = &quot;学生出生日期&quot;, index = 1)</span></span><br><span class="line">    <span class="comment">//@ColumnWidth(20)</span></span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3、-准备数据并写入到文件"><a href="#2-3、-准备数据并写入到文件" class="headerlink" title="2.3、 准备数据并写入到文件"></a>2.3、 准备数据并写入到文件</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.demo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.EasyExcel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.write.builder.ExcelWriterBuilder;</span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Vsunks.v</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/3/11 23:27</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentWriteDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Student&gt; students = initData();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            String pathName 写入文件的路径</span></span><br><span class="line"><span class="comment">            Class head      写入文件的对象类型</span></span><br><span class="line"><span class="comment">            默认写入到07的xlsx中，如果想要写入xls，可以指定类型（待验证）</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        ExcelWriterBuilder workBook = EasyExcel.write(<span class="string">&quot;d:\\杭州黑马学员表.xlsx&quot;</span>, Student.class);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// sheet方法参数： 工作表的顺序号（从0开始）或者工作表的名字</span></span><br><span class="line">        workBook.sheet().doWrite(students);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> List&lt;Student&gt; <span class="title">initData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;Student&gt; students = <span class="keyword">new</span> ArrayList&lt;Student&gt;();</span><br><span class="line">        Student data = <span class="keyword">new</span> Student();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">            data.setName(<span class="string">&quot;杭州黑马学号0&quot;</span> + i);</span><br><span class="line">            data.setBirthday(<span class="keyword">new</span> Date());</span><br><span class="line">            data.setGender(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">            students.add(data);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> students;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3、文件上传和下载"><a href="#3、文件上传和下载" class="headerlink" title="3、文件上传和下载"></a>3、文件上传和下载</h3><p>基于SpringMVC的文件上传和下载</p><p><strong>0. 导入依赖</strong></p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- EasyExcel --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easyexcel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- lombok --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- junit --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-nop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- SpringMVC（Spring） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.0.5.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Servlet --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 文件上传 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-1-文件上传"><a href="#3-1-文件上传" class="headerlink" title="3.1 文件上传"></a>3.1 文件上传</h4><p>编写excel中每一行对应的实体类</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生姓名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生性别</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生出生日期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>编写回调监听器StudentReadListener</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span><span class="comment">// 作者要求每次读取都要使用新的Listener</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentReadListener</span> <span class="keyword">extends</span> <span class="title">AnalysisEventListener</span>&lt;<span class="title">Student</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentService studentService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> BATCH_SAVE_NUM = <span class="number">5</span>;</span><br><span class="line">    ArrayList&lt;Student&gt; students = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 每读一样，会调用该invoke方法一次</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">invoke</span><span class="params">(Student data, AnalysisContext context)</span> </span>&#123;</span><br><span class="line">        students.add(data);</span><br><span class="line">        <span class="keyword">if</span> (++count % BATCH_SAVE_NUM == <span class="number">0</span>) &#123;</span><br><span class="line">            studentService.save(students);</span><br><span class="line">            students.clear();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 全部读完之后，会调用该方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doAfterAllAnalysed</span><span class="params">(AnalysisContext context)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO......</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>业务代码接口StudentService和实现类StudentServiceImpl</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">StudentService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">save</span><span class="params">(ArrayList&lt;Student&gt; students)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentServiceImpl</span> <span class="keyword">implements</span> <span class="title">StudentService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(ArrayList&lt;Student&gt; students)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;students in service = &quot;</span> + students);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Spring配置文件</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 组件扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.itheima&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>SpringMVC配置文件</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 组件扫描--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.itheima.demo&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- MVC文件上传多部件解析器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><p>编码读取上传的Excel文件</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebUploadAndDownload</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文件上传</span></span><br><span class="line"><span class="comment">     * 1. 编写excel中每一行对应的实体类</span></span><br><span class="line"><span class="comment">     * 2. 由于默认异步读取excel，所以需要逐行读取的回调监听器</span></span><br><span class="line"><span class="comment">     * 3. 开始读取Excel</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;upload&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">upload</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        ExcelReaderBuilder workBook = EasyExcel.read(file.getInputStream(), Student.class, studentReadListener);</span><br><span class="line">        workBook.sheet().doRead();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;success&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="3-2-文件下载"><a href="#3-2-文件下载" class="headerlink" title="3.2 文件下载"></a>3.2 文件下载</h4><p>编写实体类并创建对象以便写入表格</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExcelIgnore</span></span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生姓名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//@ExcelProperty(&#123;&quot;学员信息表&quot;, &quot;学生姓名&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ExcelProperty(&quot;学生姓名&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生性别</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//@ExcelProperty(&#123;&quot;学员信息表&quot;, &quot;学生性别&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ExcelProperty(&quot;学生性别&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 学生出生日期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">//@ExcelProperty(&#123;&quot;学员信息表&quot;, &quot;学生出生日期&quot;&#125;)</span></span><br><span class="line">    <span class="meta">@ExcelProperty(&quot;学生出生日期&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 循环生成10个学生对象</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> List&lt;Student&gt; <span class="title">initData</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ArrayList&lt;Student&gt; students = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        Student data = <span class="keyword">new</span> Student();</span><br><span class="line">        data.setName(<span class="string">&quot;杭州黑马学号0&quot;</span> + i);</span><br><span class="line">        data.setBirthday(<span class="keyword">new</span> Date());</span><br><span class="line">        data.setGender(<span class="string">&quot;男&quot;</span>);</span><br><span class="line">        students.add(data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>编码将数据写入到响应体实现下载</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebUploadAndDownload</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文件下载</span></span><br><span class="line"><span class="comment">     * 1. 编写实体类并创建对象以便写入表格</span></span><br><span class="line"><span class="comment">     * 2. 设置响应参数：文件的ContentType和文件名，同时设置编码避免乱码</span></span><br><span class="line"><span class="comment">     * 3. 直接写，内部会调用finish方法自动关闭OutputStream</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;download&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">download</span><span class="params">(HttpServletResponse response)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;application/vnd.ms-excel&quot;</span>);</span><br><span class="line">        response.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        <span class="comment">// 防止中文乱码 </span></span><br><span class="line">        String fileName = URLEncoder.encode(<span class="string">&quot;测试&quot;</span>, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment; filename*=UTF-8&#x27;&#x27;&quot;</span> + fileName + <span class="string">&quot;.xlsx&quot;</span>);</span><br><span class="line">        ExcelWriterBuilder workBook = EasyExcel.write(response.getOutputStream(), Student.class);</span><br><span class="line"></span><br><span class="line">        ExcelWriterSheetBuilder sheet = workBook.sheet(<span class="string">&quot;模板&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        sheet.doWrite(initData());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4、自定义单元格样式"><a href="#4、自定义单元格样式" class="headerlink" title="4、自定义单元格样式"></a>4、自定义单元格样式</h3><p>EasyExcel支持调整行高、列宽、背景色、字体大小等内容，但是控制方式与使用原生POI无异，比较繁琐，不建议使用。</p><p>但是可以使用模板填充的方式，向预设样式的表格中直接写入数据，写入数据的时候会保持原有样式。</p><h2 id="三、填充"><a href="#三、填充" class="headerlink" title="三、填充"></a>三、填充</h2><h3 id="1、填充一组数据"><a href="#1、填充一组数据" class="headerlink" title="1、填充一组数据"></a>1、填充一组数据</h3><h4 id="1-1-准备模板"><a href="#1-1-准备模板" class="headerlink" title="1.1 准备模板"></a>1.1 准备模板</h4><p>​    Excel表格中用{} 来表示包裹要填充的变量，如果单元格文本中本来就有<code>&#123;</code>、<code>&#125;</code>左右大括号，需要在括号前面使用斜杠转义<code>\&#123;</code>、<code>\&#125;</code>。</p><p>​    代码中被填充数据的实体对象的成员变量名或被填充map集合的key需要和Excel中被{}包裹的变量名称一致。</p><p><img src="imgs/simpleFillTemplate.png"></p><h4 id="1-2-封装数据"><a href="#1-2-封装数据" class="headerlink" title="1.2 封装数据"></a>1.2 封装数据</h4><p>编写封装填充数据的类或选用Map</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用实体类封装填充数据</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  实体中成员变量名称需要和Excel表各种&#123;&#125;包裹的变量名匹配</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FillData</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生成多组数据代码</span></span><br><span class="line"><span class="comment"> * / </span></span><br><span class="line"><span class="comment">    private static List&lt;FillData&gt; initFillData() &#123;</span></span><br><span class="line"><span class="comment">        ArrayList&lt;FillData&gt; fillDatas = new ArrayList&lt;FillData&gt;();</span></span><br><span class="line"><span class="comment">        for (int i = 0; i &lt; 10; i++) &#123;</span></span><br><span class="line"><span class="comment">            FillData fillData = new FillData();</span></span><br><span class="line"><span class="comment">            fillData.setName(&quot;杭州黑马0&quot; + i);</span></span><br><span class="line"><span class="comment">            fillData.setAge(10 + i);</span></span><br><span class="line"><span class="comment">            fillDatas.add(fillData);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        return fillDatas;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br></pre></td></tr></table></figure><h4 id="1-3-填充"><a href="#1-3-填充" class="headerlink" title="1.3 填充"></a>1.3 填充</h4><p>准备数据并填充到文件</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 加载模板</span></span><br><span class="line">    InputStream templateFile = FillData.class.getClassLoader().getResourceAsStream(</span><br><span class="line">            <span class="string">&quot;fill_data_template1&quot;</span> +</span><br><span class="line">            <span class="string">&quot;.xlsx&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 写入文件</span></span><br><span class="line">    String targetFileName = <span class="string">&quot;单组数据填充.xlsx&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 准备对象数据填充</span></span><br><span class="line">    FillData fillData = <span class="keyword">new</span> FillData();</span><br><span class="line">    fillData.setName(<span class="string">&quot;杭州黑马&quot;</span>);</span><br><span class="line">    fillData.setAge(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成工作簿对象</span></span><br><span class="line">    ExcelWriterBuilder workBookWriter = EasyExcel.write(targetFileName).withTemplate(templateFile);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取工作表并填充</span></span><br><span class="line">    <span class="comment">//workBookWriter.sheet().doFill(fillData);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用Map数据填充</span></span><br><span class="line">    HashMap&lt;String, String&gt; mapFillData = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    mapFillData.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;杭州黑马Map&quot;</span>);</span><br><span class="line">    mapFillData.put(<span class="string">&quot;age&quot;</span>, <span class="string">&quot;11&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取第一个工作表填充并自动关闭流</span></span><br><span class="line">    workBookWriter.sheet().doFill(mapFillData);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>1.4 效果</strong></p><h3 id="2、填充多组数据"><a href="#2、填充多组数据" class="headerlink" title="2、填充多组数据"></a>2、填充多组数据</h3><h4 id="2-1-准备模板"><a href="#2-1-准备模板" class="headerlink" title="2.1 准备模板"></a>2.1 准备模板</h4><p>​    Excel表格中用<code>&#123;.&#125; </code>来表示包裹要填充的变量，如果单元格文本中本来就有<code>&#123;</code>、<code>&#125;</code>左右大括号，需要在括号前面使用斜杠转义<code>\&#123;</code>  、<code>\&#125;</code>。</p><p>​    代码中被填充数据的实体对象的成员变量名或被填充map集合的key需要和Excel中被{}包裹的变量名称一致。</p><p><img src="imgs/complexFillTempl.png"></p><h4 id="2-2-封装数据"><a href="#2-2-封装数据" class="headerlink" title="2.2 封装数据"></a>2.2 封装数据</h4><p>编写封装填充数据的类或选用Map</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 同上</span></span><br></pre></td></tr></table></figure><h4 id="2-3-填充"><a href="#2-3-填充" class="headerlink" title="2.3 填充"></a>2.3 填充</h4><p>准备数据并填充到文件</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 加载模板</span></span><br><span class="line">    InputStream templateFile = FillData.class.getClassLoader().getResourceAsStream(</span><br><span class="line">            <span class="string">&quot;fill_data_template2.xlsx&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 写入文件</span></span><br><span class="line">    String targetFileName = <span class="string">&quot;多组数据填充.xlsx&quot;</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;FillData&gt; fillDatas = initData();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成工作簿对象</span></span><br><span class="line">    ExcelWriterBuilder workBookWriter =</span><br><span class="line">            EasyExcel.write(targetFileName).withTemplate(templateFile);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取第一个工作表填充并自动关闭流</span></span><br><span class="line">    workBookWriter.sheet().doFill(fillDatas);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3、组合填充"><a href="#3、组合填充" class="headerlink" title="3、组合填充"></a>3、组合填充</h3><h4 id="3-1-准备模板"><a href="#3-1-准备模板" class="headerlink" title="3.1 准备模板"></a>3.1 准备模板</h4><p>即有多组数据填充，又有单一数据填充，为了避免两者数据出现冲突覆盖的情况，在多组填充时需要通过<code>FillConfig</code>对象设置换行。</p><p><img src="imgs/mixFillTemplate.png" alt="1584207785924"></p><h4 id="3-2-封装数据"><a href="#3-2-封装数据" class="headerlink" title="3.2 封装数据"></a>3.2 封装数据</h4><p>编写封装填充数据的类或选用Map</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 同上</span></span><br></pre></td></tr></table></figure><h4 id="3-3-填充"><a href="#3-3-填充" class="headerlink" title="3.3 填充"></a>3.3 填充</h4><p>准备数据并填充到文件</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 加载模板</span></span><br><span class="line">    InputStream templateFile = FillData.class.getClassLoader().getResourceAsStream(</span><br><span class="line">            <span class="string">&quot;fill_data_template3.xlsx&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 目标文件</span></span><br><span class="line">    String targetFileName = <span class="string">&quot;组合数据填充.xlsx&quot;</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;FillData&gt; fillDatas = initData();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成工作簿对象</span></span><br><span class="line">    ExcelWriter excelWriter = EasyExcel.write(targetFileName).withTemplate(templateFile).build();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成工作表对象</span></span><br><span class="line">    WriteSheet writeSheet = EasyExcel.writerSheet().build();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 组合填充时，因为多组填充的数据量不确定，需要在多组填充完之后另起一行</span></span><br><span class="line">    FillConfig fillConfig = FillConfig.builder().forceNewRow(<span class="keyword">true</span>).build();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 填充并换行</span></span><br><span class="line">    excelWriter.fill(fillDatas, fillConfig, writeSheet);</span><br><span class="line"></span><br><span class="line">    HashMap&lt;String, String&gt; otherData = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    otherData.put(<span class="string">&quot;date&quot;</span>, <span class="string">&quot;2020-03-14&quot;</span>);</span><br><span class="line">    otherData.put(<span class="string">&quot;total&quot;</span>, <span class="string">&quot;100&quot;</span>);</span><br><span class="line">    excelWriter.fill(otherData, writeSheet);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭</span></span><br><span class="line">    excelWriter.finish();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4、水平填充"><a href="#4、水平填充" class="headerlink" title="4、水平填充"></a>4、水平填充</h3><h4 id="4-1-准备模板"><a href="#4-1-准备模板" class="headerlink" title="4.1 准备模板"></a>4.1 准备模板</h4><p>水平填充和多组填充模板一样，不一样的地方在于，填充时需要通过<code>FillConfig</code>对象设置水平填充。</p><p><img src="imgs/HORIZONTALFillTemplate.png"></p><h4 id="4-2-封装数据"><a href="#4-2-封装数据" class="headerlink" title="4.2 封装数据"></a>4.2 封装数据</h4><p>编写封装填充数据的类或选用Map</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 同上</span></span><br></pre></td></tr></table></figure><h4 id="4-3-填充"><a href="#4-3-填充" class="headerlink" title="4.3 填充"></a>4.3 填充</h4><p>准备数据并填充到文件</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 加载模板</span></span><br><span class="line">    InputStream templateFile = FillData.class.getClassLoader().getResourceAsStream(</span><br><span class="line">            <span class="string">&quot;fill_data_template4.xlsx&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 写入文件</span></span><br><span class="line">    String targetFileName = <span class="string">&quot;easyExcelDemo\\水平数据填充.xlsx&quot;</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;FillData&gt; fillDatas = initData();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成工作簿对象</span></span><br><span class="line">    ExcelWriter excelWriter = EasyExcel.write(targetFileName).withTemplate(templateFile).build();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 生成工作表对象</span></span><br><span class="line">    WriteSheet writeSheet = EasyExcel.writerSheet().build();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 组合填充时，因为多组填充的数据量不确定，需要在多组填充完之后另起一行</span></span><br><span class="line">    FillConfig fillConfig = FillConfig.builder().direction(WriteDirectionEnum.HORIZONTAL).build();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 填充</span></span><br><span class="line">    excelWriter.fill(fillDatas, fillConfig, writeSheet);</span><br><span class="line"></span><br><span class="line">    HashMap&lt;String, String&gt; otherData = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">    otherData.put(<span class="string">&quot;date&quot;</span>, <span class="string">&quot;2020-03-14&quot;</span>);</span><br><span class="line">    otherData.put(<span class="string">&quot;total&quot;</span>, <span class="string">&quot;100&quot;</span>);</span><br><span class="line">    excelWriter.fill(otherData, writeSheet);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭</span></span><br><span class="line">    excelWriter.finish();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5、-注意事项"><a href="#5、-注意事项" class="headerlink" title="5、 注意事项"></a>5、 注意事项</h3><p>​    为了节省内存，所以没有采用把整个文档在内存中组织好之后再整体写入到文件的做法，而是采用的是一行一行写入的方式，不能实现删除和移动行，也不支持备注写入。多组数据写入的时候，如果需要新增行，只能在最后一行增加，不能在中间位置添加。</p><h3 id="6、填充综合练习"><a href="#6、填充综合练习" class="headerlink" title="6、填充综合练习"></a>6、填充综合练习</h3><p>见<code>report_template.xlsx</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * reprot综合练习</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test06</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    InputStream templateInputStream = <span class="keyword">this</span>.getClass().getClassLoader().getResourceAsStream(</span><br><span class="line">            <span class="string">&quot;report_template.xlsx&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 目标文件</span></span><br><span class="line">    String targetFile = <span class="string">&quot;模板写入6-report.xlsx&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 写入workbook对象</span></span><br><span class="line"></span><br><span class="line">    ExcelWriter workBook =</span><br><span class="line">            EasyExcel.write(targetFile, FillData.class).withTemplate(templateInputStream).build();</span><br><span class="line"></span><br><span class="line">    WriteSheet sheet = EasyExcel.writerSheet().build();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 填充配置，开启组合填充换行</span></span><br><span class="line">    <span class="comment">//FillConfig fillConfig = FillConfig.builder().forceNewRow(true).build();</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ****** 准备数据 *******</span></span><br><span class="line">    <span class="comment">// 日期</span></span><br><span class="line">    HashMap&lt;String, String&gt; dateMap = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">    dateMap.put(<span class="string">&quot;date&quot;</span>, <span class="string">&quot;2020-03-16&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 总会员数</span></span><br><span class="line">    HashMap&lt;String, String&gt; totalCountMap = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">    dateMap.put(<span class="string">&quot;totalCount&quot;</span>, <span class="string">&quot;1000&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增员数</span></span><br><span class="line">    HashMap&lt;String, String&gt; increaseCountMap = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">    dateMap.put(<span class="string">&quot;increaseCount&quot;</span>, <span class="string">&quot;100&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 本周新增会员数</span></span><br><span class="line">    HashMap&lt;String, String&gt; increaseCountWeekMap = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">    dateMap.put(<span class="string">&quot;increaseCountWeek&quot;</span>, <span class="string">&quot;50&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 本月新增会员数</span></span><br><span class="line">    HashMap&lt;String, String&gt; increaseCountMonthMap = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">    dateMap.put(<span class="string">&quot;increaseCountMonth&quot;</span>, <span class="string">&quot;100&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 新增会员数据</span></span><br><span class="line">    List&lt;Student&gt; students = initData();</span><br><span class="line">    <span class="comment">// **** 准备数据结束****</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 写入统计数据</span></span><br><span class="line">    workBook.fill(dateMap, sheet);</span><br><span class="line">    workBook.fill(totalCountMap, sheet);</span><br><span class="line">    workBook.fill(increaseCountMap, sheet);</span><br><span class="line">    workBook.fill(increaseCountWeekMap, sheet);</span><br><span class="line">    workBook.fill(increaseCountMonthMap, sheet);</span><br><span class="line">    <span class="comment">// 写入新增会员</span></span><br><span class="line">    workBook.fill(students, sheet);</span><br><span class="line">    workBook.finish();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="四、常用API及注解"><a href="#四、常用API及注解" class="headerlink" title="四、常用API及注解"></a>四、常用API及注解</h2><h3 id="1、常用类"><a href="#1、常用类" class="headerlink" title="1、常用类"></a>1、常用类</h3><ul><li><strong>EasyExcel</strong> 入口类，用于构建各种对象、开始各种操作；</li><li><strong>ExcelReaderBuilder</strong> 构建出一个ReadWorkbook对象，即一个工作簿对象，对应的是一个Excel文件；</li><li><strong>ExcelWriterBuilder</strong> 构建出一个WriteWorkbook对象，即一个工作簿对象，对应的是一个Excel文件；</li><li><strong>ExcelReaderSheetBuilder</strong> 构建出一个ReadSheet对象，即一个工作表的对象，对应的Excel中的每个sheet，一个工作簿可以有多个工作表；</li><li><strong>ExcelWriterSheetBuilder</strong> 构建出一WriteSheet对象，即一个工作表的对象，对应的Excel中的每个sheet，一个工作簿可以有多个工作表；</li><li><strong>ReadListener</strong> 在每一行读取完毕后都会调用ReadListener来处理数据，我们可以把调用service的代码可以写在其<strong>invoke</strong>方法内部；</li><li><strong>WriteHandler</strong> 在每一个操作包括创建单元格、创建表格等都会调用WriteHandler来处理数据，对使用者透明不可见；</li><li><strong>所有配置都是继承的</strong> Workbook的配置会被Sheet继承。所以在用EasyExcel设置参数的时候，在EasyExcel…sheet()方法之前作用域是整个workBook的所有sheet，之后针对单个sheet。</li></ul><h3 id="2、读取时的注解"><a href="#2、读取时的注解" class="headerlink" title="2、读取时的注解"></a>2、读取时的注解</h3><h4 id="ExcelProperty"><a href="#ExcelProperty" class="headerlink" title="@ExcelProperty"></a>@ExcelProperty</h4><p><strong>使用位置</strong>：标准作用在成员变量上</p><p><strong>可选属性：</strong></p><table><thead><tr><th>属性名</th><th align="left">含义</th><th>说明</th></tr></thead><tbody><tr><td>index</td><td align="left">对应Excel表中的列数</td><td>默认-1，建议指定时从0开始</td></tr><tr><td>value</td><td align="left">对应Excel表中的列头</td><td></td></tr><tr><td>converter</td><td align="left">成员变量转换器</td><td>自定义转换器需要实Converter接口</td></tr></tbody></table><p><strong>使用效果</strong>：index属性可以指定当前字段对应excel中的哪一列，可以根据列名value去匹配，也可以不写。</p><p>如果不使用@ExcelProperty注解，成员变量从上到下的顺序，对应表格中从左到右的顺序；</p><p><strong>使用建议：</strong>要么全部不写，要么全部用index，要么全部用value去匹配，尽量不要三个混着用。</p><p><strong>代码演示：</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 修改成员变量顺序读取Excel表格</span></span><br><span class="line"><span class="comment">// 2. 修改index属性值读取Excel表格</span></span><br><span class="line"><span class="comment">// 3. 修改value属性值读取Excel表格</span></span><br></pre></td></tr></table></figure><h4 id="ExcelIgnore"><a href="#ExcelIgnore" class="headerlink" title="@ExcelIgnore"></a>@ExcelIgnore</h4><p>标注在成员变量上，默认所有字段都会和excel去匹配，加了这个注解会忽略该字段</p><p> <strong>代码演示：</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 4. 忽略id成员变量值读取Excel表格</span></span><br></pre></td></tr></table></figure><h4 id="DateTimeFormat"><a href="#DateTimeFormat" class="headerlink" title="@DateTimeFormat"></a>@DateTimeFormat</h4><p>标注在成员变量上，日期转换，代码中用<code>String类型的成员变量</code>去接收<code>excel中日期格式的数据</code>会调用这个注解。里面的<code>value</code>参照<code>java.text.SimpleDateFormat</code></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 5. 按照指定的格式写入Excel内容</span></span><br></pre></td></tr></table></figure><h4 id="NumberFormat"><a href="#NumberFormat" class="headerlink" title="@NumberFormat"></a>@NumberFormat</h4><p>标注在成员变量上，数字转换，代码中用<code>String类型的成员变量</code>去接收<code>excel数字格式的数据</code>会调用这个注解。里面的<code>value</code>参照<code>java.text.DecimalFormat</code></p><h4 id="ExcelIgnoreUnannotated"><a href="#ExcelIgnoreUnannotated" class="headerlink" title="@ExcelIgnoreUnannotated"></a>@ExcelIgnoreUnannotated</h4><p>标注在类上。</p><p>不标注该注解时，默认类中所有成员变量都会参与读写，无论是否在成员变量上加了<code>@ExcelProperty</code> 的注解。</p><p>标注该注解后，类中的成员变量如果没有标注<code>@ExcelProperty</code> 注解将不会参与读写。</p><h3 id="3、-读取时通用参数"><a href="#3、-读取时通用参数" class="headerlink" title="3、 读取时通用参数"></a>3、 读取时通用参数</h3><p><code>ReadWorkbook</code>,<code>ReadSheet</code> 都会有的参数，如果为空，默认使用上级。</p><ul><li><p><code>converter</code> 转换器，默认加载了很多转换器。也可以自定义。</p></li><li><p><code>readListener</code> 监听器，在读取数据的过程中会不断的调用监听器。</p></li><li><p><code>headRowNumber</code> 指定需要读表格的 列头行数。默认有一行头，也就是认为第二行开始起为数据。</p></li><li><p><code>head</code> 与<code>clazz</code>二选一。读取文件头对应的列表，会根据列表匹配数据。建议使用class，就是文件中每一行数据对应的代码中的实体类型。</p></li><li><p><code>clazz</code> 与<code>head</code>二选一。读取文件的头对应的class，也可以使用注解。如果两个都不指定，则会读取全部数据。</p></li><li><p><code>autoTrim</code> 字符串、表头等数据自动trim</p></li><li><p><code>password</code> 读的时候是否需要使用密码</p></li></ul><h3 id="4、ReadWorkbook（工作簿对象）参数"><a href="#4、ReadWorkbook（工作簿对象）参数" class="headerlink" title="4、ReadWorkbook（工作簿对象）参数"></a>4、ReadWorkbook（工作簿对象）参数</h3><ul><li><code>excelType</code> 当前excel的类型，读取时会自动判断，无需设置。</li><li><code>inputStream</code> 与<code>file</code>二选一。建议使用file。</li><li><code>file</code> 与<code>inputStream</code>二选一。读取文件的文件。</li><li><code>autoCloseStream</code> 自动关闭流。</li><li><code>readCache</code> 默认小于5M用 内存，超过5M会使用 <code>EhCache</code>，不建议使用这个参数。</li><li><code>useDefaultListener</code> <code>@since 2.1.4</code> 默认会加入<code>ModelBuildEventListener</code> 来帮忙转换成传入<code>class</code>的对象，设置成<code>false</code>后将不会协助转换对象，自定义的监听器会接收到<code>Map&lt;Integer,CellData&gt;</code>对象，如果还想继续接听到<code>class</code>对象，请调用<code>readListener</code>方法，加入自定义的<code>beforeListener</code>、 <code>ModelBuildEventListener</code>、 自定义的<code>afterListener</code>即可。</li></ul><h3 id="5、ReadSheet（工作表对象）参数"><a href="#5、ReadSheet（工作表对象）参数" class="headerlink" title="5、ReadSheet（工作表对象）参数"></a>5、ReadSheet（工作表对象）参数</h3><ul><li><code>sheetNo</code> 需要读取Sheet的编号，建议使用这个来指定读取哪个Sheet</li><li><code>sheetName</code> 根据名字去匹配Sheet，excel 2003不支持根据名字去匹配</li></ul><h3 id="6、写入时的注解注解"><a href="#6、写入时的注解注解" class="headerlink" title="6、写入时的注解注解"></a>6、写入时的注解注解</h3><h4 id="ExcelProperty-1"><a href="#ExcelProperty-1" class="headerlink" title="@ExcelProperty"></a>@ExcelProperty</h4><p><strong>使用位置</strong>：标准作用在成员变量上</p><p><strong>可选属性：</strong></p><table><thead><tr><th>属性名</th><th align="left">含义</th><th>说明</th></tr></thead><tbody><tr><td>index</td><td align="left">对应Excel表中的列数</td><td>默认-1，指定时建议从0开始</td></tr><tr><td>value</td><td align="left">对应Excel表中的列头</td><td></td></tr><tr><td>converter</td><td align="left">成员变量转换器</td><td>自定义转换器需要实Converter接口</td></tr></tbody></table><p><strong>使用效果</strong>：<code>index</code> 指定写到第几列，如果不指定则根据成员变量位置排序；</p><p>​                     <code>value</code>指定写入的列头，如果不指定则使用成员变量的名字作为列头；</p><p>​                    如果要设置复杂的头，可以为value指定多个值。</p><p><strong>代码演示：</strong></p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 5. 为《杭州黑马学员表.xlsx》文件中学生信息设置一个统一的表头“杭州黑马学员信息表”</span></span><br></pre></td></tr></table></figure><h4 id="其他注解："><a href="#其他注解：" class="headerlink" title="其他注解："></a>其他注解：</h4><p>基本和读取时一致</p><ul><li><p>@ContentRowHeight()    标注在类上或属性上，指定内容行高</p></li><li><p>@HeadRowHeight()  标注在类上或属性上，指定列头行高</p></li><li><p>@ColumnWidth() 标注在类上或属性上，指定列宽</p></li><li><p>ExcelIgnore` 默认所有字段都会写入excel，这个注解会忽略这个字段</p></li><li><p><code>DateTimeFormat</code> 日期转换，将<code>Date</code>写到excel会调用这个注解。里面的<code>value</code>参照<code>java.text.SimpleDateFormat</code></p></li><li><p><code>NumberFormat</code> 数字转换，用<code>Number</code>写excel会调用这个注解。里面的<code>value</code>参照<code>java.text.DecimalFormat</code></p></li><li><p><code>ExcelIgnoreUnannotated</code> 默认不加 <code>ExcelProperty</code> 的注解的都会参与读写，加了不会参与</p></li></ul><h3 id="7、写入时通用参数"><a href="#7、写入时通用参数" class="headerlink" title="7、写入时通用参数"></a>7、写入时通用参数</h3><p><code>WriteWorkbook</code>、<code>WriteSheet</code>都会有的参数，如果为空，默认使用上级。</p><ul><li><p><code>converter</code> 转换器，默认加载了很多转换器。也可以自定义。</p></li><li><p><code>writeHandler</code> 写的处理器。可以实现<code>WorkbookWriteHandler</code>,<code>SheetWriteHandler</code>,<code>RowWriteHandler</code>,<code>CellWriteHandler</code>，在写入excel的不同阶段会调用，对使用者透明不可见。</p></li><li><p><code>relativeHeadRowIndex</code> 距离多少行后开始。也就是开头空几行</p></li><li><p><code>needHead</code> 是否导出头</p></li><li><p><code>head</code> 与<code>clazz</code>二选一。写入文件的头列表，建议使用class。</p></li><li><p><code>clazz</code> 与<code>head</code>二选一。写入文件的头对应的class，也可以使用注解。</p></li><li><p><code>autoTrim</code>  字符串、表头等数据自动trim</p></li></ul><h3 id="8、WriteWorkbook（工作簿对象）参数"><a href="#8、WriteWorkbook（工作簿对象）参数" class="headerlink" title="8、WriteWorkbook（工作簿对象）参数"></a>8、WriteWorkbook（工作簿对象）参数</h3><ul><li><p><code>excelType</code> 当前excel的类型，默认为<code>xlsx</code></p></li><li><p><code>outputStream</code> 与<code>file</code>二选一。写入文件的流</p></li><li><p><code>file</code> 与<code>outputStream</code>二选一。写入的文件</p></li><li><p><code>templateInputStream</code> 模板的文件流</p></li><li><p><code>templateFile</code> 模板文件</p></li><li><p><code>autoCloseStream</code> 自动关闭流。</p></li><li><p><code>password</code>  写的时候是否需要使用密码</p></li><li><p><code>useDefaultStyle</code> 写的时候是否是使用默认头</p></li></ul><h3 id="9、WriteSheet（工作表对象）参数"><a href="#9、WriteSheet（工作表对象）参数" class="headerlink" title="9、WriteSheet（工作表对象）参数"></a>9、WriteSheet（工作表对象）参数</h3><ul><li><p><code>sheetNo</code> 需要写入的编号。默认0</p></li><li><p><code>sheetName</code> 需要些的Sheet名称，默认同sheetNo</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工作记录" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>ZJRC工作记录</title>
    <link href="http://tomasonl.github.io/2021/06/18/ZJRC%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    <id>http://tomasonl.github.io/2021/06/18/ZJRC%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/</id>
    <published>2021-06-18T09:03:19.000Z</published>
    <updated>2021-06-23T01:36:26.657Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Redis健康检查"><a href="#Redis健康检查" class="headerlink" title="Redis健康检查"></a>Redis健康检查</h1><p>SpringBoot监控Actuator，关闭redis监测<br>当我们导入了spring-boot-starter-actuator这个依赖后, SpringBoot会默认去监测一些信息。其中就包括redis、 会根据redis的默认初始配置， localhost:6379 尝试连接redis。如果我们没有用到redis， 启动就会报错</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">      &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">      &lt;artifactId&gt;spring-boot-starter-actuator&lt;&#x2F;artifactId&gt;</span><br><span class="line">      &lt;version&gt;2.2.1.RELEASE&lt;&#x2F;version&gt;</span><br><span class="line">   &lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure><p>启动会报错</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">[WARN ] 2020-05-28 09:28:17.179 [registrationTask1] de.codecentric.boot.admin.client.registration.ApplicationRegistrator - Failed to register application as Application(name&#x3D;admin-client, managementUrl&#x3D;http:&#x2F;&#x2F;Gordon-pc:8768&#x2F;actuator, healthUrl&#x3D;http:&#x2F;&#x2F;Gordon-pc:8768&#x2F;actuator&#x2F;health, serviceUrl&#x3D;http:&#x2F;&#x2F;Gordon-pc:8768&#x2F;) at spring-boot-admin ([http:&#x2F;&#x2F;localhost:8769&#x2F;instances]): I&#x2F;O error on POST request for &quot;http:&#x2F;&#x2F;localhost:8769&#x2F;instances&quot;: Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect. Further attempts are logged on DEBUG level</span><br><span class="line">[WARN ] 2020-05-28 09:28:19.075 [boundedElastic-1] org.springframework.boot.actuate.redis.RedisReactiveHealthIndicator - Redis health check failed</span><br><span class="line">org.springframework.data.redis.RedisConnectionFailureException: Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379</span><br><span class="line">at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getNativeConnection(LettuceConnectionFactory.java:1200)</span><br><span class="line">at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory$SharedConnection.getConnection(LettuceConnectionFactory.java:1179)</span><br><span class="line">at org.springframework.data.redis.connection.lettuce.LettuceConnectionFactory.getSharedReactiveConnection(LettuceConnectionFactory.java:952)</span><br></pre></td></tr></table></figure><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><ul><li>Bean<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Component(&quot;redisHealthIndicator&quot;)</span><br><span class="line">public class RedisHealthIndicator implements HealthIndicator &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Health health() &#123;</span><br><span class="line">        return Health.up().build();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>配置文件<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">management:</span><br><span class="line">  health:</span><br><span class="line">    redis:</span><br><span class="line">      enabled: false</span><br></pre></td></tr></table></figure></li></ul><h1 id="类型转换问题"><a href="#类型转换问题" class="headerlink" title="类型转换问题"></a>类型转换问题</h1><p>如果是有符号的 Bigint(20) 取值范围是-9223372036854775808~9223372036854775807，与 Java中的java.lang.Long的取值范围是一致的，而如果是无符号的Bigint(20),其取值范围是0 ~ 18446744073709551615，其中一般超出了Long的取值范围，会被映射为BigInteger。</p><h1 id="java-sql-SQLFeatureNotSupportedException"><a href="#java-sql-SQLFeatureNotSupportedException" class="headerlink" title="java.sql.SQLFeatureNotSupportedException"></a>java.sql.SQLFeatureNotSupportedException</h1><p>3.1.0之前版本没问题，针对3.1.1以及后续版本出现上述问题</p><p>现象： 集成druid数据源，使用3.1.0之前版本没问题，升级mp到3.1.1+后，运行时报错:java.sql.SQLFeatureNotSupportedException</p><p>原因： mybatis plus 3.1.1+使用了新版jdbc，LocalDateTime等新日期类型处理方式升级，但druid在1.1.21版本之前不支持<br><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9tbWJpei5xcGljLmNuL21tYml6X3BuZy95WTlteWZDUGdTNzRkUGtlNzlpYW50djN4WjV1RUpvanpOV0VjaWFEMVdMUnNYVXNwd242bU5XdlRvaWFiNU9UNm80NzVNY050bGliNjRWelBscmlheHlpYUpwZy82NDA?x-oss-process=image/format,png"><br>解决方案： 1. 升级druid到1.1.21及其以上，解决这个问题</p><p>2.将mybatis-plus的版本降至3.2.0或以下</p><p>3.将LocalDateTime类型更换成Date</p><p>4.添加pom依赖（推荐）</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.mybatis&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis-typehandlers-jsr310&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0.2&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure><h1 id="在Java代码规范中为什么不能出现System-out-println"><a href="#在Java代码规范中为什么不能出现System-out-println" class="headerlink" title="在Java代码规范中为什么不能出现System.out.println()"></a>在Java代码规范中为什么不能出现System.out.println()</h1><p>初学者一般在开发中或者调试bug的时候，都会习惯性的使用System.out.println语句，输出到控制台中，观察数据是否正常。开发或者调试完毕，很可能就忘记删除，直接就发布到生产中去了。</p><p>写了测试代码，循环10w次的打印时间需要耗时408毫秒，没有打印的循环几乎等于0毫秒。<br>原理分析</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public void println(String x) &#123;</span><br><span class="line">    synchronized (this) &#123;</span><br><span class="line">        print(x);</span><br><span class="line">        newLine();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>从System.out.println的源代码，我们可以看到它在一开始就用synchronized同步锁给锁起来了，所以System.out.println是一个同步方法，在高并发的情况下，会严重影响性能。<br>总结<br>在日常开发或者调试的过程中，尽量使用log4j2或者logback这些异步的方法，进行日志的统一收集，禁止使用System.out.println。项目上线前也要进行全局搜索，防止有人误提交带有System.out.println的代码。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工作记录" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>Confluence</title>
    <link href="http://tomasonl.github.io/2021/05/24/Confluence/"/>
    <id>http://tomasonl.github.io/2021/05/24/Confluence/</id>
    <published>2021-05-24T06:46:03.000Z</published>
    <updated>2021-05-24T07:18:38.257Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Confluence指导教程"><a href="#Confluence指导教程" class="headerlink" title="Confluence指导教程"></a>Confluence指导教程</h1><p>版本：Atlassian Confluence 6.3.1</p><h2 id="一、Confluence简介"><a href="#一、Confluence简介" class="headerlink" title="一、Confluence简介"></a>一、Confluence简介</h2><h3 id="1-1、能做什么？"><a href="#1-1、能做什么？" class="headerlink" title="1.1、能做什么？"></a>1.1、能做什么？</h3><p>Confluence是一个企业级的Wiki软件，可用于在企业、部门、团队内部进行信息共享和协同编辑。</p><p>团队将日常的工作任务进度管理、技术知识分享、开发文档、操作手册、文档附件都放置入Confluence中进行统一管理，富文本编辑器使文档内容支持更加丰富，（一般confluence配套使用jira，jira专注于项目bug管理，更多请【百度jira】）</p><h3 id="1-2、基础概念"><a href="#1-2、基础概念" class="headerlink" title="1.2、基础概念"></a>1.2、基础概念</h3><p>Confluence的使用并不复杂，只需掌握如下几个基础概念。空间（Space）空间是Confluence系统中的一个区域，用于存储wiki页面，并可实现对空间中的所有文档进行统一的权限管理。<br>通常，我们可以针对每个项目单独创建一个空间，然后将与该项目相关的文档信息放置到该空间中，并只对项目成员开设访问/编辑权限。<br>除了项目空间，每个成员都有一个个人空间。平时成员可以将工作总结或笔记等文档放置到自己的空间中；对于对团队有帮助的文档，就可以将文档移动至团队项目空间中。</p><ul><li>Dashboard</li></ul><p>Dashboard是Confluence系统的主页，在Dashboard界面中包含了Confluence站点中的所有空间列表，以及最近更新内容的列表。</p><ul><li>页面（Page）</li></ul><p>在Confluence系统中，页面是存储和共享信息的主要方式。<br>页面可以互相链接、连接、组织和访问，并以树状结构进行组织，放置于空间之中。页面遵循所见即所得的编辑方式，操作上简单易用。更强大的地方在于，页面支持大量的内容展现形式，除了富文本文档外，还包括图表、视频、附件（可预览）、流程图、公式等等；如果还不够，还可以通过海量的第三方插件进行扩展。<br>在页面中可以通过@其它成员，通知相关成员查看文档。文档保存成功后，被@的成员就会收到邮件，并可根据邮件中的链接访问到该文档，然后进行评论或者协同编辑。</p><ul><li>模板（template）</li></ul><p>创建页面时除了采用空白文档，也可以选择模板。模板是在空白文档的基础上，根据特定需求添加了一些文档要素，可辅助用户更好更快地创建文档。<br>Confluence内置了大量的模板，可辅助用于项目工作的各个环节，包括产品需求、会议记录、决策记录、指导手册（How-to）、回顾记录、工作计划、任务报告等等。并且由于Confluence和JIRA是同一家公司的产品，在Confluence中可以和JIRA进行无缝衔接，实现对产品质量实现更好的展现。<br>如果对Confluence自带的模板不满意，还可以对模板进行调整，或者根据自己的需求创建其它类型的模板。</p><ul><li>权限（Permission）</li></ul><p>在安全性方面，Confluence具有完善和精细的权限控制，可以很好地控制用户在Wiki中创建、编辑内容和添加注释。<br>权限控制分3个维度，分别是团队（Group），个人（Individual Users），匿名用户（Anonymous）。<br>使用团队级的权限控制时，需要在Confluence服务器中对公司员工进行分组，好处在于配置比较方便，只需要对整个团队进行统一的权限配置。<br>但在实际项目中，经常会存在同一个项目包含多个跨团队成员的情况，这个时候就不适合采用团队权限配置方式，只能采用逐个添加成员的方式，并对各个成员分别配置权限。<br>另外一种情况，就是对于未登录的用户，以及项目成员以外的用户，可以开设部分权限，例如只读（View）。</p><h2 id="二、常见操作"><a href="#二、常见操作" class="headerlink" title="二、常见操作"></a>二、常见操作</h2><p>熟悉了Confluence的基础概念，基本上就可以摸索着对Confluence进行上手了。不过，为了减少摸索时间，在这里我再将Confluence中的常用操作进行说明。</p><h3 id="2-1、文档查看与操作"><a href="#2-1、文档查看与操作" class="headerlink" title="2.1、文档查看与操作"></a>2.1、文档查看与操作</h3><p>用户账户登录首页-&gt;选择要查看的【空间】-&gt;【****开发项目管理】-&gt;【项目管理】-&gt;选择对应的项目→查看您想看的文档<br><img src='https://img-blog.csdnimg.cn/20191115141617777.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE0NTYzMzc=,size_16,color_FFFFFF,t_70'></p><h3 id="2-2、添加文档"><a href="#2-2、添加文档" class="headerlink" title="2.2、添加文档"></a>2.2、添加文档</h3><p>在Confluence中文件以树状结构进行组织。<br>推荐的创建方式是，先进入父目录的页面，然后再点击【Create】进行创建。在创建文档页面中，可以看到新建文档的“父级”，表示新文档创建后将位于“父级”文件的下一个层级中。</p><p>在新建文档时，需要选择文档模板。这个就根据文档的实际类型或用途进行选择即可，如果觉得都不合适，就选择“Blank page”。<br><img src='https://img-blog.csdnimg.cn/2019111514172047.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE0NTYzMzc=,size_16,color_FFFFFF,t_70'></p><h3 id="2-3、编写文档"><a href="#2-3、编写文档" class="headerlink" title="2.3、编写文档"></a>2.3、编写文档</h3><p>在编写文档时，页面遵循所见即所得的编辑方式，基本上跟在MS Word中的操作类似。<br>Confluence也集成了许多编辑工具，可以很方便地插入图表、链接、附件、代办列表等等。如果还不满足需求，可以点击【插入】-&gt;【其他宏】，查找更多的扩展插件。<br>2.3.1、 选择【格式化】-&gt;【代码块】-&gt;【语法高亮】-&gt;自由选择风格【选择sql】-&gt;自由选择主题【选择】-&gt;【emacs】,接着确认，即可插入sql<br>2.3.2、 插入表格，插入开发状态颜色，点击【+】-&gt;选择【状态】<br>2.3.3、 插入图片和附件 选择【插入文件和图片】<br>例如，Confluence默认是不支持Markdown编辑模式的，如果想采用Markdown来编写文档，就可以通过上述方式到插件市场寻找Markdown的插件。<br>不过根据实践发现，当前Confluence的Markdown插件支持的还不够好，使用体验上不尽如人意。比较推荐的做法，还是在单独的Markdown编辑器上采用markdown语法进行编辑，编辑完成后进行预览，然后将渲染后的文档内容复制粘贴到Confluence中。<br>2.3.4、移动文档<br>很多时候我们需要调整目录结构，这就涉及到需要将文档移动到别的目录层级下。<br>操作方式如下：先进入到待移动的文档页面中，点击页面右上角的【…】-&gt;【移动】；<br>然后选择移动到新的目录即可。</p><h3 id="2-4、创建目录"><a href="#2-4、创建目录" class="headerlink" title="2.4、创建目录"></a>2.4、创建目录</h3><p>与创建文档方式一致，直接创建标题保存即可</p><h3 id="2-5、模板方式创建文档"><a href="#2-5、模板方式创建文档" class="headerlink" title="2.5、模板方式创建文档"></a>2.5、模板方式创建文档</h3><p>选择【以层级方式查看】-&gt;[模板]-&gt;【编辑】</p><p><a href="https://zhuanlan.zhihu.com/p/77064169">https://zhuanlan.zhihu.com/p/77064169</a></p><p>一. 搭建JAVA运行环境</p><ol><li>首先下载linux对应的安装包</li></ol><p>下载地址：<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html</a></p><ol start="2"><li>解压安装包jdk-8u201-linux-x64.tar.gz</li></ol><p>tar -zxvf jdk-8u201-linux-x64.tar.gz</p><ol start="3"><li>新建jdk目录</li></ol><p>cd /usr/lib<br>sudo mkdir jdk</p><ol start="4"><li>将解压的jdk文件复制到新建的/usr/lib/jdk目录下来</li></ol><p>sudo mv ~/liuq/wiki/new/jdk1.8.0_201 /usr/lib/jdk<br>执行命令后可到 usr/lib/jdk 目录下查看是否复制成功</p><ol start="5"><li>配置java环境变量<br>这里是将环境变量配置在etc/profile，即为所有用户配置JDK环境。<br>使用命令打开/etc/profile文件: sudo vi /etc/profile<br>在末尾添加以下几行文字：</li></ol><p>#set java env<br>export JAVA_HOME=/usr/lib/jdk/jdk1.8.0_201<br>export JRE_HOME=${JAVA_HOME}/jre<br>export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib<br>export PATH=${JAVA_HOME}/bin:$PATH<br>执行命令使修改立即生效: source /etc/profile</p><ol start="6"><li>配置软连接</li></ol><p>软连接相当于windows系统中的快捷键，部分软件可能会从/usr/bin目录下查找Java，因此添加该软连接防止其他软件查找不到的情况。<br>sudo update-alternatives –install /usr/bin/java java /usr/lib/jdk/jdk1.8.0_201/bin/java 300<br>sudo update-alternatives –install /usr/bin/javac javac /usr/lib/jdk/jdk1.8.0_201/bin/javac 300 </p><p>7.测试安装是否成功<br>在终端输入，出现版本号则表示安装成功</p><p>java -version<br>bobo@Xixi:<del>$ java -version<br>java version “1.8.0_201”<br>Java(TM) SE Runtime Environment (build 1.8.0_201-b09)<br>Java HotSpot(TM) 64-Bit Server VM (build 25.201-b09, mixed mode)<br>bobo@Xixi:</del>$</p><p>二. 安装mysql数据库</p><ol><li>安装mysql</li></ol><p>bobo@Xixi:~$ sudo apt-get install mysql-client mysql-server</p><p>安装过程中请输入数据库密码！注意设置了不要忘了!<br>MySQL安装后的目录结构分析(此结构只针对于使用apt-get install 在线安装情况)：<br>数据库存放目录： /var/lib/mysql/<br>相关配置文件存放目录： /usr/share/mysql<br>相关命令存放目录： /usr/bin(mysqladmin mysqldump等命令)<br>启动脚步存放目录： /etc/rc.d/init.d/</p><ol start="2"><li>启动/停止/重启mysql</li></ol><p>bobo@Xixi:<del>$ sudo service mysql start<br>bobo@Xixi:</del>$ sudo service mysql stop<br>bobo@Xixi:~$ sudo service mysql restart</p><ol start="3"><li><p>检查是否安装成功<br>sudo netstat -tap | grep mysql<br>通过上述命令检查之后，如果看到有mysql 的socket处于 listen 状态则表示安装成功。</p></li><li><p>登陆mysql数据库命令<br>mysql -u root -p #登录mysql数据库，登录密码是：xxxxx</p></li></ol><p>-u 表示选择登陆的用户名，<br>-p 表示登陆的用户密码，上面命令输入之后会提示输入密码，此时输入密码就可以登录到mysql。</p><p>$ bobo@Xixi:~/x/wiki$ mysql -u root -p #登录密码是：xxxxxx<br>Enter password:<br>Welcome to the MySQL monitor. Commands end with ; or \g.<br>Your MySQL connection id is 4<br>Server version: 5.7.25-0ubuntu0.16.04.2 (Ubuntu)<br>Copyright (c) 2000, 2019, Oracle and/or its affiliates. All rights reserved.<br>Oracle is a registered trademark of Oracle Corporation and/or its<br>affiliates. Other names may be trademarks of their respective<br>owners.<br>Type ‘help;’ or ‘\h’ for help. Type ‘\c’ to clear the current input statement.<br>mysql&gt;</p><p>在 mysql 里为Confluence创建对应的数据库、用户名和密码</p><p>#1.创建数据库<br>mysql&gt; create database confluence default character set utf8 collate utf8_bin;<br>Query OK, 1 row affected (0.00 sec)</p><p>#2.添加用户并授权：<br>mysql&gt; grant all on confluence.* to ‘confluence’@’%’ identified by ‘passwd111111’;<br>Query OK, 0 rows affected (0.00 sec)<br>mysql&gt; grant all on confluence.* to confluence@”localhost” identified by “passwd111111”;<br>Query OK, 0 rows affected, 1 warning (0.00 sec)</p><p>#3.刷新数据库权限：<br>mysql&gt; FLUSH PRIVILEGES;<br>Query OK, 0 rows affected (0.01 sec)</p><p>Confluence首次连接mysql的时候（使用上面mysql里面授权的信息连接，即用户名:confluence，密码:confluencepasswd），可能有点慢，耐心等待～</p><p>密码错误提示如下：</p><p>bobo@Xixi:~/xxxx/wiki$ mysql -u root -p<br>Enter password:<br>ERROR 1045 (28000): Access denied for user ‘root’@’localhost’ (using password: YES)</p><ol start="5"><li>列出来mysql的进程</li></ol><p>ps -A | grep -i mysql<br>sudo kill -9 ID #杀死 列出来的进程</p><ol start="6"><li>查看mysql的状态</li></ol><p>sudo netstat -tap | grep mysql</p><ol start="7"><li>远程登录mysql</li></ol><p>mysql 主机名 -u root -p</p><ol start="8"><li>查看数据库</li></ol><p>mysql&gt; show databases;<br>+——————–+<br>| Database |<br>+——————–+<br>| information_schema |<br>| confluence |<br>| mysql |<br>| performance_schema |<br>| sys |<br>+——————–+<br>5 rows in set (0.03 sec)</p><ol start="9"><li>修改 MySQL 的管理员密码</li></ol><p>sudo mysqladmin -u root password newpassword</p><ol start="10"><li>显示数据库的字符语言包</li></ol><p>mysql&gt; show variables like “%character%”;show variables like “%collation%”;<br>+————————–+—————————-+<br>| Variable_name | Value |<br>+————————–+—————————-+<br>| character_set_client | utf8 |<br>| character_set_connection | utf8 |<br>| character_set_database | utf8 |<br>| character_set_filesystem | binary |<br>| character_set_results | utf8 |<br>| character_set_server | utf8 |<br>| character_set_system | utf8 |<br>| character_sets_dir | /usr/share/mysql/charsets/ |<br>+————————–+—————————-+<br>8 rows in set (0.01 sec)<br>+———————-+—————–+<br>| Variable_name | Value |<br>+———————-+—————–+<br>| collation_connection | utf8_general_ci |<br>| collation_database | utf8_general_ci |<br>| collation_server | utf8_general_ci |<br>+———————-+—————–+<br>3 rows in set (0.00 sec)</p><p>三. 安装confluence</p><p>（一）下载数据包<br>atlassian-confluence-6.3.1-x64.bin<br>链接：<a href="https://pan.baidu.com/s/1fOTIMG0bGESrEq7OPdQYtg">https://pan.baidu.com/s/1fOTIMG0bGESrEq7OPdQYtg</a> 提取码：zc30</p><p>atlassian-extras-decoder-v2-3.2.jar<br>链接：<a href="https://pan.baidu.com/s/1huEUdqMvKPgvTYsZU-ehlg">https://pan.baidu.com/s/1huEUdqMvKPgvTYsZU-ehlg</a> 提取码：biiq</p><p>atlassian-universal-plugin-manager-plugin-2.22.jar<br>链接：<a href="https://pan.baidu.com/s/1TTwocqrSVfF0lGsZPDQtFQ">https://pan.baidu.com/s/1TTwocqrSVfF0lGsZPDQtFQ</a> 提取码：t9pf</p><p>（二）安装atlassian-confluence-6.3.1-x64.bin</p><ol><li>安装confluence</li></ol><p>bobo@Xixi:<del>$ chmod +x atlassian-confluence-6.3.1-x64.bin<br>bobo@Xixi:</del>$ ./atlassian-confluence-6.3.1-x64.bin<br>Unpacking JRE …<br>Starting Installer …<br>You do not have administrator rights to this machine and as such, some installation options will not be available. Are you sure you want to continue?<br>Yes [y, Enter], No [n]<br>y<br>This will install Confluence 6.3.1 on your computer.<br>OK [o, Enter], Cancel [c]<br>o<br>Choose the appropriate installation or upgrade option.<br>Please choose one of the following:<br>Express Install (uses default settings) [1],<br>Custom Install (recommended for advanced users) [2, Enter],<br>Upgrade an existing Confluence installation [3]<br>1<br>See where Confluence will be installed and the settings that will be used.<br>Installation Directory: /home/bobo/atlassian/confluence<br>Home Directory: /home/bobo/atlassian/application-data/confluence<br>HTTP Port: 8090<br>RMI Port: 8000<br>Install as service: No<br>Install [i, Enter], Exit [e]<br>i<br>Extracting files …<br>Please wait a few moments while we configure Confluence.<br>Installation of Confluence 6.3.1 is complete<br>Start Confluence now?<br>Yes [y, Enter], No [n]<br>y<br>Please wait a few moments while Confluence starts up.<br>Launching Confluence …<br>Installation of Confluence 6.3.1 is complete<br>Your installation of Confluence 6.3.1 is now ready and can be accessed via<br>your browser.<br>Confluence 6.3.1 can be accessed at <a href="http://localhost:8090/">http://localhost:8090</a><br>Finishing installation …</p><p>重要提示：confluence安装ok后，已自动启动！！</p><ol start="3"><li>查看confluence端口是否起来了</li></ol><p>bobo@Xixi:/usr/share/mysql$ lsof -i:8090<br>COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME<br>java 67966 bobo 37u IPv6 624545 0t0 TCP *:8090 (LISTEN)<br>java 67966 bobo 169u IPv6 23730544 0t0 TCP 202.115.52.43:8090-&gt;202.115.53.98:29015 (ESTABLISHED)<br>查看指定端口，可以结合grep命令：<br>netstat -ap | grep 8090</p><ol start="4"><li>停止confluence后，再进行后续操作（如添加mssql驱动、破解confluence、破解插件等）</li></ol><p>重要提示：confluence安装ok后，已自动启动！！<br>以下是启动与停止confluence命令<br>bash /home/bobo/atlassian/confluence/bin/start-confluence.sh<br>bash /home/bobo/atlassian/confluence/bin/stop-confluence.sh<br>bash /home/bobo/atlassian/confluence/bin/shutdown.sh<br>5. 添加 mysql 驱动<br><a href="https://blog.csdn.net/renwudao24/article/details/51861719">https://blog.csdn.net/renwudao24/article/details/51861719</a><br>从 mysql 官网下载 java 版的连接器，这里下载的是：mysql-connector-java-5.1.46-bin.jar<br>链接：<a href="https://pan.baidu.com/s/1sGOaPXA8mc3zYgaunQ4f4w">https://pan.baidu.com/s/1sGOaPXA8mc3zYgaunQ4f4w</a> 提取码：4321<br>把这个文件复制到指定目录（/home/bobo/atlassian/confluence/lib/） 目录中。</p><p>bash /home/bobo/atlassian/confluence/bin/shutdown.sh<br>cp mysql-connector-java-5.1.46-bin.jar /home/bobo/atlassian/confluence/lib/<br>bash /home/bobo/atlassian/confluence/bin/startup.sh<br>最新版本：mysql-connector-java-8.0.15.jar<br>链接：<a href="https://pan.baidu.com/s/1--5IdopGiMBuChzTyldJAA">https://pan.baidu.com/s/1--5IdopGiMBuChzTyldJAA</a> 提取码：z1zo</p><ol start="6"><li><p>破解confluence</p></li><li><p>破解confluence插件</p></li><li><p>启动congfience<br>bash /home/xxx/atlassian/confluence/bin/startup.sh</p></li><li><p>浏览器里输入：<a href="http://202.115.52.43:8090/">http://202.115.52.43:8090</a></p></li></ol><p>打开页面 <a href="http://localhost:8090/">http://localhost:8090</a> ，进入系统安装页面。<br>第一步，选择自己设置，用于生产环境。<br>第二步，配置数据库，根据实际需求填写。（还支持postgresql, oracle, ms sql server）<br>注意：配置数据库的用户名和密码是在安装mysql数据时设定的！//用户root 密码123456<br>第三步，输入许可证。 这里点击 “生成 JIRA 试用许可证” 链接，到官网申请一个试用许可证，再填到这里。<br>第四步，设置管理员账户。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工具模块" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E5%85%B7%E6%A8%A1%E5%9D%97/"/>
    
  </entry>
  
  <entry>
    <title>安全开发规范</title>
    <link href="http://tomasonl.github.io/2021/05/24/%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/"/>
    <id>http://tomasonl.github.io/2021/05/24/%E5%AE%89%E5%85%A8%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83/</id>
    <published>2021-05-24T00:39:16.000Z</published>
    <updated>2021-05-24T07:17:57.039Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>1,关闭蓝牙和无线连接<br>屏幕右下角<br>打开蓝牙设置确认未连接蓝牙<br>  <img src="/img/001.jpg"></p><p>2、开启防火墙<br>如果是关闭状态就打开<br>3、关闭网络共享和网络发现<br> 保存更改即可（专用、来宾、所有网络都要设置）<br>4、关闭远程桌面<br>右键我的电脑&gt;属性&gt;高级系统设置<br>去掉勾选，保存即可<br>5、关闭445和3389端口<br>输入445,3389<br>选择阻止连接，然后一路下一步,完成界面需要起一个名字(自己能记住的名字就好)<br>配置出站规则是同样的操作<br>6、关闭guest账户<br>右键我的电脑，点击管理，选择  本地用户和组&gt;用户，<br>双击guest账户，即可以打开guest属性设置，这里勾选“账户已禁用”即是禁用这个guest账户了；</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工作记录" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>新的开始</title>
    <link href="http://tomasonl.github.io/2021/05/06/%E6%96%B0%E7%9A%84%E5%BC%80%E5%A7%8B/"/>
    <id>http://tomasonl.github.io/2021/05/06/%E6%96%B0%E7%9A%84%E5%BC%80%E5%A7%8B/</id>
    <published>2021-05-06T01:26:37.000Z</published>
    <updated>2021-05-06T01:31:25.286Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="结婚了"><a href="#结婚了" class="headerlink" title="结婚了"></a>结婚了</h1><h2 id="婚礼前期准备"><a href="#婚礼前期准备" class="headerlink" title="婚礼前期准备"></a>婚礼前期准备</h2><h2 id=""><a href="#" class="headerlink" title="-"></a>-</h2><h2 id="-1"><a href="#-1" class="headerlink" title="-"></a>-</h2><h2 id="-2"><a href="#-2" class="headerlink" title="-"></a>-</h2><h2 id="婚礼进行时"><a href="#婚礼进行时" class="headerlink" title="婚礼进行时"></a>婚礼进行时</h2><h2 id="-3"><a href="#-3" class="headerlink" title="-"></a>-</h2><h2 id="-4"><a href="#-4" class="headerlink" title="-"></a>-</h2><h2 id="-5"><a href="#-5" class="headerlink" title="-"></a>-</h2><h2 id="美好回忆"><a href="#美好回忆" class="headerlink" title="美好回忆"></a>美好回忆</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="生活随笔" scheme="http://tomasonl.github.io/tags/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>SofaBoot项目构建</title>
    <link href="http://tomasonl.github.io/2021/04/29/SofaBoot%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA/"/>
    <id>http://tomasonl.github.io/2021/04/29/SofaBoot%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA/</id>
    <published>2021-04-29T08:13:34.000Z</published>
    <updated>2021-04-29T08:26:24.720Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="SOFA微服务应用开发"><a href="#SOFA微服务应用开发" class="headerlink" title="SOFA微服务应用开发"></a>SOFA微服务应用开发</h1><p>快速入门</p><h2 id="1-搭建开发环境"><a href="#1-搭建开发环境" class="headerlink" title="1. 搭建开发环境"></a>1. 搭建开发环境</h2><p>    JDK版本 ≥ 8<br>    Apache Maven 版本 ≥ 3.2.5<br>    指定maven的配置文件为平台提供的setting.xml文件<br>    配置java以及maven的相关环境变量</p><h2 id="2-基于SOFABoot脚手架创建工程"><a href="#2-基于SOFABoot脚手架创建工程" class="headerlink" title="2. 基于SOFABoot脚手架创建工程"></a>2. 基于SOFABoot脚手架创建工程</h2><p>使用maven命令，通过内网maven私服创建SOFABoot工程（请勿直接复制 Maven 命令，请把“custom_settings_path”替换为真实的setting.xml路径），将创建的SOFABoot工程导入IDE中，即可直接编译本地运行。</p><ul><li>   Core工程：通常用于实现无页面展现的后端服务。当使用 SOFABoot 开发一个 J2SE 程序（无 Web 页面访问），相当于“基于 Spring Boot 的非 Web 应用（无 servlet 依赖）+ SOFA 中间件”进行开发。</li></ul><p> mvn -s “custom_settings_path” archetype:generate -DarchetypeGroupId=com.zjnx.sofa -DarchetypeArtifactId=core-app-parent-archetype -DarchetypeVersion=1.0-SNAPSHOT -DarchetypeCatalog=internal</p><ul><li> Web工程：通常用于需要 Web 页面展现的应用。当用该工程类型开发一个 Web 程序时，相当于基于“Spring Boot 的 Web 应用 + SOFA 中间件进行开发”。<br>mvn -s “custom_settings_path” archetype:generate -DarchetypeGroupId=com.zjnx.sofa -DarchetypeArtifactId=web-app-parent-archetype -DarchetypeVersion=1.0-SNAPSHOT -DarchetypeCatalog=internal<br>在创建过程中会提示输入以下信息，请根据开发使用规范进行输入：<br>groupId : maven项目组织唯一标识<br>artifactId ：工程名或者项目名<br>version ：版本号，默认为1.0-SNAPSHOT<br>package : 包名，可不填，默认和groupId一致<br>Y：确认 N :取消<br>提供的“应用SOFABoot开发脚手架工程”，使用的配置信息如下, 本文后续所有操作也都是基于此工程进行开发演示：<br>groupId : com.zjrcu.sofa<br>artifactId ：core-app<br>version ：1.0-SNAPSHOT<br>package : com.zjrcu.sofa<h2 id="3-更新SOFABoot版本"><a href="#3-更新SOFABoot版本" class="headerlink" title="3. 更新SOFABoot版本"></a>3. 更新SOFABoot版本</h2>访问私服地址：XXXX，获取最新SOFABoot版本，并更新工程中的版本为最新版本，比如当前私服最新版为3.4.7。<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">&lt;groupId&gt;com.alipay.sofa&lt;&#x2F;groupId&gt;</span><br><span class="line">&lt;artifactId&gt;sofaboot-enterprise-dependencies&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;version&gt;3.4.7&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;parent&gt;</span><br></pre></td></tr></table></figure><h2 id="4-引入SOFA-RPC-Starter及平台公共类"><a href="#4-引入SOFA-RPC-Starter及平台公共类" class="headerlink" title="4. 引入SOFA RPC Starter及平台公共类"></a>4. 引入SOFA RPC Starter及平台公共类</h2><h3 id="4-1-引入SOFA-RPC-Starter"><a href="#4-1-引入SOFA-RPC-Starter" class="headerlink" title="4.1 引入SOFA RPC Starter"></a>4.1 引入SOFA RPC Starter</h3>当前SOFA RPC同时支持BOLT和REST协议，所以无论服务是暴露BOLT还是REST协议，都只需引入rpc-enterprise-sofa-boot-starter，脚手架工程默认已经添加该依赖。另外注意引入SOFA中间件组件的Starter依赖时，不要设置版本号，由SOFABoot parent整体控制。<dependency><groupId>com.alipay.sofa</groupId><artifactId>rpc-enterprise-sofa-boot-starter</artifactId></dependency>### 4.2 引入平台公共类公共类中包含系统之间交互的公共报文头，并会统一捕获和封装异常信息，以服务响应码的形式反馈给接口调用方。系统的交互规范及服务响应码详见《ZJ-RC-SOFA微服务应用开发使用规范》。<dependency><groupId>com.zjrc.common</groupId><artifactId>zjrc-common</artifactId><version>1.0.0-SNAPSHOT</version></dependency>## 5. 发布和引用SOFARPC微服务### 5.1 定义接口    在接口模块core-app-facede中创建自定义入参和出参，出入参都需继承入参基类及出参基类：public class User extends BaseInput {  private String username;  private int    age;  private String userId;  public User() {  }  public User(String username, int age, String userId) {      this.username = username;      this.age = age;      this.userId = userId;  }  //getter以及setter方法}    定义接口，并发布接口到私服中根据定义的入参和出参，编写RPC服务的接口。参考示例：public interface UserService {  StringOutput getUserName(User user);}将接口模块core-app-facade打包并发布到私服中，使接口可以被其他服务依赖并调用：mvn deploy:deploy-file</li><li>DgroupId=com.zjrcu.sofa</li><li>DartifactId=core-app-facade</li><li>Dversion=1.0-SNAPSHOT</li><li>Dpackaging=jar</li><li>Dfile=E:\core-app-facade-1.0-SNAPSHOT.jar</li><li>Durl=<a href="http://158.222.68.166:8081/nexus/content/repositories/sofasnapshots/">http://158.222.68.166:8081/nexus/content/repositories/sofasnapshots/</a></li><li>DrepositoryId=rpc-facades<br>   DgroupId和DartifactId构成了该jar包在pom.xml的坐标，项目就是依靠这两个属性定位；Dversion表示版本信息；Dfile表示需要上传的jar包的绝对路径；Durl表示私服上仓库的位置；DrepositoryId表示仓库id，需要与setting.xml中server标签的id一致，否则上传会提示权限不足；<h3 id="5-2-发布SOFARPC服务"><a href="#5-2-发布SOFARPC服务" class="headerlink" title="5.2 发布SOFARPC服务"></a>5.2 发布SOFARPC服务</h3>在服务的实现类上添加@SofaService注解，希望暴露的协议通过bindingType设定（rest/bolt），也支持同时暴露两个协议<br>@SofaService(interfaceType = SampleRestFacade.class,bindings = { @SofaServiceBinding(bindingType = “bolt”) })<br>@Service<br>public class SampleRestFacadeImpl implements SampleRestFacade {</li></ul><p>}</p><h3 id="5-3-引用SOFARPC服务"><a href="#5-3-引用SOFARPC服务" class="headerlink" title="5.3 引用SOFARPC服务"></a>5.3 引用SOFARPC服务</h3><p>引入服务发布方的Facade包，并在定义该服务变量时添加@SofaReference注解，通过bindingType设定的协议与发布方保持一致。<br>@SofaReference(interfaceType = SampleRestFacade.class, binding = @SofaReferenceBinding(bindingType = “bolt”))<br>private SampleRestFacade sampleRestFacade;</p><h2 id="6-更新应用配置"><a href="#6-更新应用配置" class="headerlink" title="6. 更新应用配置"></a>6. 更新应用配置</h2><p>SOFABoot是基于Spring Boot的开发框架，因此application.properties的配置，除了Spring Boot本身默认自带的之外，还会有一些SOFABoot特有的配置，基础的主要有如下几个需要正确设置：<br>    应用名称：spring.application.name<br>按照微服务应用开发规范命名：系统标识-子系统名。便于在管控台中查到相应服务。<br>    运行模式：run.mode<br>应用发布到云上时，必须设置为NORMAL，本地调试可设置为DEV或者TEST。<br>    运行环境：com.alipay.env。<br>当前SOFA输出模式固定为共享模式，值必须是shared。<br>    实例标识：com.alipay.instanceid。<br>由于SOFA是共享模式，会基于工作空间做逻辑划分，每个工作空间有对应的instanceid。<br>    AntVIP地址：com.antcloud.antvip.endpoint。<br>由于SOFA是多个中间件组件的集合，为了避免应用客户端设置多个中间件组件的服务端地址，SOFA提供了AntVIP来做路由，因此应用只需配置AntVIP地址即可。<br>实例标识和AntVIP地址信息的获取在下一小节介绍。<br>通过这些配置，再无需额外配置SOFA中间件服务端地址，比如微服务发布和订阅所需的注册中心地址，因为通过AntVIP，SOFA框架会自动获取。<br>以发布到测试环境ant7这个工作空间的应用为例，对应的配置信息需为：<br>run.mode=NORMAL<br>com.alipay.env=shared<br>com.alipay.instanceid=R20HZU2ELEHA<br>com.antcloud.antvip.endpoint=acvip-inner.dev.zjnx.com</p><h2 id="7-获取环境实例标识和AntVIP地址"><a href="#7-获取环境实例标识和AntVIP地址" class="headerlink" title="7. 获取环境实例标识和AntVIP地址"></a>7. 获取环境实例标识和AntVIP地址</h2><p>登录PaaS平台中间件管理控制台，地址为<a href="http://sofa-portal.dev.zjnx.com/">http://sofa-portal.dev.zjnx.com/</a><br>请选择租户和环境-&gt; ANTCLOUD -&gt; dev</p><p>可在SOFA中间件的管控页面上查看到该工作空间对应的实例标识（com.alipay.instanceid）和AntVIP地址（com.antcloud.antvip.endpoint）信息，如下图所示。</p><h2 id="8-发布应用并查看服务"><a href="#8-发布应用并查看服务" class="headerlink" title="8. 发布应用并查看服务"></a>8. 发布应用并查看服务</h2><p>8.1 SOFABoot 健康检查<br>SOFABoot在Spring Boot 的健康检查能力上，增加了Readiness Check 的能力，使用SOFABoot的健康检查能力的扩展，来更优雅的上线应用实例。<br>    可以直接在浏览器中输入：<a href="http://localhost:8080/actuator/readiness">http://localhost:8080/actuator/readiness</a> 来查看Readiness Check 的结果<br>    也可以通过查看具体的日志来确定健康检查的结果，日志的目录位于health-check 目录下<br>8.2 管控台查看服务<br>应用启动后，通过健康检查，就会注册到注册中心，可以通过微服务控制台查看暴露的微服务。<br>SOFA中间件的管控页面-&gt;微服务控制台-&gt;服务管控</p><p>上图中红框显示的“提供服务的应用”就是spring.application.name，所以为了便于管控及查找对应应用，微服务应用服务名称要遵循开发使用规范。</p><h2 id="9-适配多个工作空间的配置"><a href="#9-适配多个工作空间的配置" class="headerlink" title="9. 适配多个工作空间的配置"></a>9. 适配多个工作空间的配置</h2><p>工作空间对应的是应用部署的不同环境，开发，功能测试，性能测试等，而不同环境的资源配置是不一样的，比如数据库连接，比如中间件的实例标识com.alipay.instanceid，等等。为了避免应用发布到不同工作空间时，需要修改application.properties里的值，PaaS平台通过SOFABoot技术栈发布应用时，会自动去按照当前所属工作空间名称寻找对应的application.properties文件，比如功能测试A1这个工作空间，那么PaaS平台发布应用时会优先选择application-A1.properties文件里的值。因此我们建议如下配置：<br>    相同配置放在application.properties文件中<br>    准备多份对应工作空间的application-XXX.properties文件，并在其中设置差异值</p><h2 id="10-使用动态配置"><a href="#10-使用动态配置" class="headerlink" title="10. 使用动态配置"></a>10. 使用动态配置</h2><p>10.1 引入依赖<br><dependency><br>    <groupId>com.alipay.sofa</groupId><br>    <artifactId>ddcs-enterprise-sofa-boot-starter</artifactId><br></dependency><br>10.2 使用步骤<br>10.2.1 创建动态配置类<br>    创建动态配置类ExampleConfig<br>    类上标注@DObject注解，region和appName属性与管控平台上的配置类保持一致<br>    类属性上标注@DAttribute注解，属性名与管控平台上配置类的属性名保持一致<br>    编写init方法，其上标注@PostContrust注解，用于初始化动态配置组件<br>    编写Getter、Setter方法<br>@DObject(region = “ExampleRegion”, appName = “core-app”)<br>public class ExampleConfig {<br>@DAttribute<br>private String greeting;</p><p>@PostConstruct<br>public void init() {<br>    DRMClient.getInstance().register(this);<br>}<br>    // setters, getters …<br>}<br>10.2.2 将动态配置类作为Spring Bean进行管理<br>在com.zjnx.sofa.config包下创建Spring配置类DdcsConfig，用于管理应用中所有动态配置类：<br>package com.zjnx.sofa.config;</p><p>@Configuration<br>public class DdcsConfig {<br>    @Bean<br>    public ExampleConfig exampleConfig() {<br>        return new ExampleConfig();<br>    }<br>}<br>在启动类中配置@ComponentScan注解以加载config包下的Spring配置类：<br>@SpringBootApplication<br>@ComponentScan(basePackages = {“com.zjnx.sofa.config”})<br>public class SOFABootSpringApplication {<br>    public static void main(String[] args) {<br>        // …<br>    }<br>}<br>10.2.3 使用动态配置类<br>通过@Autowired注解引用动态配置类Bean：<br>public class SampleServiceImpl implements SampleService {<br>private ExampleConfig exampleConfig;</p><p>@Override<br>public String message() {<br>    String greeting = exampleConfig.getGreeting();<br>    // …<br>}</p><p>@Autowired<br>public void setExampleConfig(ExampleConfig ec) {<br>    this.exampleConfig = ec;<br>}<br>}<br>10.3 在管控台上创建配置类</p><p>为该配置类创建属性，属性名与程序中的属性名一致：</p><p>推送属性值：</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工作记录" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>生活随笔3</title>
    <link href="http://tomasonl.github.io/2021/04/25/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%943/"/>
    <id>http://tomasonl.github.io/2021/04/25/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%943/</id>
    <published>2021-04-25T08:28:52.000Z</published>
    <updated>2021-04-28T02:10:52.416Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="百无聊赖"><a href="#百无聊赖" class="headerlink" title="百无聊赖"></a>百无聊赖</h1><p>妈的，现在咋越来越难受；<br>无形的压力</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="生活随笔" scheme="http://tomasonl.github.io/tags/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>Nginx-进阶梳理</title>
    <link href="http://tomasonl.github.io/2021/04/13/Nginx%E8%BF%9B%E9%98%B6/"/>
    <id>http://tomasonl.github.io/2021/04/13/Nginx%E8%BF%9B%E9%98%B6/</id>
    <published>2021-04-13T02:09:06.000Z</published>
    <updated>2021-04-28T07:09:53.786Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Nginx-程序架构"><a href="#Nginx-程序架构" class="headerlink" title="Nginx 程序架构"></a>Nginx 程序架构</h2><h3 id="master-worker"><a href="#master-worker" class="headerlink" title="master/worker"></a>master/worker</h3><p>一个master进程：负载加载和分析配置文件、管理worker进程、平滑升级<br>一个或多个worker进程：处理并响应用户请求<br>缓存相关的进程：</p><p>cache loader    # 载入缓存对象<br>cache manager   # 管理缓存对象</p><h2 id="Nginx特性"><a href="#Nginx特性" class="headerlink" title="Nginx特性"></a>Nginx特性</h2><p>异步、事件驱动和非阻塞。</p><p>并发请求处理     # 通过epoll/select<br>文件IO          # 高级IO sendfile，异步，mmap</p><h2 id="Nginx-模块"><a href="#Nginx-模块" class="headerlink" title="Nginx 模块"></a>Nginx 模块</h2><p>高度模块化，但其模块早期不支持DSO机制；近期版本支持动态装载和卸载。</p><p>模块分类：</p><p>1、核心模块：core module<br>2、标准模块：<br>    HTTP modules：Http模块<br>        - Standard HTTP modules<br>        - Optional HTTP modules<br>    Mail modules：邮件相关<br>    Stream modules：传输层代理</p><h2 id="Nginx-作用"><a href="#Nginx-作用" class="headerlink" title="Nginx 作用"></a>Nginx 作用</h2><p>静态的web资源服务器；(图片服务器，或js/css/html/txt等静态资源服务器)<br>结合FastCGI/uwSGI/SCGI等协议反代动态资源请求<br>http/https协议的反向代理<br>imap4/pop3协议的反向代理<br>tcp/udp协议的请求转发</p><p>三台Tomcat搭建一个集群 Nginx代理</p><p>Nginx要是坏了呢？===KeepAlive<br>HA 高可用High Availability<br>两台Nginx不能同时去服务，主备节点关系。和tomcat集群不同；</p><p>使用KeepAlive实现高可用机制<br>基于VRRP协议，检测nginx状态，如果有故障还可以发送通知；主机修复好，自动让位；<br>这一些列都是由KeepAlive来做；<br>VRRP协议，虚拟路由冗余协议，解决内网单点故障；<br>keepalive==   </p><ol><li>./configure –prefix=/usr/local/keepalived –sysconf=/etc    (缺库就补一下)</li><li>make &amp;&amp; make install</li><li>whereis keepalived<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">global_defs&#123;  </span><br><span class="line">notification_email&#123;   </span><br><span class="line">#通知email，根据实际情况配置    </span><br><span class="line">admin@example.com</span><br><span class="line">&#125;</span><br><span class="line">notification_email_from admin@example.com</span><br><span class="line">smtp_server 127.0.0.1</span><br><span class="line">stmp_connect_timeout 30</span><br><span class="line">router_id node1         </span><br><span class="line">#节点名标识，主要用于通知中</span><br><span class="line">&#125;</span><br><span class="line">vrrp_instance VI_NODE &#123;</span><br><span class="line">state MASTER          </span><br><span class="line">#配置为主服务器</span><br><span class="line"></span><br><span class="line">interface eth0        </span><br><span class="line">#通讯网卡</span><br><span class="line">virtual_router_id 100 </span><br><span class="line">#路由标识</span><br><span class="line">priority 200          </span><br><span class="line">#优先级，0-254</span><br><span class="line">advert_int 5          </span><br><span class="line">#通知间隔，实际部署时可以设置小一点，减少延时</span><br><span class="line">authentication &#123;</span><br><span class="line">auth_type PASS</span><br><span class="line">auth_pass 123456    </span><br><span class="line">#验证密码，用于通讯主机间验证</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> virtual_ipaddress &#123;</span><br><span class="line">192.168.1.206      </span><br><span class="line">#虚拟ip，可以定义多个</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p>写脚本实现全天候 检测nginx是否活着</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">A&#x3D; &#96;ps -C nginx --no-header |wc -l&#96;</span><br><span class="line">#判断 nginx是否宕机,如果宕机了,尝试重启</span><br><span class="line">if [$A -eq 0 ]; then</span><br><span class="line">&#x2F;usr&#x2F;locaL&#x2F;nginx&#x2F;sbin&#x2F;nginx</span><br><span class="line">#等待一小会再次检查 nginx,如果没有启动成功,则停止 keepalived,使其启动备用机</span><br><span class="line">sleep 3</span><br><span class="line">if [&#96;ps -C nginx --no-header |wc -l&#96; -eq 0 ]; then</span><br><span class="line">killall keepalived</span><br><span class="line">fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure><p>但是备用机一般没啥事 也不能天天出事，所以为了资源合理利用</p><h3 id="配置Keepalived双主热备"><a href="#配置Keepalived双主热备" class="headerlink" title="配置Keepalived双主热备"></a>配置Keepalived双主热备</h3><p>规则：以一个虚拟ip分组归为同一个路由<br>主节点配置：</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">global_defs &#123;</span><br><span class="line">router_id keep_171</span><br><span class="line">&#125;</span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">state MASTER</span><br><span class="line">interface ens33</span><br><span class="line">virtual_router_id 51</span><br><span class="line">priority 100</span><br><span class="line">advert_int 1</span><br><span class="line">authentication &#123;</span><br><span class="line">auth_type PASS</span><br><span class="line">auth_pass 1111</span><br><span class="line">&#125;</span><br><span class="line">virtual_ipaddress &#123;</span><br><span class="line">192.168.1.161</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">vrrp_instance VI_2 &#123;</span><br><span class="line">state BACKUP</span><br><span class="line">interface ens33</span><br><span class="line">virtual_router_id 52</span><br><span class="line">priority 80</span><br><span class="line">advert_int 1</span><br><span class="line">authentication &#123;</span><br><span class="line">auth_type PASS</span><br><span class="line">auth_pass 1111</span><br><span class="line">&#125;</span><br><span class="line">virtual_ipaddress &#123;</span><br><span class="line">192.168.1.162</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>备用节点配置</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">global_defs &#123;</span><br><span class="line">router_id keep_172</span><br><span class="line">&#125;</span><br><span class="line">vrrp_instance VI_1 &#123;</span><br><span class="line">state BACKUP</span><br><span class="line">interface ens33</span><br><span class="line">virtual_router_id 51</span><br><span class="line">priority 80</span><br><span class="line">advert_int 1</span><br><span class="line">authentication &#123;</span><br><span class="line">auth_type PASS</span><br><span class="line">auth_pass 1111</span><br><span class="line">&#125;</span><br><span class="line">virtual_ipaddress &#123;</span><br><span class="line">192.168.1.161</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>相对而言，互为主备；</p><p>LVS-章文嵩博士</p><p>LVS负载能力超级高，LVS可以只接受不响应，</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工作记录" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>软件设计师考试指导</title>
    <link href="http://tomasonl.github.io/2021/03/18/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88%E8%80%83%E8%AF%95%E6%8C%87%E5%AF%BC/"/>
    <id>http://tomasonl.github.io/2021/03/18/%E8%BD%AF%E4%BB%B6%E8%AE%BE%E8%AE%A1%E5%B8%88%E8%80%83%E8%AF%95%E6%8C%87%E5%AF%BC/</id>
    <published>2021-03-18T08:29:32.000Z</published>
    <updated>2021-03-11T07:21:08.666Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="1，计算机系统知识"><a href="#1，计算机系统知识" class="headerlink" title="1，计算机系统知识"></a>1，计算机系统知识</h1><ul><li>进制转换</li><li>数值表示</li><li>算数运算、逻辑运算</li><li>数学基础知识</li><li>计算机硬件</li><li>存储系统</li><li>可靠性与性能测评</li></ul><p>1.1 数据表示与校验码<br>数据在计算机表现为01表示的<em>机器数</em>,有无符号根据最高位确定。可采用原、反、补、移码四种编码方法表示带符号的机器数；<br>0正1负<br>原码：乘除简单，加减不便；0分 +0[00000000] -0[10000000];<br>反码：符号为1 则要把剩余的取反；0分 +0[00000000] -0[11111111];<br>补码：符号为1，其余取反且最低位+1；0[00000000];<br>移码：乘除简单，加减不便；0分 +0[00000000] -0[10000000];</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工作记录" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>Java开发-规范起来3</title>
    <link href="http://tomasonl.github.io/2021/03/14/Java%E5%BC%80%E5%8F%91-%E8%A7%84%E8%8C%83%E8%B5%B7%E6%9D%A53/"/>
    <id>http://tomasonl.github.io/2021/03/14/Java%E5%BC%80%E5%8F%91-%E8%A7%84%E8%8C%83%E8%B5%B7%E6%9D%A53/</id>
    <published>2021-03-14T07:29:35.000Z</published>
    <updated>2021-03-04T08:42:18.224Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="四-OOP-规约"><a href="#四-OOP-规约" class="headerlink" title="(四) OOP 规约"></a>(四) OOP 规约</h2><ol><li>【强制】避免通过一个类的对象引用访问此类的静态变量或静态方法，无谓增<br>加编译器解析成本，直接用类名来访问即可。<br>解释：不是说语法错，而是增加 jvm 成本，每增加一个对象变量，new 一个<br>对象需要分配内存空间，增加无谓的内存消耗。调用时会去堆中检索对象，用类<br>名访问只需要去方法区中找，减少了堆中检索的成本。</li><li>【强制】所有的覆写方法，必须加@Override 注解。<br>说明：getObject()与 get0bject()的问题。一个是字母的 O，一个是数字的<br>0，加@Override 可以准确判断是否覆盖成功。另外，如果在抽象类中对方法<br>签名进行修改，其实现类会马上编译报错。<br>解释：jdk5.0 才有这个注解，可以帮助我们做数据检测，上例中的 O 和 0 眼<br>睛看不出来。</li><li>【强制】相同参数类型，相同业务含义，才可以使用 Java 的可变参数，避免使<br>用 Object。<br>说明：可变参数必须放置在参数列表的最后。（提倡同学们尽量不用可变参数<br>编程）<br>正例：public List<User> listUsers(String type, Long… ids) {…}<br>解释：可变参数本质上就是一个数组（经编译器编译后转化为对应类型的数<br>组）。因为如果遇到此种业务，绝对会定下类型，而不是 Object，可变参数会<br>增加 jdk 编译成本，会将它作为一个数组转换，增加编译成本，运行时也会预<br>留内存空间，额外增加运行空间。</li><li>【强制】外部正在调用或者二方库依赖的接口，不允许修改方法签名，避免对<br>接口调用方产生影响。接口过时必须加@Deprecated 注解，并清晰地说明采<br>用的新接口或者新服务是什么。<br>解释：因为现在微服务比较多，有 dubbo，rpc 调用，spring cloud rest<br>（特例，bean 参数不同）调用，如果方法签名改了，会对调用者造成麻烦。我们可<br>以用重写，重载的方式进行扩展。扩展接口升级 url 中加上版本号 v1,v2 等。但是原<br>来使用的接口不要停。</li><li>【强制】不能使用过时的类或方法。<br>说明：java.net.URLDecoder 中的方法 decode(String encodeStr) 这个方法<br>已经过时，应该使用双参数 decode(String source, String encode)。接口提<br>供方既然明确是过时接口，那么有义务同时提供新的接口；作为调用方来说，<br>有义务去考证过时方法的新实现是什么。<br>解释：如果有可替代的，不要用过时的。肯定是有问题，才会声明过时。没人<br>喜欢过期的食物，为什么编程时就喜欢用过期的方法，而就不想着用新方法<br>呢？</li><li>【强制】Object 的 equals 方法容易抛空指针异常，应使用常量或确定有值的<br>对象来调用 equals。<br>正例：”test”.equals(object);<br>反例：object.equals(“test”);<br>说明：推荐使用 java.util.Objects#equals（JDK7 引入的工具类）。<br>解释：字面值做调用方。避免空指针。看代码：oop 包下 EqualsTest</li><li>【强制】所有整型包装类对象之间值的比较，全部使用 equals 方法比较。<br>说明：对于 Integer var = ? 在-128 至 127 范围内的赋值，Integer 对象是<br>在 IntegerCache.cache 产生，会复用已有对象，这个区间内的 Integer 值<br>可以直接使用==进行判断，但是这个区间之外的所有数据，都会在堆上产<br>生，并不会复用已有对象，这是一个大坑，推荐使用 equals 方法进行判<br>断。<br>解释：面试大坑，Integer intA = 3,intB =3 ,用==判断是不是 true？不是基<br>本类型，都用 equals。equal 比较内容。看代码 oop.EqualsTest</li><li>【强制】浮点数之间的等值判断，基本数据类型不能用==来比较，包装数据类<br>型不能用 equals 来判断。<br>说明：浮点数采用“尾数+阶码”的编码方式，类似于科学计数法的“有效数<br>字+指数”的表示方式。二进制无法精确表示大部分的十进制小数，具体原理<br>参考《马士兵 Java 基础课程》。<br>反例：<br>float a = 1.0f - 0.9f;<br>float b = 0.9f - 0.8f;<br>if (a == b) {<br>// 预期进入此代码快，执行其它业务逻辑<br>// 但事实上 a==b 的结果为 false<br>}<br>Float x = Float.valueOf(a);<br>Float y = Float.valueOf(b);<br>if (x.equals(y)) {<br>// 预期进入此代码快，执行其它业务逻辑<br>// 但事实上 equals 的结果为 false<br>}<br>正例：<br>(1)指定一个误差范围，两个浮点数的差值在此范围之内，则认为是相等的。<br>float a = 1.0f - 0.9f;<br>float b = 0.9f - 0.8f;<br>float diff = 1e-6f;<br>if (Math.abs(a - b) &lt; diff) {<br>System.out.println(“true”);<br>}<br>(2)使用 BigDecimal 来定义值，再进行浮点数的运算操作。<br>BigDecimal a = new BigDecimal(“1.0”);<br>BigDecimal b = new BigDecimal(“0.9”);<br>BigDecimal c = new BigDecimal(“0.8”);<br>BigDecimal x = a.subtract(b);<br>BigDecimal y = b.subtract(c);<br>if (x.equals(y)) {<br>System.out.println(“true”);<br>}<br>解释：在 10 进制下，我们将 1 分成 10 份，还能表示 0.1，0.2 等，但表示<br>1/3，只能无限接近，永远达不到。所以精度不够。完全相等是不可能的。</li><li>【强制】定义数据对象 DO 类时，属性类型要与数据库字段类型相匹配。<br>正例：数据库字段的 bigint 必须与类属性的 Long 类型相对应。<br>反例：某个案例的数据库表 id 字段定义类型 bigint unsigned，实际类对象属性<br>为 Integer，随着 id 越来越大，超过 Integer 的表示范围而溢出成为负数。<br>解释：门当户对，否则匹配不上出问题。天天吵架调 bug，太费精力。</li><li>【强制】为了防止精度损失，禁止使用构造方法 BigDecimal(double)的方式把<br>double 值转化为 BigDecimal 对象。<br>说明：BigDecimal(double)存在精度损失风险，在精确计算或值比较的场景中可<br>能会导致业务逻辑异常。<br>如：BigDecimal g = new BigDecimal(0.1f); 实际的存储值为：0.10000000149<br>正例：优先推荐入参为 String 的构造方法，或使用 BigDecimal 的 valueOf 方<br>法，此方法内部其实执行了 Double 的 toString，而 Double 的 toString 按<br>double 的实际能表达的精度对尾数进行了截断。<br>BigDecimal recommend1 = new BigDecimal(“0.1”);<br>BigDecimal recommend2 = BigDecimal.valueOf(0.1);<br>解释：官方注释说了 unpredictable，你以为的你以为的不是你以为的。<br>BigDecimal(0.1)这货实际上等于</li><li>1000000000000000055511151231257827021181583404541015625，因为准<br>确的来说 0.1 本身不能算是一个 double（其实 0.1 不能代表任何一个定长二进制分<br>数）。去 EqualsTests 看源码 注释</li><li>关于基本数据类型与包装数据类型的使用标准如下：<br>1） 【强制】所有的 POJO 类属性必须使用包装数据类型。<br>2） 【强制】RPC 方法的返回值和参数必须使用包装数据类型。<br>3） 【推荐】所有的局部变量使用基本数据类型。<br>说明：POJO 类属性没有初值是提醒使用者在需要使用时，必须自己显式地进行赋<br>值，任何 NPE 问题，或者入库检查，都由使用者来保证。<br>正例：数据库的查询结果可能是 null，因为自动拆箱，用基本数据类型接收有<br>NPE 风险。<br>反例：比如显示成交总额涨跌情况，即正负 x%，x 为基本数据类型，调用的 RPC<br>服务，调用不成功时，返回的是默认值，页面显示为 0%，这是不合理的，应该<br>显示成中划线。所以包装数据类型的 null 值，能够表示额外的信息，如：远程调<br>用失败，异常退出。<br>解释：局部变量大多数用于计算，基本类型有优势，不需要拆箱装箱，效率高。<br>属性用包装类型：因为有可能序列化。看代码，当用 Integer 做参数时，num 为<br>空时，接受到的是 null，由使用者注意，但 为 int 时收到的是 0。如果使用者由<br>于没有 npe 忘了，上线会出问题。</li><li>【强制】定义 DO/DTO/VO 等 POJO 类时，不要设定任何属性默认值。<br>反例：POJO 类的 createTime 默认值为 new Date()，但是这个属性在数据提取<br>时并没有置入具体值，在更新其它字段时又附带更新了此字段，导致创建时间被<br>修改成当前时间。<br>解释：<br>DO:data object 和数据库表对应，可以 1 个 do 对应多个表，。<br>Dto：trans 转换 dao 输出的对象，do 和 dto 不绝对一样。Dto 可以对数据做额<br>外的处理，do 整理后需要向上传递时用。<br>Vo：渲染视图。Vo 和 do 有时候也相同。<br>当 do 用于页面渲染用分页时，需要 vo，do 做一些特殊处理时，用 dto。<br>pojo：属性，set，get，object 方法，没有业务含义。<br>Pojo 是纯净的。<br>设置默认值，会让错误不好排查。</li><li>【强制】序列化类新增属性时，请不要修改 serialVersionUID 字段，避免反序列<br>失败；如果完全不兼容升级，避免反序列化混乱，那么请修改 serialVersionUID<br>值。<br>说明：注意 serialVersionUID 不一致会抛出序列化运行时异常。<br>解释：用了版本号，如果改了版本号，有地方有序列化的对象，在反序列化时就会<br>报错。如果抛弃原来所有的，全部进行升级，无所谓了。Io 文件，内存，网络。<br>反序列化 会读取流中的 版本号，如果版本号和类中版本号不一致，会报错。也可<br>以让所以类版本号有的都是 1L，就像 2 个人同一个身份证号，正常活没问题。<br>Hashcode 方法，返回 0 也行，但是不建议。看代码：oop.SerializeTest</li><li>【强制】构造方法里面禁止加入任何业务逻辑，如果有初始化逻辑，请放在 init<br>方法中。<br>解释：为了逻辑清晰，不要让孩子快出生的时候，干些他成为独立的人之后才能<br>干的活。先让他生出来再说，别着急。可以在 init 上加上，@PostConstruct 注解，<br>在构造方法执行结束后调用。在服务发现 DiscoveryClient 中构造方法执行了业务逻<br>辑，我们不学。国产标准。</li><li>【强制】POJO 类必须写 toString 方法。使用 IDE 中的工具：source&gt;<br>generate toString 时，如果继承了另一个 POJO 类，注意在前面加一下<br>super.toString。<br>说明：在方法执行抛出异常时，可以直接调用 POJO 的 toString()方法打印其属性<br>值，便于排查问题。<br>解释：异常处理会用到。</li><li>【强制】禁止在 POJO 类中，同时存在对应属性 xxx 的 isXxx()和 getXxx()方<br>法。<br>说明：框架在调用属性 xxx 的提取方法时，并不能确定哪个方法一定是被优先调<br>用到。</li><li>【推荐】使用索引访问用 String 的 split 方法得到的数组时，需做最后一个分隔<br>符后有无内容的检查，否则会有抛 IndexOutOfBoundsException 的风险。<br>说明：<br>String str = “a,b,c,,”;<br>String[] ary = str.split(“,”);<br>// 预期大于 3，结果是 3<br>System.out.println(ary.length);<br>解释：看代码：oop.SpiltTest</li><li>【推荐】当一个类有多个构造方法，或者多个同名方法，这些方法应该按顺序放<br>置在一起，便于阅读，此条规则优先于下一条。<br>解释：构造方法，overload，属性，getter/setter 分别放在一起。</li><li>【推荐】 类内方法定义的顺序依次是：公有方法或保护方法 &gt; 私有方法 &gt;<br>getter / setter 方法。<br>说明：公有方法是类的调用者和维护者最关心的方法，首屏展示最好；保护方法虽<br>然只是子类关心，也可能是“模板设计模式”下的核心方法；而私有方法外部一般<br>不需要特别关心，是一个黑盒实现；因为承载的信息价值较低，所有 Service 和<br>DAO 的 getter/setter 方法放在类体最后。<br>解释：方便看代码的人。</li><li>【推荐】setter 方法中，参数名称与类成员变量名称一致，this.成员名 = 参数名。在 getter/setter 方法中，不要增加业务逻辑，增加排查问题的难<br>度。<br>反例：<br>public Integer getData() {<br>if (condition) {<br>return this.data + 100;<br>} else {<br>return this.data - 100;<br>}<br>}<br>解释：加了业务逻辑，别人会误解。</li><li>【推荐】循环体内，字符串的连接方式，使用 StringBuilder 的 append 方法进<br>行扩展。<br>说明：下例中，反编译出的字节码文件显示每次循环都会 new 出一个<br>StringBuilder 对象，然后进行 append 操作，最后通过 toString 方法返回<br>String 对象，造成内存资源浪费。<br>反例：<br>String str = “start”;<br>for (int i = 0; i &lt; 100; i++) {<br>str = str + “hello”;<br>}<br>解释：减少对象的构建过程，builder 用的时 char[]实现。减少堆中不必要对<br>象的创建过程。</li><li>【推荐】final 可以声明类、成员变量、方法、以及本地变量，下列情况使用 final<br>关键字：<br>1） 不允许被继承的类，如：String 类。<br>2） 不允许修改引用的域对象。<br>3） 不允许被覆写的方法，如：POJO 类的 setter 方法。<br>4） 不允许运行过程中重新赋值的局部变量。<br>5） 避免上下文重复使用一个变量，使用 final 可以强制重新定义一个变量，方便<br>更好地进行重构。</li><li>【推荐】慎用 Object 的 clone 方法来拷贝对象。<br>说明：对象 clone 方法默认是浅拷贝，若想实现深拷贝需覆写 clone 方法实现域<br>对象的深度遍历式拷贝。<br>解释：clone 是浅拷贝。就当没有 clone 这个方法。Oop.CloneTest<br><a href="https://blog.csdn.net/meism5/article/details/90414050">https://blog.csdn.net/meism5/article/details/90414050</a></li><li>【推荐】类成员与方法访问控制从严：<br>1） 如果不允许外部直接通过 new 来创建对象，那么构造方法必须是 private。<br>2） 工具类不允许有 public 或 default 构造方法。<br>3） 类非 static 成员变量并且与子类共享，必须是 protected。<br>4） 类非 static 成员变量并且仅在本类使用，必须是 private。<br>5） 类 static 成员变量如果仅在本类使用，必须是 private。<br>6） 若是 static 成员变量，考虑是否为 final。<br>7） 类成员方法只供类内部调用，必须是 private。<br>8） 类成员方法只对继承类公开，那么限制为 protected。<br>说明：任何类、方法、参数、变量，严控访问范围。过于宽泛的访问范围，不利于<br>模块解耦。思考：如果是一个 private 的方法，想删除就删除，可是一个 public<br>的 service 成员方法或成员变量，删除一下，不得手心冒点汗吗？变量像自己的小<br>孩，尽量在自己的视线内，变量作用域太大，无限制的到处跑，那么你会担心的。<br>解释：最小知道原则。阿里安全条例，关于信息传递也</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工作记录" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>Element-ui和vue-element-admin</title>
    <link href="http://tomasonl.github.io/2021/03/11/Element-ui%E5%92%8Cvue-element-admin/"/>
    <id>http://tomasonl.github.io/2021/03/11/Element-ui%E5%92%8Cvue-element-admin/</id>
    <published>2021-03-11T08:14:01.000Z</published>
    <updated>2021-03-11T08:36:04.123Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="Element-ui和vue-element-admin学习"><a href="#Element-ui和vue-element-admin学习" class="headerlink" title="Element-ui和vue-element-admin学习"></a>Element-ui和vue-element-admin学习</h1><h2 id="Element-ui"><a href="#Element-ui" class="headerlink" title="Element-ui"></a>Element-ui</h2><p>什么是Element-ui？</p><p>根据官网的说法，Element-ui，是一套为开发者、设计师和产品经理准备的基于Vue 2.0的由饿了么公司出品的桌面端组件库。<br>官网：<a href="https://element.eleme.cn/#/zh-CN">https://element.eleme.cn/#/zh-CN</a></p><p>级联选择器（cascader）<img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly91cGxvYWQtaW1hZ2VzLmppYW5zaHUuaW8vdXBsb2FkX2ltYWdlcy8xMTQwNTU1OC01OWQ5ZTliZWNiMTkzN2ZkLnBuZw?x-oss-process=image/format,png"></p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;block&quot;&gt;</span><br><span class="line">  &lt;span class&#x3D;&quot;demonstration&quot;&gt;默认 click 触发子菜单&lt;&#x2F;span&gt;</span><br><span class="line">  &lt;el-cascader</span><br><span class="line">    v-model&#x3D;&quot;value&quot;</span><br><span class="line">    :options&#x3D;&quot;options&quot;</span><br><span class="line">    @change&#x3D;&quot;handleChange&quot;&gt;&lt;&#x2F;el-cascader&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div class&#x3D;&quot;block&quot;&gt;</span><br><span class="line">  &lt;span class&#x3D;&quot;demonstration&quot;&gt;hover 触发子菜单&lt;&#x2F;span&gt;</span><br><span class="line">  &lt;el-cascader</span><br><span class="line">    v-model&#x3D;&quot;value&quot;</span><br><span class="line">    :options&#x3D;&quot;options&quot;</span><br><span class="line">    :props&#x3D;&quot;&#123; expandTrigger: &#39;hover&#39; &#125;&quot;</span><br><span class="line">    @change&#x3D;&quot;handleChange&quot;&gt;&lt;&#x2F;el-cascader&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        value: [],</span><br><span class="line">        options: [&#123;</span><br><span class="line">          value: &#39;zhinan&#39;,</span><br><span class="line">          label: &#39;指南&#39;,</span><br><span class="line">          children: [&#123;</span><br><span class="line">            value: &#39;shejiyuanze&#39;,</span><br><span class="line">            label: &#39;设计原则&#39;,</span><br><span class="line">            children: [&#123;</span><br><span class="line">              value: &#39;yizhi&#39;,</span><br><span class="line">              label: &#39;一致&#39;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">              value: &#39;fankui&#39;,</span><br><span class="line">              label: &#39;反馈&#39;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">              value: &#39;xiaolv&#39;,</span><br><span class="line">              label: &#39;效率&#39;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">              value: &#39;kekong&#39;,</span><br><span class="line">              label: &#39;可控&#39;</span><br><span class="line">            &#125;]</span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            value: &#39;daohang&#39;,</span><br><span class="line">            label: &#39;导航&#39;,</span><br><span class="line">            children: [&#123;</span><br><span class="line">              value: &#39;cexiangdaohang&#39;,</span><br><span class="line">              label: &#39;侧向导航&#39;</span><br><span class="line">            &#125;, &#123;</span><br><span class="line">              value: &#39;dingbudaohang&#39;,</span><br><span class="line">              label: &#39;顶部导航&#39;</span><br><span class="line">            &#125;]</span><br><span class="line">          &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="vue-element-admin"><a href="#vue-element-admin" class="headerlink" title="vue-element-admin"></a>vue-element-admin</h2><p>什么是vue-element-admin？</p><p>vue-element-admin是一款基于Vue和Element-ui的后台管理的集成解决方案（60%的前后端分离项目都使用它）。<br>官网：<a href="https://panjiachen.github.io/vue-element-admin-site/zh/">https://panjiachen.github.io/vue-element-admin-site/zh/</a></p><p>如何分析一个前端项目？</p><p>1、查看config、index.js，了解项目的基本配置。<br>2、查看main.js，了解导入了哪些组件。<br>3、查看路由配置文件index.js，寻找到所有的页面组件。<br>4、分析页面组件，准备的组件化操作：template/script/style。</p><p>ElementUI   VS  Ant Design<br>官网：<br>el-vue: <a href="https://element.eleme.cn/">https://element.eleme.cn</a><br>a-vue: <a href="https://www.antdv.com/docs/vue">https://www.antdv.com/docs/vue</a><br>a-react: <a href="https://ant.design/docs/react/introduce-cn">https://ant.design/docs/react/introduce-cn</a><br>源码：<br>el-vue: <a href="https://github.com/ElemeFE/element">https://github.com/ElemeFE/element</a><br>a-vue: <a href="https://github.com/vueComponent/ant-design-vue">https://github.com/vueComponent/ant-design-vue</a><br>a-react: <a href="https://github.com/ant-design/ant-design">https://github.com/ant-design/ant-design</a><br>人民币版<br><a href="https://github.com/PanJiaChen/vue-element-admin">https://github.com/PanJiaChen/vue-element-admin</a><br><a href="https://pro.ant.design/">https://pro.ant.design/</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title>Java开发-规范起来2</title>
    <link href="http://tomasonl.github.io/2021/03/09/Java%E5%BC%80%E5%8F%91-%E8%A7%84%E8%8C%83%E8%B5%B7%E6%9D%A52/"/>
    <id>http://tomasonl.github.io/2021/03/09/Java%E5%BC%80%E5%8F%91-%E8%A7%84%E8%8C%83%E8%B5%B7%E6%9D%A52/</id>
    <published>2021-03-09T07:27:40.000Z</published>
    <updated>2021-03-04T08:41:43.883Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="三-代码格式"><a href="#三-代码格式" class="headerlink" title="(三) 代码格式"></a>(三) 代码格式</h2><ol><li><p>【强制】如果是大括号内为空，则简洁地写成{}即可，大括号中间无需换行和<br>空格；如果是非空代码块则：<br>1） 左大括号前不换行。<br>2） 左大括号后换行。<br>3） 右大括号前换行。<br>4） 右大括号后还有 else 等代码则不换行；表示终止的右大括号后必须换行。</p></li><li><p>【强制】左小括号和字符之间不出现空格；同样，右小括号和字符之间也不出现空格；而左大括号前需要空格。详见第 5 条下方正提示。<br>反例：if (空格 a == b 空格)</p></li><li><p>【强制】if/for/while/switch/do 等保留字与括号之间都必须加空格。</p></li><li><p>【强制】任何二目、三目运算符的左右两边都需要加一个空格。<br>说明：运算符包括赋值运算符=、逻辑运算符&amp;&amp;、加减乘除符号等。<br>解释：小时候第一次看马老师视频，才知道要加运算符两边的空格这个东西。<br>所以花钱学东西很值得，如果花 1 万，马上知道这个知识点，不花这个钱，有可能 2、3 年后知道，损失的就不止 1 万了。</p></li><li><p>【强制】采用 4 个空格缩进，禁止使用 tab 字符。<br>说明：如果使用 tab 缩进，必须设置 1 个 tab 为 4 个空格。IDEA 设置 tab为 4 个空格时，请勿勾选 Use tab character；而在 eclipse 中，必须勾选insert spaces for tabs。<br> public static void main(String[] args) {</p><pre><code> // 缩进 4 个空格 String say = &quot;hello&quot;; // 运算符的左右必须有一个空格 int flag = 0; // 关键词 if 与括号之间必须有一个空格，括号内的 f 与左括号，0 与右括号不需要空格 if (flag == 0) &#123; System.out.println(say); &#125; // 左大括号前加空格且不换行；左大括号后换行 if (flag == 1) &#123; System.out.println(&quot;world&quot;); // 右大括号前换行，右大括号后有 else，不用换行 &#125; else &#123; System.out.println(&quot;ok&quot;); // 在右大括号后直接结束，则必须换行</code></pre><p> }<br>}</p></li><li><p>【强制】注释的双斜线与注释内容之间有且仅有一个空格。<br>正例：<br>// 这是示例注释，请注意在双斜线之后有一个空格<br>String param = new String();</p></li><li><p>【强制】在进行类型强制转换时，右括号与强制转换值之间不需要任何空格隔开。<br>正例：<br>long first = 1000000000000L;<br>int second = (int)first + 2;</p></li><li><p>【强制】单行字符数限制不超过 120 个，超出需要换行，换行时遵循如下原则：<br>1）第二行相对第一行缩进 4 个空格，从第三行开始，不再继续缩进，参考示<br>例。<br>2）运算符与下文一起换行。<br>3）方法调用的点符号与下文一起换行。<br>4）方法调用中的多个参数需要换行时，在逗号后进行。<br>5）在括号前不要换行，见反例。<br>正例：<br>StringBuilder sb = new StringBuilder();<br>// 超过 120 个字符的情况下，换行缩进 4 个空格，点号和方法名称一起换行<br>sb.append(“Jack”).append(“Ma”)…<br>.append(“alibaba”)…<br>.append(“alibaba”)…<br>.append(“alibaba”);<br>反例：<br>StringBuilder sb = new StringBuilder();<br>// 超过 120 个字符的情况下，不要在括号前换行<br>sb.append(“Jack”).append(“Ma”)…append<br>(“alibaba”);<br>// 参数很多的方法调用可能超过 120<br>个字符，不要在逗号前换行<br>method(args1, args2, args3, …<br>, argsX);</p></li><li><p>【强制】方法参数在定义和传入时，多个参数逗号后边必须加空格。<br>正例：下例中实参的 args1，后边必须要有一个空格。<br>method(args1, args2, args3);</p></li><li><p>【强制】IDE 的 text file encoding 设置为 UTF-8; IDE 中文件的换行符使用Unix 格式，不要使用 Windows 格式。<br>解释：很多 windows 格式会有问题，比如记事本开头添加 0xefbbbf（十六进制）的字符。会导致文本问题。</p></li><li><p>【推荐】单个方法的总行数不超过 80 行。<br>说明：除注释之外的方法签名、左右大括号、方法内代码、空行、回车及任何不可见字符的总行数不超过80行。<br>正例：代码逻辑分清红花和绿叶，个性和共性，绿叶逻辑单独出来成为额外方法，使主干代码更加清晰；共性逻辑抽取成为共性方法，便于复用和维护。<br>解释：不仅仅写代码，生活中方方面面也一样，绿叶就当好绿叶，否则惹人烦。比如重要会议高层讲话，一个低层员工总插嘴，那就很可能会被单独抽取出来。放到公司外面。</p></li><li><p>【推荐】没有必要增加若干空格来使变量的赋值等号与上一行对应位置的等号对齐。<br>正例：<br>int one = 1;<br>long two = 2L;<br>float three = 3F;<br>StringBuilder sb = new StringBuilder();<br>说明：增加 sb 这个变量，如果需要对齐，则给 one、two、three 都要增加几个空格，在变量比较多的情况下，是非常累赘的事情。</p></li><li><p>【推荐】不同逻辑、不同语义、不同业务的代码之间插入一个空行分隔开来以提升可读性。<br>说明：任何情形，没有必要插入多个空行进行隔开。<br>解释：点到为止，不要过分。否则会激发逆反情绪，小时候玩 CS，人已经被打死了，就不要一直突突了，小时候在网吧有一次因为游戏中的鞭尸发生肢体冲突。</p></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工作记录" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>Java日常开发-规范起来1</title>
    <link href="http://tomasonl.github.io/2021/03/04/Java%E5%BC%80%E5%8F%91-%E8%A7%84%E8%8C%83%E8%B5%B7%E6%9D%A51/"/>
    <id>http://tomasonl.github.io/2021/03/04/Java%E5%BC%80%E5%8F%91-%E8%A7%84%E8%8C%83%E8%B5%B7%E6%9D%A51/</id>
    <published>2021-03-04T07:25:59.000Z</published>
    <updated>2021-03-04T08:34:10.241Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="一、编程规约"><a href="#一、编程规约" class="headerlink" title="一、编程规约"></a>一、编程规约</h1><h2 id="命名风格"><a href="#命名风格" class="headerlink" title="命名风格"></a>命名风格</h2><ol><li><p>【强制】命名不能以下划线或美元符号开始或者结束。<br>反例：<em>name / __name / $name / name</em> / name$ / name__ </p></li><li><p>【强制】严禁使用拼音与英文混合的方式，更不允许直接使用中文的方式。<br>正例：renminbi / alibaba / taobao / youku / hangzhou 等国际通用的名称，可视同英文。<br>反例：DaZhePromotion [打折] / getPingfenByName() [评分] / int 某变量= 3<br>说明：正确的英文拼写和语法可以让阅读者易于理解，避免歧义。纯拼音命名避免采用。中文同音字，汉字编码，Pingfen：评分，平分。</p></li><li><p>【强制】类名使用 首字母大写驼峰UpperCamelCase 风格，例外：DO / BO / DTO / VO / AO / PO / UID 等。<br>正例：JavaServerlessPlatform / UserDAO / XmlService / TcpUdpDeal /TaPromotion<br>反例：javaserverlessplatform / UserDo / XMLService / TCPUDPDeal /TAPromotion<br>TIPS：<br>DO（ Data Object）：与数据库表结构一一对应，通过 DAO 层向上传输数据源对象。<br>DTO（ Data Transfer Object）：数据传输对象，Service 或 Manager 向外传输的对象。<br>BO（ Business Object）：业务对象。 由 Service 层输出的封装业务逻辑的对象。<br>VO（ View Object）：显示层对象，通常是 Web 向模板渲染引擎层传输的对象。<br>AO (Application Object) :应用对象,在 Web 层与 Service 层之间抽象的复用对象模型,类似展示层,复用度不高。<br>POJO 是 DO / DTO / BO / VO 的统称</p></li><li><p>【强制】方法名、参数名、成员变量、局部变量都统一使用 首字母小写驼峰lowerCamelCase风格。<br>正例： localValue / getHttpMessage() / inputUserId</p></li></ol><p><em>开发小坑1</em>. 【强制】POJO 类中布尔类型变量都不要加 is 前缀，否则部分框架解析会引起序列化错误。</p><p>反例：定义为基本数据类型 Boolean isDeleted 的属性，它的方法也是isDeleted()，RPC 框架在反向解析的时候，“误以为”对应的属性名称是deleted，导致属性获取不到，进而抛出异常。<br>解释：这是开发中的一个坑，很难发现问题。<br>debug，com.p3c.controller.ApiTestController，在 postman 中传入<br>{ “num”:1, “isSuccess”:true}但是 controller 收到的却是 false;</p><ol start="5"><li>【参考】各层命名规约：<br>A) Service/DAO 层方法命名规约<br>1） 获取单个对象的方法用 get 做前缀。<br>2） 获取多个对象的方法用 list 做前缀，复数形式结尾如：listObjects。<br>3） 获取统计值的方法用 count 做前缀。<br>4） 插入的方法用 save/insert 做前缀。<br>5） 删除的方法用 remove/delete 做前缀。<br>6） 修改的方法用 update 做前缀。<br>B) 领域模型命名规约<br>1） 数据对象：xxxDO，xxx 即为数据表名。<br>2） 数据传输对象：xxxDTO，xxx 为业务领域相关的名称。<br>3） 展示对象：xxxVO，xxx 一般为网页名称。<br>4） POJO 是 DO/DTO/BO/VO 的统称，禁止命名成 xxxPOJO。</li></ol><h2 id="常量定义"><a href="#常量定义" class="headerlink" title="常量定义"></a>常量定义</h2><ol><li>【强制】不允许任何魔法值（即未经预先定义的常量）直接出现在代码中。<br>反例：String key = “Id#taobao_” + tradeId;<br>cache.put(key, value);<br>// 缓存 get 时，由于在代码复制时，漏掉下划线，导致缓存击穿而出现<br>问题</li><li>【强制】在 long 或者 Long 赋值时，数值后使用大写的 L，不能是小写的 l，<br>小写容易跟数<br>字 1 混淆，造成误解。<br>说明：Long a = 2l; 写的是数字的 21，还是 Long 型的 2。</li><li>【推荐】不要使用一个常量类维护所有常量，要按常量功能进行归类，分开维<br>护。<br>说明：大而全的常量类，杂乱无章，使用查找功能才能定位到修改的常量，不<br>利于理解和维护。<br>正例：缓存相关常量放在类 CacheConsts 下；系统配置相关常量放在类<br>ConfigConsts 下。<br>解释：大而全其实相当于没有，比如读书，重点划线，如果一本书都划线，和<br>没划线有什么区别呢？</li><li>【推荐】常量的复用层次有五层：跨应用共享常量、应用内共享常量、子工程内共享常量、包内共享常量、类内共享常量。<br>1） 跨应用共享常量：放置在二方库中，通常是 client.jar 中的 constant 目录下。<br>2） 应用内共享常量：放置在一方库中，通常是子模块中的 constant 目录下。<br>反例：易懂变量也要统一定义成应用内共享常量，两位工程师在两个类中分别定义了“YES”的变量：<br>类 A 中：public static final String YES = “yes”;<br>类 B 中：public static final String YES = “y”;<br>A.YES.equals(B.YES)，预期是 true，但实际返回为 false，导致线上问题。</li></ol><p>3） 子工程内部共享常量：即在当前子工程的 constant 目录下。<br>4） 包内共享常量：即在当前包下单独的 constant 目录下。<br>5） 类内共享常量：直接在类内部 private static final 定义。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工作记录" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>Nginx实战部署</title>
    <link href="http://tomasonl.github.io/2021/03/01/Nginx%E5%AE%9E%E6%88%98%E9%83%A8%E7%BD%B2/"/>
    <id>http://tomasonl.github.io/2021/03/01/Nginx%E5%AE%9E%E6%88%98%E9%83%A8%E7%BD%B2/</id>
    <published>2021-03-01T01:38:09.000Z</published>
    <updated>2021-03-09T07:18:37.092Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="WHAT—Nginx？"><a href="#WHAT—Nginx？" class="headerlink" title="WHAT—Nginx？"></a>WHAT—Nginx？</h1><p>Nginx (engine x) 是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。Nginx是由伊戈尔·赛索耶夫为俄罗斯访问量第二的Rambler.ru站点（俄文：Рамблер）开发的，2004年发布。2011年，nginx 1.0.4发布。</p><p>其特点是占有内存少，并发能力强，事实上nginx的并发能力在同类型的网页服务器中表现较好，中国大陆使用nginx网站用户有：百度、京东、新浪、网易、腾讯、淘宝等。在全球活跃的网站中有12.18%的使用比率，大约为2220万个网站。</p><p>Nginx 是一个安装非常的简单、配置文件非常简洁（还能够支持perl语法）、Bug非常少的服务。Nginx 启动特别容易，并且几乎可以做到7*24不间断运行，即使运行数个月也不需要重新启动。你还能够不间断服务的情况下进行软件版本的升级。</p><p>Nginx代码完全用C语言从头写成。官方数据测试表明能够支持高达 50,000 个并发连接数的响应。</p><h1 id="WHY—Nginx？"><a href="#WHY—Nginx？" class="headerlink" title="WHY—Nginx？"></a>WHY—Nginx？</h1><p>负载均衡，反向代理，静态缓存。</p><p>1 负载均衡<br>Nginx提供的负载均衡策略有2种：内置策略和扩展策略。<br>内置策略：轮询，加权轮询，IP-hash。<br>扩展策略，形式多样。</p><p>轮询—-依次循环<br>加权轮询—按权重比例分发请求<br>iphash—对ip进行hash操作，固定IP永远打一台服务器，解决Session共享。但是现在都是用Redis做共享；</p><p>2 代理<br>正向代理—代理客户端<br><img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/01/25/kuangstudy46bdad36-d3e0-43b0-a223-43360b7e8fc7.png"></p><p>反向代理—代理服务端<br><img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/01/25/kuangstudy62a15097-6e2a-4dbe-bcf5-f0d7cab81089.png"></p><p>3 缓存<br>动静分离可以根据静态资源的特点将其做缓存操作。提高资源响应的速度。</p><h1 id="HOW—Nginx"><a href="#HOW—Nginx" class="headerlink" title="HOW—Nginx?"></a>HOW—Nginx?</h1><p>Nginx的安装<br>1、下载nginx<br><a href="http://nginx.org/en/download.html">http://nginx.org/en/download.html</a> 下载稳定版本。</p><p>2、启动nginx<br>有很多种方法启动nginx<br>(1)直接双击nginx.exe，双击后一个黑色的弹窗一闪而过<br>(2)打开cmd命令窗口，切换到nginx解压目录下，输入命令 nginx.exe ，回车即可</p><p>3、检查nginx是否启动成功<br>直接在浏览器地址栏输入网址 <a href="http://localhost/">http://localhost:80</a> 回车，出现以下页面说明启动成功！<br><img src="https://kuangstudy.oss-cn-beijing.aliyuncs.com/bbs/2021/01/25/kuangstudya21688c8-159e-4caa-8e65-3dc056b6b78e.png"></p><p>4、配置监听<br>nginx的配置文件是conf目录下的nginx.conf，默认配置的nginx监听的端口。<br>重启：nginx -s reload</p><p>5、关闭nginx<br>如果使用cmd命令窗口启动nginx， 关闭cmd窗口是不能结束nginx进程的，可使用两种方法关闭nginx<br>(1)输入nginx命令 nginx -s stop(快速停止nginx) 或 nginx -s quit(完整有序的停止nginx)<br>(2)使用taskkill taskkill /f /t /im nginx.exe</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Nginx常用命令</span><br><span class="line">cd &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;</span><br><span class="line">.&#x2F;nginx  启动</span><br><span class="line">.&#x2F;nginx -s stop  停止</span><br><span class="line">.&#x2F;nginx -s quit  安全退出</span><br><span class="line">.&#x2F;nginx -s reload  重新加载配置文件</span><br><span class="line">ps aux|grep nginx  查看nginx进程</span><br><span class="line">启动成功访问 服务器ip:80</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">TIPS：连接不上阿里云或者LINUX服务器，检查安全组是否开放端口，或者服务器防火墙是否开放端口！</span><br><span class="line">相关命令：</span><br><span class="line"># 开启</span><br><span class="line">service firewalld start</span><br><span class="line"># 重启</span><br><span class="line">service firewalld restart</span><br><span class="line"># 关闭</span><br><span class="line">service firewalld stop</span><br><span class="line"># 查看防火墙规则</span><br><span class="line">firewall-cmd --list-all</span><br><span class="line"># 查询端口是否开放</span><br><span class="line">firewall-cmd --query-port&#x3D;8080&#x2F;tcp</span><br><span class="line"># 开放80端口</span><br><span class="line">firewall-cmd --permanent --add-port&#x3D;80&#x2F;tcp</span><br><span class="line"># 移除端口</span><br><span class="line">firewall-cmd --permanent --remove-port&#x3D;8080&#x2F;tcp</span><br><span class="line">#重启防火墙(修改配置后要重启防火墙)</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"># 参数解释</span><br><span class="line">1、firwall-cmd：是Linux提供的操作firewall的一个工具；</span><br><span class="line">2、--permanent：表示设置为持久；</span><br><span class="line">3、--add-port：标识添加的端口；</span><br><span class="line">演示</span><br><span class="line">upstream lb&#123;</span><br><span class="line">    server 127.0.0.1:8080 weight&#x3D;1;</span><br><span class="line">    server 127.0.0.1:8081 weight&#x3D;1;</span><br><span class="line">&#125;</span><br><span class="line">location &#x2F; &#123;</span><br><span class="line">    proxy_pass http:&#x2F;&#x2F;lb;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工作记录" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>爱乐之城</title>
    <link href="http://tomasonl.github.io/2021/02/23/%E7%88%B1%E4%B9%90%E4%B9%8B%E5%9F%8E/"/>
    <id>http://tomasonl.github.io/2021/02/23/%E7%88%B1%E4%B9%90%E4%B9%8B%E5%9F%8E/</id>
    <published>2021-02-23T06:05:21.000Z</published>
    <updated>2021-02-23T06:30:15.150Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Five-Hundred-Miles"><a href="#Five-Hundred-Miles" class="headerlink" title="Five Hundred Miles"></a>Five Hundred Miles</h2><p>If you miss the train I’m on,   You will know that I am gone,</p><p>You can hear the whistle blow a hundred miles.</p><p>A hundred miles, a hundred miles, A hundred miles, A hundred miles,</p><p>You can hear the whistle blow A hundred miles.</p><p>Lord, I’m one,  Lord, I’m two,  Lord I’m three,  Lord, I’m four,</p><p>Lord, I’m five hundred miles away from home. Away from home,</p><p>away from home, away from home,  away from home,</p><p>Lord, I’m five hundred miles away from home</p><p>Not a shirt on my back, Not a penny to my name.</p><p>Lord. I can’t go back home this-a way.</p><p>This-a way, this-a way, This-a way, this-a way,</p><p>Lord, I can’t go back home this-a way.</p><p><img src="https://img-blog.csdnimg.cn/20210223140949220.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3Njc2NDI5,size_16,color_FFFFFF,t_70" alt="img"></p><h2 id="成都"><a href="#成都" class="headerlink" title="成都"></a>成都</h2><p><img src="https://img-blog.csdnimg.cn/20210223141027909.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3Njc2NDI5,size_16,color_FFFFFF,t_70" alt="img"><br><img src="https://img-blog.csdnimg.cn/20210223141047112.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3Njc2NDI5,size_16,color_FFFFFF,t_70" alt="img"></p><h2 id="My-love"><a href="#My-love" class="headerlink" title="My love"></a>My love</h2><p><img src="https://img-blog.csdnimg.cn/20210223141105333.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3Njc2NDI5,size_16,color_FFFFFF,t_70" alt="img"></p><h2 id="盛夏的果实"><a href="#盛夏的果实" class="headerlink" title="盛夏的果实"></a>盛夏的果实</h2><p>C　　G 　　Am 　　E 　　　F 　　G 　　　C 　G<br>也许放弃　才能靠近你　不再见你　你才会把我记起<br>你曾说过　会永远爱我　也许承诺　不过证明没把握<br>C　　G 　　Am 　　E    　C 　　　G 　　　Am<br>时间累积　这盛夏的果实　回忆里　寂寞的香气<br>不用难过　不用掩饰什么　当结果是那么赤裸裸<br>　　F 　　　G 　    C-G- Am  　　F　　　 　Am<br>我要试着离开你　不要再想 你　虽然这并不是我本意<br>其实不用说什么　才能离开 我　起码那些经过属于我<br>C　　G 　　Am 　　E 　　　F 　　G 　　　C 　G<br>你曾说过　会永远爱我　也许承诺　不过因为没把握<br>也许放弃　才能靠近你　不再见你　你才会把我记起<br>C　　G 　　Am 　　E    　C 　　　G 　　　Am<br>别用沉默　再去掩饰什么　当结果是那么赤裸裸<br>时间累积　这剩下的果实　回忆里　爱情的香气<br>　　F 　　　G 　    C-G- Am  　　F　　　 　Am<br>以为你会说什么　才会离开 我　你只是转过头不看我<br>我以为不露痕迹　思念却满 溢　或许这代表了我的心<br>F2  　C2 　F  　AM   F  　　 C G  Am　   D 　    Am<br>不要刻意说你还爱我　 当看尽潮起潮 落　只要　 你记得我<br>F  　   C G　Am    D 　 Em  Am　　　<br>如果你会梦见 我　请你　 再抱紧我<br><img src="https://img-blog.csdnimg.cn/20210223141117629.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3Njc2NDI5,size_16,color_FFFFFF,t_70" alt="img"> </p><h2 id="好久不见"><a href="#好久不见" class="headerlink" title="好久不见"></a>好久不见</h2><p>C      Em    Am    F             G   C     Am               F     G<br>我来到你的城市  走过你 来时的路 想像着没我的日子 你是怎样的孤独<br>C      Am            F         G  C        Am            F    G    C<br>拿着你给的照片 熟悉的那一条街 只是没了你的画面 我们回不到那天<br>C      Em   Am(G)  Fm            G    Dm      Em    Am   Dm          G<br>你会不忽然的出现 在街角的咖啡店 我会带笑脸挥手寒喧 和你坐着聊聊 天<br>C           G      Am(G)  Fm        G   Dm          Em    Am  Dm<br>我多么想和你见一面 看看你最近改变 不再去说从前 只是寒喧 对你说一句<br>    C   G$      C<br>只是说一句好久不见<br><img src="https://img-blog.csdnimg.cn/20210223141136708.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3Njc2NDI5,size_16,color_FFFFFF,t_70" alt="img"></p><h2 id="声声慢"><a href="#声声慢" class="headerlink" title="声声慢"></a>声声慢</h2><p><img src="https://img-blog.csdnimg.cn/20210223141325194.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3Njc2NDI5,size_16,color_FFFFFF,t_70" alt="img"></p><h2 id="南方姑娘"><a href="#南方姑娘" class="headerlink" title="南方姑娘"></a>南方姑娘</h2><p><img src="https://img-blog.csdnimg.cn/20210223141347803.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3Njc2NDI5,size_16,color_FFFFFF,t_70" alt="img"><br><img src="https://img-blog.csdnimg.cn/20210223141354281.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3Njc2NDI5,size_16,color_FFFFFF,t_70" alt="img"><br><img src="https://img-blog.csdnimg.cn/20210223141401582.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3Njc2NDI5,size_16,color_FFFFFF,t_70" alt="img"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="生活随笔" scheme="http://tomasonl.github.io/tags/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>阿里云CDN架构梳理</title>
    <link href="http://tomasonl.github.io/2021/02/20/%E9%98%BF%E9%87%8C%E4%BA%91CDN%E6%9E%B6%E6%9E%84%E6%BC%94%E5%8F%98/"/>
    <id>http://tomasonl.github.io/2021/02/20/%E9%98%BF%E9%87%8C%E4%BA%91CDN%E6%9E%B6%E6%9E%84%E6%BC%94%E5%8F%98/</id>
    <published>2021-02-20T08:29:32.000Z</published>
    <updated>2021-02-23T07:12:39.848Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><strong>阿里云CDN-演变之路</strong></p><p>​                                                                  ——阿里云高级开发工程师 邓茜(沐沂)</p><ul><li>静态资源分发</li><li>动态资源加速</li><li>源站保护机制</li><li>SSL、HTTP</li></ul><p>5000+边缘节点，中美节点之间解决网络延迟大的问题；</p><p><strong>Service-Mesh Webinar</strong></p><p>“Webinar”——网络视频研讨会,是基于互联网实现点对点连接,可以集成幻灯片演示文稿、音频或视频文件于一体,能将企业所要求推广的信息立体呈现.</p><p><strong>节点架构:</strong></p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/1.png" alt="img"></p><p><strong>从以上架构看到一些问题：</strong></p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/2.png" alt="img"></p><p><strong>所以调整了微服务架构如下：</strong></p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/3.png" alt="img"></p><p><strong>技术方案—第一阶段：基于CoreDNS的服务发现</strong></p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/4.png" alt="img"></p><p>修改DNS IP和策略</p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/5.png" alt="img"></p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/6.png" alt="img"></p><p>UDP转发、伪连接；</p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/7.png" alt="img"></p><p>广播，向所有host 转发请求，在streamFilter里面实现。</p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/8.png" alt="img"></p><p><strong>技术方案—第二阶段：ServiceMesh架构</strong></p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/9.png" alt="img"></p><p>pilot </p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/10.png" alt="img"></p><p>小特点：跨容器的热升级；</p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/11.png" alt="img"></p><p>Istio适配</p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/12.png" alt="img"></p><p>协议</p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/13.png" alt="img"></p><p>新增服务，导入顺序</p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/14.png" alt="img"></p><p><strong>总结</strong></p><p>目前落地几十个IDC、完善节点动态监控等</p><p>后面需要加入虚机服务发现：</p><p><img src="https://cdn.jsdelivr.net/gh/tomasonl/CDNRepo@1.2/Pic/article/15.png" alt="img"></p><p> <a href="/download/%E9%98%BF%E9%87%8C%E4%BA%91CDN-%E6%BC%94%E5%8F%98%E4%B9%8B%E8%B7%AF.pdf">您也可以点击此处下载该文档</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工作记录" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>牛年大吉</title>
    <link href="http://tomasonl.github.io/2021/02/10/%E7%89%9B%E5%B9%B4%E5%A4%A7%E5%90%89/"/>
    <id>http://tomasonl.github.io/2021/02/10/%E7%89%9B%E5%B9%B4%E5%A4%A7%E5%90%89/</id>
    <published>2021-02-10T01:07:49.000Z</published>
    <updated>2021-04-13T02:23:02.653Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="辞旧迎新，牛年大吉"><a href="#辞旧迎新，牛年大吉" class="headerlink" title="辞旧迎新，牛年大吉"></a>辞旧迎新，牛年大吉</h2><p>&nbsp;&nbsp;&nbsp;&nbsp;腊月二十九，今天还在公司上班。今天上午的主要任务就是帮姥爷完成答应他老人家两年的家谱；这一点就体现了明日复明日，明日何其多的精髓。总是拖到最后才会做，这一点非常不好。2021，改掉自己的坏脾气、坏毛病，从践行自己的承诺开始；</p><p><strong>新的一年，新的希望。越努力，越幸运</strong></p><img src='https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=286867552,4021368242&fm=26&gp=0.jpg'><h3 id="牛牛来，希望新的一年，工作更加顺利！"><a href="#牛牛来，希望新的一年，工作更加顺利！" class="headerlink" title="牛牛来，希望新的一年，工作更加顺利！"></a>牛牛来，希望新的一年，工作更加顺利！</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;ZJRCU，福利待遇真的是太好了。机缘巧合能来到杭州工作也是老天馈赠的一份礼物吧。单位的人文关怀和工作氛围可能就是为我这样的人量身打造的。既要努力奋进也要乐在其中。毕竟生活就是这些元素的组成，所以不要忘了努力和快乐！</p><img src='http://pic1.win4000.com/wallpaper/5/554ac4a42321d.jpg'><h3 id="牛牛来，希望新的一年，世界和平！"><a href="#牛牛来，希望新的一年，世界和平！" class="headerlink" title="牛牛来，希望新的一年，世界和平！"></a>牛牛来，希望新的一年，世界和平！</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;希望我的家庭更加和美，亲人之间更加理解包容。希望国家之间协同发展，世界和平！</p><h3 id="牛牛来，希望新的一年，继续平安喜乐！"><a href="#牛牛来，希望新的一年，继续平安喜乐！" class="headerlink" title="牛牛来，希望新的一年，继续平安喜乐！"></a>牛牛来，希望新的一年，继续平安喜乐！</h3><p>越努力，越幸运！</p><img src='http://pic1.win4000.com/m00/4f/e6/22d5f52dbe12ed6493f300db3fc8fa56.jpg'>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="生活随笔" scheme="http://tomasonl.github.io/tags/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>秒杀系统001</title>
    <link href="http://tomasonl.github.io/2021/01/18/%E7%A7%92%E6%9D%80%E7%B3%BB%E7%BB%9F001/"/>
    <id>http://tomasonl.github.io/2021/01/18/%E7%A7%92%E6%9D%80%E7%B3%BB%E7%BB%9F001/</id>
    <published>2021-01-18T08:29:32.000Z</published>
    <updated>2021-04-13T02:23:55.235Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><img src="https://note.youdao.com/yws/public/resource/a9fa894e69fd68f9fca3297d13845d51/xmlnote/676E09E270FA44A89E3A64AE97285858/7215"><img src="https://note.youdao.com/yws/public/resource/a9fa894e69fd68f9fca3297d13845d51/xmlnote/75FA9F00EE11448BADD8DCC5D5F352BE/7222"><h3 id="utf8和utf8mb4的区别"><a href="#utf8和utf8mb4的区别" class="headerlink" title="utf8和utf8mb4的区别"></a>utf8和utf8mb4的区别</h3><p>   MySQL在5.5.3之后增加了这个utf8mb4的编码，mb4就是most bytes 4的意思，专门用来兼容四字节的unicode。好在utf8mb4是utf8的超集，除了将编码改为utf8mb4外不需要做其他转换。一般情况下使用utf8也就够了。<br>   既然utf8能够存下大部分中文汉字,那为什么还要使用utf8mb4呢? 原来mysql支持的 utf8 编码最大字符长度为 3 字节，如果遇到 4 字节的宽字符就会插入异常了。三个字节的 UTF-8 最大能编码的 Unicode 字符是 0xffff，也就是 Unicode 中的基本多文种平面(BMP)。utf8 不支持任何不在基本多文本平面的 Unicode字符。包括 Emoji 表情(Emoji 是一种特殊的 Unicode 手机上常见)、生僻字等等。</p><p>秒杀用户SQL</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line"> Navicat Premium Data Transfer</span><br><span class="line"></span><br><span class="line"> Source Server         : 本地数据库</span><br><span class="line"> Source Server Type    : MySQL</span><br><span class="line"> Source Server Version : 80022</span><br><span class="line"> Source Host           : localhost:3306</span><br><span class="line"> Source Schema         : seckill</span><br><span class="line"></span><br><span class="line"> Target Server Type    : MySQL</span><br><span class="line"> Target Server Version : 80022</span><br><span class="line"> File Encoding         : 65001</span><br><span class="line"></span><br><span class="line"> Date: 18&#x2F;01&#x2F;2021 10:38:24</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">SET NAMES utf8mb4;</span><br><span class="line">SET FOREIGN_KEY_CHECKS &#x3D; 0;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for t_user</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS &#96;t_user&#96;;</span><br><span class="line">CREATE TABLE &#96;t_user&#96;  (</span><br><span class="line">  &#96;id&#96; bigint NOT NULL COMMENT &#39;用户id-手机号码&#39;,</span><br><span class="line">  &#96;nickname&#96; varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL,</span><br><span class="line">  &#96;password&#96; varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT &#39;Md5加密两次&#39;,</span><br><span class="line">  &#96;slat&#96; varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT &#39; 加盐&#39;,</span><br><span class="line">  &#96;head&#96; varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NULL DEFAULT NULL COMMENT &#39;头像&#39;,</span><br><span class="line">  &#96;register_date&#96; datetime NULL DEFAULT NULL COMMENT &#39;注册时间&#39;,</span><br><span class="line">  &#96;last_login_date&#96; datetime NULL DEFAULT NULL,</span><br><span class="line">  &#96;login_count&#96; int NULL DEFAULT 0 COMMENT &#39;登录次数&#39;,</span><br><span class="line">  PRIMARY KEY (&#96;id&#96;) USING BTREE</span><br><span class="line">) ENGINE &#x3D; InnoDB CHARACTER SET &#x3D; utf8mb4 COLLATE &#x3D; utf8mb4_0900_ai_ci ROW_FORMAT &#x3D; Dynamic;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of t_user</span><br><span class="line">-- ----------------------------</span><br><span class="line"></span><br><span class="line">SET FOREIGN_KEY_CHECKS &#x3D; 1;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Md5加密Util</p><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.xxxx.seckill.util;</span><br><span class="line">import org.apache.commons.codec.digest.DigestUtils;</span><br><span class="line">&#x2F;*</span><br><span class="line"> *@program:seckill-demo</span><br><span class="line"> *@author: Tomasonlee</span><br><span class="line"> *@Time: 2021&#x2F;1&#x2F;18  10:43</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class Md5Util &#123;</span><br><span class="line">    public static String md5(String args) &#123;</span><br><span class="line">        return DigestUtils.md5Hex(args);</span><br><span class="line">    &#125;</span><br><span class="line">    private static final String salt&#x3D;&quot;1a2b3c4d&quot;;</span><br><span class="line"></span><br><span class="line">    public static String inputPassToFormPass(String inputPass)&#123;</span><br><span class="line">        String str &#x3D; salt.charAt(0)+salt.charAt(2)+inputPass+salt.charAt(5)+salt.charAt(4);</span><br><span class="line">        return md5(str);</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;二次加密  后端密码到数据库密码</span><br><span class="line">    public static String fromPassToDBPass(String formPass,String salt)&#123;</span><br><span class="line">        String str &#x3D; salt.charAt(0)+salt.charAt(2)+formPass+salt.charAt(5)+salt.charAt(4);</span><br><span class="line">        return md5(str);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static String inputPassToDBPass(String inputPass,String salt)&#123;</span><br><span class="line">        String fromPass &#x3D; inputPassToFormPass(inputPass);</span><br><span class="line">        String dbPass &#x3D; fromPassToDBPass(fromPass,salt);</span><br><span class="line">        return dbPass;</span><br><span class="line">    &#125;</span><br><span class="line">&#x2F;&#x2F;    public static void main(String[] args) &#123;</span><br><span class="line">&#x2F;&#x2F;        System.out.println(inputPassToFormPass(&quot;123456&quot;));</span><br><span class="line">&#x2F;&#x2F;        System.out.println(fromPassToDBPass(&quot;ce21b747de5af71ab5c2e20ff0a60eea&quot;,&quot;1a2b3c4d&quot;));</span><br><span class="line">&#x2F;&#x2F;        System.out.println(inputPassToDBPass(&quot;123456&quot;,&quot;1a2b3c4d&quot;));</span><br><span class="line">&#x2F;&#x2F;    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="代码JSR303参数校验简化代码"><a href="#代码JSR303参数校验简化代码" class="headerlink" title="代码JSR303参数校验简化代码"></a>代码JSR303参数校验简化代码</h3><h4 id="1-依赖"><a href="#1-依赖" class="headerlink" title="1.依赖"></a>1.依赖</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!-- validation组件 --&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-validation&lt;&#x2F;artifactId&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure><h4 id="Valid注解"><a href="#Valid注解" class="headerlink" title="@Valid注解"></a>@Valid注解</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">public RespBean doLogin(@Valid LoginVo loginVo)&#123;</span><br><span class="line">    log.info(&quot;输入的登录信息为&#123;&#125;&quot;,loginVo);</span><br><span class="line">    return userService.doLogin(loginVo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@notnull等注解 + 自定义注解</span><br><span class="line">@Data</span><br><span class="line">public class LoginVo &#123;</span><br><span class="line">    @NotNull</span><br><span class="line">    @IsMobile</span><br><span class="line">    private String mobile;</span><br><span class="line">    @NotNull</span><br><span class="line">    @Length(min&#x3D;32)</span><br><span class="line">    private String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="自定义注解-IsMobile"><a href="#自定义注解-IsMobile" class="headerlink" title="自定义注解@IsMobile"></a>自定义注解@IsMobile</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.xxxx.seckill.validator;</span><br><span class="line">import javax.validation.Constraint;</span><br><span class="line">import javax.validation.Payload;</span><br><span class="line">import java.lang.annotation.*;</span><br><span class="line">&#x2F;*</span><br><span class="line"> *@program:seckill-demo</span><br><span class="line"> *@author: Tomasonlee</span><br><span class="line"> *@Time: 2021&#x2F;1&#x2F;18  19:16</span><br><span class="line"> * lee写的第一个自定义注解</span><br><span class="line"> *&#x2F;</span><br><span class="line">@Target(&#123;ElementType.METHOD, ElementType.FIELD, ElementType.ANNOTATION_TYPE, ElementType.CONSTRUCTOR, ElementType.PARAMETER, ElementType.TYPE_USE&#125;)</span><br><span class="line">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="line">@Documented</span><br><span class="line">@Constraint(</span><br><span class="line">        validatedBy &#x3D; &#123;IsMobileValidator.class&#125;</span><br><span class="line">)</span><br><span class="line">public @interface IsMobile &#123;</span><br><span class="line"></span><br><span class="line">    boolean required() default true;</span><br><span class="line"></span><br><span class="line">    String message() default &quot;手机号码格式错误&quot;;</span><br><span class="line"></span><br><span class="line">    Class&lt;?&gt;[] groups() default &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    Class&lt;? extends Payload&gt;[] payload() default &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">IsMobileValidator </span><br><span class="line">package com.xxxx.seckill.validator;</span><br><span class="line"></span><br><span class="line">import com.xxxx.seckill.util.ValidatorUtil;</span><br><span class="line">import org.springframework.util.StringUtils;</span><br><span class="line"></span><br><span class="line">import javax.validation.ConstraintValidator;</span><br><span class="line">import javax.validation.ConstraintValidatorContext;</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line"> *@program:seckill-demo</span><br><span class="line"> *@author: Tomasonlee</span><br><span class="line"> *@Time: 2021&#x2F;1&#x2F;18  19:19</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class IsMobileValidator implements ConstraintValidator&lt;IsMobile, String&gt; &#123;</span><br><span class="line">    private boolean required &#x3D; false;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void initialize(IsMobile constraintAnnotation) &#123;</span><br><span class="line">        required &#x3D; constraintAnnotation.required();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean isValid(String value, ConstraintValidatorContext context) &#123;</span><br><span class="line">        if (required) &#123;</span><br><span class="line">            return ValidatorUtil.isMobile(value);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            if (StringUtils.isEmpty(value)) &#123;</span><br><span class="line">                return true;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                return ValidatorUtil.isMobile(value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ValidatorUtil"><a href="#ValidatorUtil" class="headerlink" title="ValidatorUtil"></a>ValidatorUtil</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">package com.xxxx.seckill.util;</span><br><span class="line">import org.springframework.util.StringUtils;</span><br><span class="line">import java.util.regex.Matcher;</span><br><span class="line">import java.util.regex.Pattern;</span><br><span class="line"></span><br><span class="line">&#x2F;*</span><br><span class="line"> *@program:seckill-demo</span><br><span class="line"> *@author: Tomasonlee</span><br><span class="line"> *@Time: 2021&#x2F;1&#x2F;18  19:23</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class ValidatorUtil &#123;</span><br><span class="line">    private static final Pattern mobile_pattern &#x3D; Pattern.compile(&quot;[1]([3-9])[0-9]&#123;9&#125;$&quot;);</span><br><span class="line"></span><br><span class="line">    public static boolean isMobile(String mobile) &#123;</span><br><span class="line">        if (StringUtils.isEmpty(mobile)) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">        Matcher matcher &#x3D; mobile_pattern.matcher(mobile);</span><br><span class="line">        return matcher.matches();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="工作记录" scheme="http://tomasonl.github.io/tags/%E5%B7%A5%E4%BD%9C%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>生活随笔2</title>
    <link href="http://tomasonl.github.io/2021/01/17/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%942/"/>
    <id>http://tomasonl.github.io/2021/01/17/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%942/</id>
    <published>2021-01-17T12:34:29.000Z</published>
    <updated>2021-04-15T01:06:40.865Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="一切都在往好的方向发展"><a href="#一切都在往好的方向发展" class="headerlink" title="一切都在往好的方向发展"></a>一切都在往好的方向发展</h1><h2 id="心动2021！干就完了！！！"><a href="#心动2021！干就完了！！！" class="headerlink" title="心动2021！干就完了！！！"></a>心动2021！干就完了！！！</h2><p>冲，越努力，越幸运！ </p><p>今年过年可能因为疫情原因，就留在杭州了。万事如意，大吉大利！冲！！！</p>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;\assets\css\APlayer.min.css&quot;&gt;&lt;script src=&quot;\assets\js\APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="生活随笔" scheme="http://tomasonl.github.io/tags/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
</feed>
